<% template script_charts ()

    setContentType("text/javascript;charset=utf-8");

%>

/* Javascript plotting library for jQuery, v. 0.7.
 *
 * Released under the MIT license by IOLA, December 2007.
 *
 */
/* Flot - Base */
;(function(b){b.color={};b.color.make=function(d,e,g,f){var c={};c.r=d||0;c.g=e||0;c.b=g||0;c.a=f!=null?f:1;c.add=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]+=j}return c.normalize()};c.scale=function(h,j){for(var k=0;k<h.length;++k){c[h.charAt(k)]*=j}return c.normalize()};c.toString=function(){if(c.a>=1){return"rgb("+[c.r,c.g,c.b].join(",")+")"}else{return"rgba("+[c.r,c.g,c.b,c.a].join(",")+")"}};c.normalize=function(){function h(k,j,l){return j<k?k:(j>l?l:j)}c.r=h(0,parseInt(c.r),255);c.g=h(0,parseInt(c.g),255);c.b=h(0,parseInt(c.b),255);c.a=h(0,c.a,1);return c};c.clone=function(){return b.color.make(c.r,c.b,c.g,c.a)};return c.normalize()};b.color.extract=function(d,e){var c;do{c=d.css(e).toLowerCase();if(c!=""&&c!="transparent"){break}d=d.parent()}while(!b.nodeName(d.get(0),"body"));if(c=="rgba(0, 0, 0, 0)"){c="transparent"}return b.color.parse(c)};b.color.parse=function(c){var d,f=b.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10))}if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]))}if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55)}if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c)){return f(parseFloat(d[1])*2.55,parseFloat(d[2])*2.55,parseFloat(d[3])*2.55,parseFloat(d[4]))}if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c)){return f(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16))}if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c)){return f(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16))}var e=b.trim(c).toLowerCase();if(e=="transparent"){return f(255,255,255,0)}else{d=a[e]||[0,0,0];return f(d[0],d[1],d[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(c){function b(av,ai,J,af){var Q=[],O={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},az=null,ad=null,y=null,H=null,A=null,p=[],aw=[],q={left:0,right:0,top:0,bottom:0},G=0,I=0,h=0,w=0,ak={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},aq=this;aq.setData=aj;aq.setupGrid=t;aq.draw=W;aq.getPlaceholder=function(){return av};aq.getCanvas=function(){return az};aq.getPlotOffset=function(){return q};aq.width=function(){return h};aq.height=function(){return w};aq.offset=function(){var aB=y.offset();aB.left+=q.left;aB.top+=q.top;return aB};aq.getData=function(){return Q};aq.getAxes=function(){var aC={},aB;c.each(p.concat(aw),function(aD,aE){if(aE){aC[aE.direction+(aE.n!=1?aE.n:"")+"axis"]=aE}});return aC};aq.getXAxes=function(){return p};aq.getYAxes=function(){return aw};aq.c2p=C;aq.p2c=ar;aq.getOptions=function(){return O};aq.highlight=x;aq.unhighlight=T;aq.triggerRedrawOverlay=f;aq.pointOffset=function(aB){return{left:parseInt(p[aA(aB,"x")-1].p2c(+aB.x)+q.left),top:parseInt(aw[aA(aB,"y")-1].p2c(+aB.y)+q.top)}};aq.shutdown=ag;aq.resize=function(){B();g(az);g(ad)};aq.hooks=ak;F(aq);Z(J);X();aj(ai);t();W();ah();function an(aD,aB){aB=[aq].concat(aB);for(var aC=0;aC<aD.length;++aC){aD[aC].apply(this,aB)}}function F(){for(var aB=0;aB<af.length;++aB){var aC=af[aB];aC.init(aq);if(aC.options){c.extend(true,O,aC.options)}}}function Z(aC){var aB;c.extend(true,O,aC);if(O.xaxis.color==null){O.xaxis.color=O.grid.color}if(O.yaxis.color==null){O.yaxis.color=O.grid.color}if(O.xaxis.tickColor==null){O.xaxis.tickColor=O.grid.tickColor}if(O.yaxis.tickColor==null){O.yaxis.tickColor=O.grid.tickColor}if(O.grid.borderColor==null){O.grid.borderColor=O.grid.color}if(O.grid.tickColor==null){O.grid.tickColor=c.color.parse(O.grid.color).scale("a",0.22).toString()}for(aB=0;aB<Math.max(1,O.xaxes.length);++aB){O.xaxes[aB]=c.extend(true,{},O.xaxis,O.xaxes[aB])}for(aB=0;aB<Math.max(1,O.yaxes.length);++aB){O.yaxes[aB]=c.extend(true,{},O.yaxis,O.yaxes[aB])}if(O.xaxis.noTicks&&O.xaxis.ticks==null){O.xaxis.ticks=O.xaxis.noTicks}if(O.yaxis.noTicks&&O.yaxis.ticks==null){O.yaxis.ticks=O.yaxis.noTicks}if(O.x2axis){O.xaxes[1]=c.extend(true,{},O.xaxis,O.x2axis);O.xaxes[1].position="top"}if(O.y2axis){O.yaxes[1]=c.extend(true,{},O.yaxis,O.y2axis);O.yaxes[1].position="right"}if(O.grid.coloredAreas){O.grid.markings=O.grid.coloredAreas}if(O.grid.coloredAreasColor){O.grid.markingsColor=O.grid.coloredAreasColor}if(O.lines){c.extend(true,O.series.lines,O.lines)}if(O.points){c.extend(true,O.series.points,O.points)}if(O.bars){c.extend(true,O.series.bars,O.bars)}if(O.shadowSize!=null){O.series.shadowSize=O.shadowSize}for(aB=0;aB<O.xaxes.length;++aB){V(p,aB+1).options=O.xaxes[aB]}for(aB=0;aB<O.yaxes.length;++aB){V(aw,aB+1).options=O.yaxes[aB]}for(var aD in ak){if(O.hooks[aD]&&O.hooks[aD].length){ak[aD]=ak[aD].concat(O.hooks[aD])}}an(ak.processOptions,[O])}function aj(aB){Q=Y(aB);ax();z()}function Y(aE){var aC=[];for(var aB=0;aB<aE.length;++aB){var aD=c.extend(true,{},O.series);if(aE[aB].data!=null){aD.data=aE[aB].data;delete aE[aB].data;c.extend(true,aD,aE[aB]);aE[aB].data=aD.data}else{aD.data=aE[aB]}aC.push(aD)}return aC}function aA(aC,aD){var aB=aC[aD+"axis"];if(typeof aB=="object"){aB=aB.n}if(typeof aB!="number"){aB=1}return aB}function m(){return c.grep(p.concat(aw),function(aB){return aB})}function C(aE){var aC={},aB,aD;for(aB=0;aB<p.length;++aB){aD=p[aB];if(aD&&aD.used){aC["x"+aD.n]=aD.c2p(aE.left)}}for(aB=0;aB<aw.length;++aB){aD=aw[aB];if(aD&&aD.used){aC["y"+aD.n]=aD.c2p(aE.top)}}if(aC.x1!==undefined){aC.x=aC.x1}if(aC.y1!==undefined){aC.y=aC.y1}return aC}function ar(aF){var aD={},aC,aE,aB;for(aC=0;aC<p.length;++aC){aE=p[aC];if(aE&&aE.used){aB="x"+aE.n;if(aF[aB]==null&&aE.n==1){aB="x"}if(aF[aB]!=null){aD.left=aE.p2c(aF[aB]);break}}}for(aC=0;aC<aw.length;++aC){aE=aw[aC];if(aE&&aE.used){aB="y"+aE.n;if(aF[aB]==null&&aE.n==1){aB="y"}if(aF[aB]!=null){aD.top=aE.p2c(aF[aB]);break}}}return aD}function V(aC,aB){if(!aC[aB-1]){aC[aB-1]={n:aB,direction:aC==p?"x":"y",options:c.extend(true,{},aC==p?O.xaxis:O.yaxis)}}return aC[aB-1]}function ax(){var aG;var aM=Q.length,aB=[],aE=[];for(aG=0;aG<Q.length;++aG){var aJ=Q[aG].color;if(aJ!=null){--aM;if(typeof aJ=="number"){aE.push(aJ)}else{aB.push(c.color.parse(Q[aG].color))}}}for(aG=0;aG<aE.length;++aG){aM=Math.max(aM,aE[aG]+1)}var aC=[],aF=0;aG=0;while(aC.length<aM){var aI;if(O.colors.length==aG){aI=c.color.make(100,100,100)}else{aI=c.color.parse(O.colors[aG])}var aD=aF%2==1?-1:1;aI.scale("rgb",1+aD*Math.ceil(aF/2)*0.2);aC.push(aI);++aG;if(aG>=O.colors.length){aG=0;++aF}}var aH=0,aN;for(aG=0;aG<Q.length;++aG){aN=Q[aG];if(aN.color==null){aN.color=aC[aH].toString();++aH}else{if(typeof aN.color=="number"){aN.color=aC[aN.color].toString()}}if(aN.lines.show==null){var aL,aK=true;for(aL in aN){if(aN[aL]&&aN[aL].show){aK=false;break}}if(aK){aN.lines.show=true}}aN.xaxis=V(p,aA(aN,"x"));aN.yaxis=V(aw,aA(aN,"y"))}}function z(){var aO=Number.POSITIVE_INFINITY,aI=Number.NEGATIVE_INFINITY,aB=Number.MAX_VALUE,aU,aS,aR,aN,aD,aJ,aT,aP,aH,aG,aC,a0,aX,aL;function aF(a3,a2,a1){if(a2<a3.datamin&&a2!=-aB){a3.datamin=a2}if(a1>a3.datamax&&a1!=aB){a3.datamax=a1}}c.each(m(),function(a1,a2){a2.datamin=aO;a2.datamax=aI;a2.used=false});for(aU=0;aU<Q.length;++aU){aJ=Q[aU];aJ.datapoints={points:[]};an(ak.processRawData,[aJ,aJ.data,aJ.datapoints])}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];var aZ=aJ.data,aW=aJ.datapoints.format;if(!aW){aW=[];aW.push({x:true,number:true,required:true});aW.push({y:true,number:true,required:true});if(aJ.bars.show||(aJ.lines.show&&aJ.lines.fill)){aW.push({y:true,number:true,required:false,defaultValue:0});if(aJ.bars.horizontal){delete aW[aW.length-1].y;aW[aW.length-1].x=true}}aJ.datapoints.format=aW}if(aJ.datapoints.pointsize!=null){continue}aJ.datapoints.pointsize=aW.length;aP=aJ.datapoints.pointsize;aT=aJ.datapoints.points;insertSteps=aJ.lines.show&&aJ.lines.steps;aJ.xaxis.used=aJ.yaxis.used=true;for(aS=aR=0;aS<aZ.length;++aS,aR+=aP){aL=aZ[aS];var aE=aL==null;if(!aE){for(aN=0;aN<aP;++aN){a0=aL[aN];aX=aW[aN];if(aX){if(aX.number&&a0!=null){a0=+a0;if(isNaN(a0)){a0=null}else{if(a0==Infinity){a0=aB}else{if(a0==-Infinity){a0=-aB}}}}if(a0==null){if(aX.required){aE=true}if(aX.defaultValue!=null){a0=aX.defaultValue}}}aT[aR+aN]=a0}}if(aE){for(aN=0;aN<aP;++aN){a0=aT[aR+aN];if(a0!=null){aX=aW[aN];if(aX.x){aF(aJ.xaxis,a0,a0)}if(aX.y){aF(aJ.yaxis,a0,a0)}}aT[aR+aN]=null}}else{if(insertSteps&&aR>0&&aT[aR-aP]!=null&&aT[aR-aP]!=aT[aR]&&aT[aR-aP+1]!=aT[aR+1]){for(aN=0;aN<aP;++aN){aT[aR+aP+aN]=aT[aR+aN]}aT[aR+1]=aT[aR-aP+1];aR+=aP}}}}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];an(ak.processDatapoints,[aJ,aJ.datapoints])}for(aU=0;aU<Q.length;++aU){aJ=Q[aU];aT=aJ.datapoints.points,aP=aJ.datapoints.pointsize;var aK=aO,aQ=aO,aM=aI,aV=aI;for(aS=0;aS<aT.length;aS+=aP){if(aT[aS]==null){continue}for(aN=0;aN<aP;++aN){a0=aT[aS+aN];aX=aW[aN];if(!aX||a0==aB||a0==-aB){continue}if(aX.x){if(a0<aK){aK=a0}if(a0>aM){aM=a0}}if(aX.y){if(a0<aQ){aQ=a0}if(a0>aV){aV=a0}}}}if(aJ.bars.show){var aY=aJ.bars.align=="left"?0:-aJ.bars.barWidth/2;if(aJ.bars.horizontal){aQ+=aY;aV+=aY+aJ.bars.barWidth}else{aK+=aY;aM+=aY+aJ.bars.barWidth}}aF(aJ.xaxis,aK,aM);aF(aJ.yaxis,aQ,aV)}c.each(m(),function(a1,a2){if(a2.datamin==aO){a2.datamin=null}if(a2.datamax==aI){a2.datamax=null}})}function j(aB,aC){var aD=document.createElement("canvas");aD.className=aC;aD.width=G;aD.height=I;if(!aB){c(aD).css({position:"absolute",left:0,top:0})}c(aD).appendTo(av);if(!aD.getContext){aD=window.G_vmlCanvasManager.initElement(aD)}aD.getContext("2d").save();return aD}function B(){G=av.width();I=av.height();if(G<=0||I<=0){throw"Invalid dimensions for plot, width = "+G+", height = "+I}}function g(aC){if(aC.width!=G){aC.width=G}if(aC.height!=I){aC.height=I}var aB=aC.getContext("2d");aB.restore();aB.save()}function X(){var aC,aB=av.children("canvas.base"),aD=av.children("canvas.overlay");if(aB.length==0||aD==0){av.html("");av.css({padding:0});if(av.css("position")=="static"){av.css("position","relative")}B();az=j(true,"base");ad=j(false,"overlay");aC=false}else{az=aB.get(0);ad=aD.get(0);aC=true}H=az.getContext("2d");A=ad.getContext("2d");y=c([ad,az]);if(aC){av.data("plot").shutdown();aq.resize();A.clearRect(0,0,G,I);y.unbind();av.children().not([az,ad]).remove()}av.data("plot",aq)}function ah(){if(O.grid.hoverable){y.mousemove(aa);y.mouseleave(l)}if(O.grid.clickable){y.click(R)}an(ak.bindEvents,[y])}function ag(){if(M){clearTimeout(M)}y.unbind("mousemove",aa);y.unbind("mouseleave",l);y.unbind("click",R);an(ak.shutdown,[y])}function r(aG){function aC(aH){return aH}var aF,aB,aD=aG.options.transform||aC,aE=aG.options.inverseTransform;if(aG.direction=="x"){aF=aG.scale=h/Math.abs(aD(aG.max)-aD(aG.min));aB=Math.min(aD(aG.max),aD(aG.min))}else{aF=aG.scale=w/Math.abs(aD(aG.max)-aD(aG.min));aF=-aF;aB=Math.max(aD(aG.max),aD(aG.min))}if(aD==aC){aG.p2c=function(aH){return(aH-aB)*aF}}else{aG.p2c=function(aH){return(aD(aH)-aB)*aF}}if(!aE){aG.c2p=function(aH){return aB+aH/aF}}else{aG.c2p=function(aH){return aE(aB+aH/aF)}}}function L(aD){var aB=aD.options,aF,aJ=aD.ticks||[],aI=[],aE,aK=aB.labelWidth,aG=aB.labelHeight,aC;function aH(aM,aL){return c('<div style="position:absolute;top:-10000px;'+aL+'font-size:smaller"><div class="'+aD.direction+"Axis "+aD.direction+aD.n+'Axis">'+aM.join("")+"</div></div>").appendTo(av)}if(aD.direction=="x"){if(aK==null){aK=Math.floor(G/(aJ.length>0?aJ.length:1))}if(aG==null){aI=[];for(aF=0;aF<aJ.length;++aF){aE=aJ[aF].label;if(aE){aI.push('<div class="tickLabel" style="float:left;width:'+aK+'px">'+aE+"</div>")}}if(aI.length>0){aI.push('<div style="clear:left"></div>');aC=aH(aI,"width:10000px;");aG=aC.height();aC.remove()}}}else{if(aK==null||aG==null){for(aF=0;aF<aJ.length;++aF){aE=aJ[aF].label;if(aE){aI.push('<div class="tickLabel">'+aE+"</div>")}}if(aI.length>0){aC=aH(aI,"");if(aK==null){aK=aC.children().width()}if(aG==null){aG=aC.find("div.tickLabel").height()}aC.remove()}}}if(aK==null){aK=0}if(aG==null){aG=0}aD.labelWidth=aK;aD.labelHeight=aG}function au(aD){var aC=aD.labelWidth,aL=aD.labelHeight,aH=aD.options.position,aF=aD.options.tickLength,aG=O.grid.axisMargin,aJ=O.grid.labelMargin,aK=aD.direction=="x"?p:aw,aE;var aB=c.grep(aK,function(aN){return aN&&aN.options.position==aH&&aN.reserveSpace});if(c.inArray(aD,aB)==aB.length-1){aG=0}if(aF==null){aF="full"}var aI=c.grep(aK,function(aN){return aN&&aN.reserveSpace});var aM=c.inArray(aD,aI)==0;if(!aM&&aF=="full"){aF=5}if(!isNaN(+aF)){aJ+=+aF}if(aD.direction=="x"){aL+=aJ;if(aH=="bottom"){q.bottom+=aL+aG;aD.box={top:I-q.bottom,height:aL}}else{aD.box={top:q.top+aG,height:aL};q.top+=aL+aG}}else{aC+=aJ;if(aH=="left"){aD.box={left:q.left+aG,width:aC};q.left+=aC+aG}else{q.right+=aC+aG;aD.box={left:G-q.right,width:aC}}}aD.position=aH;aD.tickLength=aF;aD.box.padding=aJ;aD.innermost=aM}function U(aB){if(aB.direction=="x"){aB.box.left=q.left;aB.box.width=h}else{aB.box.top=q.top;aB.box.height=w}}function t(){var aC,aE=m();c.each(aE,function(aF,aG){aG.show=aG.options.show;if(aG.show==null){aG.show=aG.used}aG.reserveSpace=aG.show||aG.options.reserveSpace;n(aG)});allocatedAxes=c.grep(aE,function(aF){return aF.reserveSpace});q.left=q.right=q.top=q.bottom=0;if(O.grid.show){c.each(allocatedAxes,function(aF,aG){S(aG);P(aG);ap(aG,aG.ticks);L(aG)});for(aC=allocatedAxes.length-1;aC>=0;--aC){au(allocatedAxes[aC])}var aD=O.grid.minBorderMargin;if(aD==null){aD=0;for(aC=0;aC<Q.length;++aC){aD=Math.max(aD,Q[aC].points.radius+Q[aC].points.lineWidth/2)}}for(var aB in q){q[aB]+=O.grid.borderWidth;q[aB]=Math.max(aD,q[aB])}}h=G-q.left-q.right;w=I-q.bottom-q.top;c.each(aE,function(aF,aG){r(aG)});if(O.grid.show){c.each(allocatedAxes,function(aF,aG){U(aG)});k()}o()}function n(aE){var aF=aE.options,aD=+(aF.min!=null?aF.min:aE.datamin),aB=+(aF.max!=null?aF.max:aE.datamax),aH=aB-aD;if(aH==0){var aC=aB==0?1:0.01;if(aF.min==null){aD-=aC}if(aF.max==null||aF.min!=null){aB+=aC}}else{var aG=aF.autoscaleMargin;if(aG!=null){if(aF.min==null){aD-=aH*aG;if(aD<0&&aE.datamin!=null&&aE.datamin>=0){aD=0}}if(aF.max==null){aB+=aH*aG;if(aB>0&&aE.datamax!=null&&aE.datamax<=0){aB=0}}}}aE.min=aD;aE.max=aB}function S(aG){var aM=aG.options;var aH;if(typeof aM.ticks=="number"&&aM.ticks>0){aH=aM.ticks}else{aH=0.3*Math.sqrt(aG.direction=="x"?G:I)}var aT=(aG.max-aG.min)/aH,aO,aB,aN,aR,aS,aQ,aI;if(aM.mode=="time"){var aJ={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aK=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var aC=0;if(aM.minTickSize!=null){if(typeof aM.tickSize=="number"){aC=aM.tickSize}else{aC=aM.minTickSize[0]*aJ[aM.minTickSize[1]]}}for(var aS=0;aS<aK.length-1;++aS){if(aT<(aK[aS][0]*aJ[aK[aS][1]]+aK[aS+1][0]*aJ[aK[aS+1][1]])/2&&aK[aS][0]*aJ[aK[aS][1]]>=aC){break}}aO=aK[aS][0];aN=aK[aS][1];if(aN=="year"){aQ=Math.pow(10,Math.floor(Math.log(aT/aJ.year)/Math.LN10));aI=(aT/aJ.year)/aQ;if(aI<1.5){aO=1}else{if(aI<3){aO=2}else{if(aI<7.5){aO=5}else{aO=10}}}aO*=aQ}aG.tickSize=aM.tickSize||[aO,aN];aB=function(aX){var a2=[],a0=aX.tickSize[0],a3=aX.tickSize[1],a1=new Date(aX.min);var aW=a0*aJ[a3];if(a3=="second"){a1.setUTCSeconds(a(a1.getUTCSeconds(),a0))}if(a3=="minute"){a1.setUTCMinutes(a(a1.getUTCMinutes(),a0))}if(a3=="hour"){a1.setUTCHours(a(a1.getUTCHours(),a0))}if(a3=="month"){a1.setUTCMonth(a(a1.getUTCMonth(),a0))}if(a3=="year"){a1.setUTCFullYear(a(a1.getUTCFullYear(),a0))}a1.setUTCMilliseconds(0);if(aW>=aJ.minute){a1.setUTCSeconds(0)}if(aW>=aJ.hour){a1.setUTCMinutes(0)}if(aW>=aJ.day){a1.setUTCHours(0)}if(aW>=aJ.day*4){a1.setUTCDate(1)}if(aW>=aJ.year){a1.setUTCMonth(0)}var a5=0,a4=Number.NaN,aY;do{aY=a4;a4=a1.getTime();a2.push(a4);if(a3=="month"){if(a0<1){a1.setUTCDate(1);var aV=a1.getTime();a1.setUTCMonth(a1.getUTCMonth()+1);var aZ=a1.getTime();a1.setTime(a4+a5*aJ.hour+(aZ-aV)*a0);a5=a1.getUTCHours();a1.setUTCHours(0)}else{a1.setUTCMonth(a1.getUTCMonth()+a0)}}else{if(a3=="year"){a1.setUTCFullYear(a1.getUTCFullYear()+a0)}else{a1.setTime(a4+aW)}}}while(a4<aX.max&&a4!=aY);return a2};aR=function(aV,aY){var a0=new Date(aV);if(aM.timeformat!=null){return c.plot.formatDate(a0,aM.timeformat,aM.monthNames)}var aW=aY.tickSize[0]*aJ[aY.tickSize[1]];var aX=aY.max-aY.min;var aZ=(aM.twelveHourClock)?" %p":"";if(aW<aJ.minute){fmt="%h:%M:%S"+aZ}else{if(aW<aJ.day){if(aX<2*aJ.day){fmt="%h:%M"+aZ}else{fmt="%b %d %h:%M"+aZ}}else{if(aW<aJ.month){fmt="%b %d"}else{if(aW<aJ.year){if(aX<aJ.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(a0,fmt,aM.monthNames)}}else{var aU=aM.tickDecimals;var aP=-Math.floor(Math.log(aT)/Math.LN10);if(aU!=null&&aP>aU){aP=aU}aQ=Math.pow(10,-aP);aI=aT/aQ;if(aI<1.5){aO=1}else{if(aI<3){aO=2;if(aI>2.25&&(aU==null||aP+1<=aU)){aO=2.5;++aP}}else{if(aI<7.5){aO=5}else{aO=10}}}aO*=aQ;if(aM.minTickSize!=null&&aO<aM.minTickSize){aO=aM.minTickSize}aG.tickDecimals=Math.max(0,aU!=null?aU:aP);aG.tickSize=aM.tickSize||aO;aB=function(aX){var aZ=[];var a0=a(aX.min,aX.tickSize),aW=0,aV=Number.NaN,aY;do{aY=aV;aV=a0+aW*aX.tickSize;aZ.push(aV);++aW}while(aV<aX.max&&aV!=aY);return aZ};aR=function(aV,aW){return aV.toFixed(aW.tickDecimals)}}if(aM.alignTicksWithAxis!=null){var aF=(aG.direction=="x"?p:aw)[aM.alignTicksWithAxis-1];if(aF&&aF.used&&aF!=aG){var aL=aB(aG);if(aL.length>0){if(aM.min==null){aG.min=Math.min(aG.min,aL[0])}if(aM.max==null&&aL.length>1){aG.max=Math.max(aG.max,aL[aL.length-1])}}aB=function(aX){var aY=[],aV,aW;for(aW=0;aW<aF.ticks.length;++aW){aV=(aF.ticks[aW].v-aF.min)/(aF.max-aF.min);aV=aX.min+aV*(aX.max-aX.min);aY.push(aV)}return aY};if(aG.mode!="time"&&aM.tickDecimals==null){var aE=Math.max(0,-Math.floor(Math.log(aT)/Math.LN10)+1),aD=aB(aG);if(!(aD.length>1&&/\..*0$/.test((aD[1]-aD[0]).toFixed(aE)))){aG.tickDecimals=aE}}}}aG.tickGenerator=aB;if(c.isFunction(aM.tickFormatter)){aG.tickFormatter=function(aV,aW){return""+aM.tickFormatter(aV,aW)}}else{aG.tickFormatter=aR}}function P(aF){var aH=aF.options.ticks,aG=[];if(aH==null||(typeof aH=="number"&&aH>0)){aG=aF.tickGenerator(aF)}else{if(aH){if(c.isFunction(aH)){aG=aH({min:aF.min,max:aF.max})}else{aG=aH}}}var aE,aB;aF.ticks=[];for(aE=0;aE<aG.length;++aE){var aC=null;var aD=aG[aE];if(typeof aD=="object"){aB=+aD[0];if(aD.length>1){aC=aD[1]}}else{aB=+aD}if(aC==null){aC=aF.tickFormatter(aB,aF)}if(!isNaN(aB)){aF.ticks.push({v:aB,label:aC})}}}function ap(aB,aC){if(aB.options.autoscaleMargin&&aC.length>0){if(aB.options.min==null){aB.min=Math.min(aB.min,aC[0].v)}if(aB.options.max==null&&aC.length>1){aB.max=Math.max(aB.max,aC[aC.length-1].v)}}}function W(){H.clearRect(0,0,G,I);var aC=O.grid;if(aC.show&&aC.backgroundColor){N()}if(aC.show&&!aC.aboveData){ac()}for(var aB=0;aB<Q.length;++aB){an(ak.drawSeries,[H,Q[aB]]);d(Q[aB])}an(ak.draw,[H]);if(aC.show&&aC.aboveData){ac()}}function D(aB,aI){var aE,aH,aG,aD,aF=m();for(i=0;i<aF.length;++i){aE=aF[i];if(aE.direction==aI){aD=aI+aE.n+"axis";if(!aB[aD]&&aE.n==1){aD=aI+"axis"}if(aB[aD]){aH=aB[aD].from;aG=aB[aD].to;break}}}if(!aB[aD]){aE=aI=="x"?p[0]:aw[0];aH=aB[aI+"1"];aG=aB[aI+"2"]}if(aH!=null&&aG!=null&&aH>aG){var aC=aH;aH=aG;aG=aC}return{from:aH,to:aG,axis:aE}}function N(){H.save();H.translate(q.left,q.top);H.fillStyle=am(O.grid.backgroundColor,w,0,"rgba(255, 255, 255, 0)");H.fillRect(0,0,h,w);H.restore()}function ac(){var aF;H.save();H.translate(q.left,q.top);var aH=O.grid.markings;if(aH){if(c.isFunction(aH)){var aK=aq.getAxes();aK.xmin=aK.xaxis.min;aK.xmax=aK.xaxis.max;aK.ymin=aK.yaxis.min;aK.ymax=aK.yaxis.max;aH=aH(aK)}for(aF=0;aF<aH.length;++aF){var aD=aH[aF],aC=D(aD,"x"),aI=D(aD,"y");if(aC.from==null){aC.from=aC.axis.min}if(aC.to==null){aC.to=aC.axis.max}if(aI.from==null){aI.from=aI.axis.min}if(aI.to==null){aI.to=aI.axis.max}if(aC.to<aC.axis.min||aC.from>aC.axis.max||aI.to<aI.axis.min||aI.from>aI.axis.max){continue}aC.from=Math.max(aC.from,aC.axis.min);aC.to=Math.min(aC.to,aC.axis.max);aI.from=Math.max(aI.from,aI.axis.min);aI.to=Math.min(aI.to,aI.axis.max);if(aC.from==aC.to&&aI.from==aI.to){continue}aC.from=aC.axis.p2c(aC.from);aC.to=aC.axis.p2c(aC.to);aI.from=aI.axis.p2c(aI.from);aI.to=aI.axis.p2c(aI.to);if(aC.from==aC.to||aI.from==aI.to){H.beginPath();H.strokeStyle=aD.color||O.grid.markingsColor;H.lineWidth=aD.lineWidth||O.grid.markingsLineWidth;H.moveTo(aC.from,aI.from);H.lineTo(aC.to,aI.to);H.stroke()}else{H.fillStyle=aD.color||O.grid.markingsColor;H.fillRect(aC.from,aI.to,aC.to-aC.from,aI.from-aI.to)}}}var aK=m(),aM=O.grid.borderWidth;for(var aE=0;aE<aK.length;++aE){var aB=aK[aE],aG=aB.box,aQ=aB.tickLength,aN,aL,aP,aJ;if(!aB.show||aB.ticks.length==0){continue}H.strokeStyle=aB.options.tickColor||c.color.parse(aB.options.color).scale("a",0.22).toString();H.lineWidth=1;if(aB.direction=="x"){aN=0;if(aQ=="full"){aL=(aB.position=="top"?0:w)}else{aL=aG.top-q.top+(aB.position=="top"?aG.height:0)}}else{aL=0;if(aQ=="full"){aN=(aB.position=="left"?0:h)}else{aN=aG.left-q.left+(aB.position=="left"?aG.width:0)}}if(!aB.innermost){H.beginPath();aP=aJ=0;if(aB.direction=="x"){aP=h}else{aJ=w}if(H.lineWidth==1){aN=Math.floor(aN)+0.5;aL=Math.floor(aL)+0.5}H.moveTo(aN,aL);H.lineTo(aN+aP,aL+aJ);H.stroke()}H.beginPath();for(aF=0;aF<aB.ticks.length;++aF){var aO=aB.ticks[aF].v;aP=aJ=0;if(aO<aB.min||aO>aB.max||(aQ=="full"&&aM>0&&(aO==aB.min||aO==aB.max))){continue}if(aB.direction=="x"){aN=aB.p2c(aO);aJ=aQ=="full"?-w:aQ;if(aB.position=="top"){aJ=-aJ}}else{aL=aB.p2c(aO);aP=aQ=="full"?-h:aQ;if(aB.position=="left"){aP=-aP}}if(H.lineWidth==1){if(aB.direction=="x"){aN=Math.floor(aN)+0.5}else{aL=Math.floor(aL)+0.5}}H.moveTo(aN,aL);H.lineTo(aN+aP,aL+aJ)}H.stroke()}if(aM){H.lineWidth=aM;H.strokeStyle=O.grid.borderColor;H.strokeRect(-aM/2,-aM/2,h+aM,w+aM)}H.restore()}function k(){av.find(".tickLabels").remove();var aG=['<div class="tickLabels" style="font-size:smaller">'];var aJ=m();for(var aD=0;aD<aJ.length;++aD){var aC=aJ[aD],aF=aC.box;if(!aC.show){continue}aG.push('<div class="'+aC.direction+"Axis "+aC.direction+aC.n+'Axis" style="color:'+aC.options.color+'">');for(var aE=0;aE<aC.ticks.length;++aE){var aH=aC.ticks[aE];if(!aH.label||aH.v<aC.min||aH.v>aC.max){continue}var aK={},aI;if(aC.direction=="x"){aI="center";aK.left=Math.round(q.left+aC.p2c(aH.v)-aC.labelWidth/2);if(aC.position=="bottom"){aK.top=aF.top+aF.padding}else{aK.bottom=I-(aF.top+aF.height-aF.padding)}}else{aK.top=Math.round(q.top+aC.p2c(aH.v)-aC.labelHeight/2);if(aC.position=="left"){aK.right=G-(aF.left+aF.width-aF.padding);aI="right"}else{aK.left=aF.left+aF.padding;aI="left"}}aK.width=aC.labelWidth;var aB=["position:absolute","text-align:"+aI];for(var aL in aK){aB.push(aL+":"+aK[aL]+"px")}aG.push('<div class="tickLabel" style="'+aB.join(";")+'">'+aH.label+"</div>")}aG.push("</div>")}aG.push("</div>");av.append(aG.join(""))}function d(aB){if(aB.lines.show){at(aB)}if(aB.bars.show){e(aB)}if(aB.points.show){ao(aB)}}function at(aE){function aD(aP,aQ,aI,aU,aT){var aV=aP.points,aJ=aP.pointsize,aN=null,aM=null;H.beginPath();for(var aO=aJ;aO<aV.length;aO+=aJ){var aL=aV[aO-aJ],aS=aV[aO-aJ+1],aK=aV[aO],aR=aV[aO+1];if(aL==null||aK==null){continue}if(aS<=aR&&aS<aT.min){if(aR<aT.min){continue}aL=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.min}else{if(aR<=aS&&aR<aT.min){if(aS<aT.min){continue}aK=(aT.min-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.min}}if(aS>=aR&&aS>aT.max){if(aR>aT.max){continue}aL=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aS=aT.max}else{if(aR>=aS&&aR>aT.max){if(aS>aT.max){continue}aK=(aT.max-aS)/(aR-aS)*(aK-aL)+aL;aR=aT.max}}if(aL<=aK&&aL<aU.min){if(aK<aU.min){continue}aS=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.min}else{if(aK<=aL&&aK<aU.min){if(aL<aU.min){continue}aR=(aU.min-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.min}}if(aL>=aK&&aL>aU.max){if(aK>aU.max){continue}aS=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aL=aU.max}else{if(aK>=aL&&aK>aU.max){if(aL>aU.max){continue}aR=(aU.max-aL)/(aK-aL)*(aR-aS)+aS;aK=aU.max}}if(aL!=aN||aS!=aM){H.moveTo(aU.p2c(aL)+aQ,aT.p2c(aS)+aI)}aN=aK;aM=aR;H.lineTo(aU.p2c(aK)+aQ,aT.p2c(aR)+aI)}H.stroke()}function aF(aI,aQ,aP){var aW=aI.points,aV=aI.pointsize,aN=Math.min(Math.max(0,aP.min),aP.max),aX=0,aU,aT=false,aM=1,aL=0,aR=0;while(true){if(aV>0&&aX>aW.length+aV){break}aX+=aV;var aZ=aW[aX-aV],aK=aW[aX-aV+aM],aY=aW[aX],aJ=aW[aX+aM];if(aT){if(aV>0&&aZ!=null&&aY==null){aR=aX;aV=-aV;aM=2;continue}if(aV<0&&aX==aL+aV){H.fill();aT=false;aV=-aV;aM=1;aX=aL=aR+aV;continue}}if(aZ==null||aY==null){continue}if(aZ<=aY&&aZ<aQ.min){if(aY<aQ.min){continue}aK=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.min}else{if(aY<=aZ&&aY<aQ.min){if(aZ<aQ.min){continue}aJ=(aQ.min-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.min}}if(aZ>=aY&&aZ>aQ.max){if(aY>aQ.max){continue}aK=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aZ=aQ.max}else{if(aY>=aZ&&aY>aQ.max){if(aZ>aQ.max){continue}aJ=(aQ.max-aZ)/(aY-aZ)*(aJ-aK)+aK;aY=aQ.max}}if(!aT){H.beginPath();H.moveTo(aQ.p2c(aZ),aP.p2c(aN));aT=true}if(aK>=aP.max&&aJ>=aP.max){H.lineTo(aQ.p2c(aZ),aP.p2c(aP.max));H.lineTo(aQ.p2c(aY),aP.p2c(aP.max));continue}else{if(aK<=aP.min&&aJ<=aP.min){H.lineTo(aQ.p2c(aZ),aP.p2c(aP.min));H.lineTo(aQ.p2c(aY),aP.p2c(aP.min));continue}}var aO=aZ,aS=aY;if(aK<=aJ&&aK<aP.min&&aJ>=aP.min){aZ=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.min}else{if(aJ<=aK&&aJ<aP.min&&aK>=aP.min){aY=(aP.min-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.min}}if(aK>=aJ&&aK>aP.max&&aJ<=aP.max){aZ=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aK=aP.max}else{if(aJ>=aK&&aJ>aP.max&&aK<=aP.max){aY=(aP.max-aK)/(aJ-aK)*(aY-aZ)+aZ;aJ=aP.max}}if(aZ!=aO){H.lineTo(aQ.p2c(aO),aP.p2c(aK))}H.lineTo(aQ.p2c(aZ),aP.p2c(aK));H.lineTo(aQ.p2c(aY),aP.p2c(aJ));if(aY!=aS){H.lineTo(aQ.p2c(aY),aP.p2c(aJ));H.lineTo(aQ.p2c(aS),aP.p2c(aJ))}}}H.save();H.translate(q.left,q.top);H.lineJoin="round";var aG=aE.lines.lineWidth,aB=aE.shadowSize;if(aG>0&&aB>0){H.lineWidth=aB;H.strokeStyle="rgba(0,0,0,0.1)";var aH=Math.PI/18;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/2),Math.cos(aH)*(aG/2+aB/2),aE.xaxis,aE.yaxis);H.lineWidth=aB/2;aD(aE.datapoints,Math.sin(aH)*(aG/2+aB/4),Math.cos(aH)*(aG/2+aB/4),aE.xaxis,aE.yaxis)}H.lineWidth=aG;H.strokeStyle=aE.color;var aC=ae(aE.lines,aE.color,0,w);if(aC){H.fillStyle=aC;aF(aE.datapoints,aE.xaxis,aE.yaxis)}if(aG>0){aD(aE.datapoints,0,0,aE.xaxis,aE.yaxis)}H.restore()}function ao(aE){function aH(aN,aM,aU,aK,aS,aT,aQ,aJ){var aR=aN.points,aI=aN.pointsize;for(var aL=0;aL<aR.length;aL+=aI){var aP=aR[aL],aO=aR[aL+1];if(aP==null||aP<aT.min||aP>aT.max||aO<aQ.min||aO>aQ.max){continue}H.beginPath();aP=aT.p2c(aP);aO=aQ.p2c(aO)+aK;if(aJ=="circle"){H.arc(aP,aO,aM,0,aS?Math.PI:Math.PI*2,false)}else{aJ(H,aP,aO,aM,aS)}H.closePath();if(aU){H.fillStyle=aU;H.fill()}H.stroke()}}H.save();H.translate(q.left,q.top);var aG=aE.points.lineWidth,aC=aE.shadowSize,aB=aE.points.radius,aF=aE.points.symbol;if(aG>0&&aC>0){var aD=aC/2;H.lineWidth=aD;H.strokeStyle="rgba(0,0,0,0.1)";aH(aE.datapoints,aB,null,aD+aD/2,true,aE.xaxis,aE.yaxis,aF);H.strokeStyle="rgba(0,0,0,0.2)";aH(aE.datapoints,aB,null,aD/2,true,aE.xaxis,aE.yaxis,aF)}H.lineWidth=aG;H.strokeStyle=aE.color;aH(aE.datapoints,aB,ae(aE.points,aE.color),0,false,aE.xaxis,aE.yaxis,aF);H.restore()}function E(aN,aM,aV,aI,aQ,aF,aD,aL,aK,aU,aR,aC){var aE,aT,aJ,aP,aG,aB,aO,aH,aS;if(aR){aH=aB=aO=true;aG=false;aE=aV;aT=aN;aP=aM+aI;aJ=aM+aQ;if(aT<aE){aS=aT;aT=aE;aE=aS;aG=true;aB=false}}else{aG=aB=aO=true;aH=false;aE=aN+aI;aT=aN+aQ;aJ=aV;aP=aM;if(aP<aJ){aS=aP;aP=aJ;aJ=aS;aH=true;aO=false}}if(aT<aL.min||aE>aL.max||aP<aK.min||aJ>aK.max){return}if(aE<aL.min){aE=aL.min;aG=false}if(aT>aL.max){aT=aL.max;aB=false}if(aJ<aK.min){aJ=aK.min;aH=false}if(aP>aK.max){aP=aK.max;aO=false}aE=aL.p2c(aE);aJ=aK.p2c(aJ);aT=aL.p2c(aT);aP=aK.p2c(aP);if(aD){aU.beginPath();aU.moveTo(aE,aJ);aU.lineTo(aE,aP);aU.lineTo(aT,aP);aU.lineTo(aT,aJ);aU.fillStyle=aD(aJ,aP);aU.fill()}if(aC>0&&(aG||aB||aO||aH)){aU.beginPath();aU.moveTo(aE,aJ+aF);if(aG){aU.lineTo(aE,aP+aF)}else{aU.moveTo(aE,aP+aF)}if(aO){aU.lineTo(aT,aP+aF)}else{aU.moveTo(aT,aP+aF)}if(aB){aU.lineTo(aT,aJ+aF)}else{aU.moveTo(aT,aJ+aF)}if(aH){aU.lineTo(aE,aJ+aF)}else{aU.moveTo(aE,aJ+aF)}aU.stroke()}}function e(aD){function aC(aJ,aI,aL,aG,aK,aN,aM){var aO=aJ.points,aF=aJ.pointsize;for(var aH=0;aH<aO.length;aH+=aF){if(aO[aH]==null){continue}E(aO[aH],aO[aH+1],aO[aH+2],aI,aL,aG,aK,aN,aM,H,aD.bars.horizontal,aD.bars.lineWidth)}}H.save();H.translate(q.left,q.top);H.lineWidth=aD.bars.lineWidth;H.strokeStyle=aD.color;var aB=aD.bars.align=="left"?0:-aD.bars.barWidth/2;var aE=aD.bars.fill?function(aF,aG){return ae(aD.bars,aD.color,aF,aG)}:null;aC(aD.datapoints,aB,aB+aD.bars.barWidth,0,aE,aD.xaxis,aD.yaxis);H.restore()}function ae(aD,aB,aC,aF){var aE=aD.fill;if(!aE){return null}if(aD.fillColor){return am(aD.fillColor,aC,aF,aB)}var aG=c.color.parse(aB);aG.a=typeof aE=="number"?aE:0.4;aG.normalize();return aG.toString()}function o(){av.find(".legend").remove();if(!O.legend.show){return}var aH=[],aF=false,aN=O.legend.labelFormatter,aM,aJ;for(var aE=0;aE<Q.length;++aE){aM=Q[aE];aJ=aM.label;if(!aJ){continue}if(aE%O.legend.noColumns==0){if(aF){aH.push("</tr>")}aH.push("<tr>");aF=true}if(aN){aJ=aN(aJ,aM)}aH.push('<td class="legendColorBox"><div style="border:1px solid '+O.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aM.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aJ+"</td>")}if(aF){aH.push("</tr>")}if(aH.length==0){return}var aL='<table style="font-size:smaller;color:'+O.grid.color+'">'+aH.join("")+"</table>";if(O.legend.container!=null){c(O.legend.container).html(aL)}else{var aI="",aC=O.legend.position,aD=O.legend.margin;if(aD[0]==null){aD=[aD,aD]}if(aC.charAt(0)=="n"){aI+="top:"+(aD[1]+q.top)+"px;"}else{if(aC.charAt(0)=="s"){aI+="bottom:"+(aD[1]+q.bottom)+"px;"}}if(aC.charAt(1)=="e"){aI+="right:"+(aD[0]+q.right)+"px;"}else{if(aC.charAt(1)=="w"){aI+="left:"+(aD[0]+q.left)+"px;"}}var aK=c('<div class="legend">'+aL.replace('style="','style="position:absolute;'+aI+";")+"</div>").appendTo(av);if(O.legend.backgroundOpacity!=0){var aG=O.legend.backgroundColor;if(aG==null){aG=O.grid.backgroundColor;if(aG&&typeof aG=="string"){aG=c.color.parse(aG)}else{aG=c.color.extract(aK,"background-color")}aG.a=1;aG=aG.toString()}var aB=aK.children();c('<div style="position:absolute;width:'+aB.width()+"px;height:"+aB.height()+"px;"+aI+"background-color:"+aG+';"> </div>').prependTo(aK).css("opacity",O.legend.backgroundOpacity)}}}var ab=[],M=null;function K(aI,aG,aD){var aO=O.grid.mouseActiveRadius,a0=aO*aO+1,aY=null,aR=false,aW,aU;for(aW=Q.length-1;aW>=0;--aW){if(!aD(Q[aW])){continue}var aP=Q[aW],aH=aP.xaxis,aF=aP.yaxis,aV=aP.datapoints.points,aT=aP.datapoints.pointsize,aQ=aH.c2p(aI),aN=aF.c2p(aG),aC=aO/aH.scale,aB=aO/aF.scale;if(aH.options.inverseTransform){aC=Number.MAX_VALUE}if(aF.options.inverseTransform){aB=Number.MAX_VALUE}if(aP.lines.show||aP.points.show){for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1];if(aK==null){continue}if(aK-aQ>aC||aK-aQ<-aC||aJ-aN>aB||aJ-aN<-aB){continue}var aM=Math.abs(aH.p2c(aK)-aI),aL=Math.abs(aF.p2c(aJ)-aG),aS=aM*aM+aL*aL;if(aS<a0){a0=aS;aY=[aW,aU/aT]}}}if(aP.bars.show&&!aY){var aE=aP.bars.align=="left"?0:-aP.bars.barWidth/2,aX=aE+aP.bars.barWidth;for(aU=0;aU<aV.length;aU+=aT){var aK=aV[aU],aJ=aV[aU+1],aZ=aV[aU+2];if(aK==null){continue}if(Q[aW].bars.horizontal?(aQ<=Math.max(aZ,aK)&&aQ>=Math.min(aZ,aK)&&aN>=aJ+aE&&aN<=aJ+aX):(aQ>=aK+aE&&aQ<=aK+aX&&aN>=Math.min(aZ,aJ)&&aN<=Math.max(aZ,aJ))){aY=[aW,aU/aT]}}}}if(aY){aW=aY[0];aU=aY[1];aT=Q[aW].datapoints.pointsize;return{datapoint:Q[aW].datapoints.points.slice(aU*aT,(aU+1)*aT),dataIndex:aU,series:Q[aW],seriesIndex:aW}}return null}function aa(aB){if(O.grid.hoverable){u("plothover",aB,function(aC){return aC.hoverable!=false})}}function l(aB){if(O.grid.hoverable){u("plothover",aB,function(aC){return false})}}function R(aB){u("plotclick",aB,function(aC){return aC.clickable!=false})}function u(aC,aB,aD){var aE=y.offset(),aH=aB.pageX-aE.left-q.left,aF=aB.pageY-aE.top-q.top,aJ=C({left:aH,top:aF});aJ.pageX=aB.pageX;aJ.pageY=aB.pageY;var aK=K(aH,aF,aD);if(aK){aK.pageX=parseInt(aK.series.xaxis.p2c(aK.datapoint[0])+aE.left+q.left);aK.pageY=parseInt(aK.series.yaxis.p2c(aK.datapoint[1])+aE.top+q.top)}if(O.grid.autoHighlight){for(var aG=0;aG<ab.length;++aG){var aI=ab[aG];if(aI.auto==aC&&!(aK&&aI.series==aK.series&&aI.point[0]==aK.datapoint[0]&&aI.point[1]==aK.datapoint[1])){T(aI.series,aI.point)}}if(aK){x(aK.series,aK.datapoint,aC)}}av.trigger(aC,[aJ,aK])}function f(){if(!M){M=setTimeout(s,30)}}function s(){M=null;A.save();A.clearRect(0,0,G,I);A.translate(q.left,q.top);var aC,aB;for(aC=0;aC<ab.length;++aC){aB=ab[aC];if(aB.series.bars.show){v(aB.series,aB.point)}else{ay(aB.series,aB.point)}}A.restore();an(ak.drawOverlay,[A])}function x(aD,aB,aF){if(typeof aD=="number"){aD=Q[aD]}if(typeof aB=="number"){var aE=aD.datapoints.pointsize;aB=aD.datapoints.points.slice(aE*aB,aE*(aB+1))}var aC=al(aD,aB);if(aC==-1){ab.push({series:aD,point:aB,auto:aF});f()}else{if(!aF){ab[aC].auto=false}}}function T(aD,aB){if(aD==null&&aB==null){ab=[];f()}if(typeof aD=="number"){aD=Q[aD]}if(typeof aB=="number"){aB=aD.data[aB]}var aC=al(aD,aB);if(aC!=-1){ab.splice(aC,1);f()}}function al(aD,aE){for(var aB=0;aB<ab.length;++aB){var aC=ab[aB];if(aC.series==aD&&aC.point[0]==aE[0]&&aC.point[1]==aE[1]){return aB}}return -1}function ay(aE,aD){var aC=aD[0],aI=aD[1],aH=aE.xaxis,aG=aE.yaxis;if(aC<aH.min||aC>aH.max||aI<aG.min||aI>aG.max){return}var aF=aE.points.radius+aE.points.lineWidth/2;A.lineWidth=aF;A.strokeStyle=c.color.parse(aE.color).scale("a",0.5).toString();var aB=1.5*aF,aC=aH.p2c(aC),aI=aG.p2c(aI);A.beginPath();if(aE.points.symbol=="circle"){A.arc(aC,aI,aB,0,2*Math.PI,false)}else{aE.points.symbol(A,aC,aI,aB,false)}A.closePath();A.stroke()}function v(aE,aB){A.lineWidth=aE.bars.lineWidth;A.strokeStyle=c.color.parse(aE.color).scale("a",0.5).toString();var aD=c.color.parse(aE.color).scale("a",0.5).toString();var aC=aE.bars.align=="left"?0:-aE.bars.barWidth/2;E(aB[0],aB[1],aB[2]||0,aC,aC+aE.bars.barWidth,0,function(){return aD},aE.xaxis,aE.yaxis,A,aE.bars.horizontal,aE.bars.lineWidth)}function am(aJ,aB,aH,aC){if(typeof aJ=="string"){return aJ}else{var aI=H.createLinearGradient(0,aH,0,aB);for(var aE=0,aD=aJ.colors.length;aE<aD;++aE){var aF=aJ.colors[aE];if(typeof aF!="string"){var aG=c.color.parse(aC);if(aF.brightness!=null){aG=aG.scale("rgb",aF.brightness)}if(aF.opacity!=null){aG.a*=aF.opacity}aF=aG.toString()}aI.addColorStop(aE/(aD-1),aF)}return aI}}}c.plot=function(g,e,d){var f=new b(c(g),e,d,c.plot.plugins);return f};c.plot.version="0.7";c.plot.plugins=[];c.plot.formatDate=function(l,f,h){var o=function(d){d=""+d;return d.length==1?"0"+d:d};var e=[];var p=false,j=false;var n=l.getUTCHours();var k=n<12;if(h==null){h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(n>12){n=n-12}else{if(n==0){n=12}}}for(var g=0;g<f.length;++g){var m=f.charAt(g);if(p){switch(m){case"h":m=""+n;break;case"H":m=o(n);break;case"M":m=o(l.getUTCMinutes());break;case"S":m=o(l.getUTCSeconds());break;case"d":m=""+l.getUTCDate();break;case"m":m=""+(l.getUTCMonth()+1);break;case"y":m=""+l.getUTCFullYear();break;case"b":m=""+h[l.getUTCMonth()];break;case"p":m=(k)?("am"):("pm");break;case"P":m=(k)?("AM"):("PM");break;case"0":m="";j=true;break}if(m&&j){m=o(m);j=false}e.push(m);if(!j){p=false}}else{if(m=="%"){p=true}else{e.push(m)}}}return e.join("")};function a(e,d){return d*Math.floor(e/d)}})(jQuery);

/* Flot - Stack */
/*
Flot plugin for stacking data sets, i.e. putting them on top of each
other, for accumulative graphs.

The plugin assumes the data is sorted on x (or y if stacking
horizontally). For line charts, it is assumed that if a line has an
undefined gap (from a null point), then the line above it should have
the same gap - insert zeros instead of "null" if you want another
behaviour. This also holds for the start and end of the chart. Note
that stacking a mix of positive and negative values in most instances
doesn't make sense (so it looks weird).

Two or more series are stacked when their "stack" attribute is set to
the same key (which can be any number or string or just "true"). To
specify the default stack, you can set

  series: {
    stack: null or true or key (number/string)
  }

or specify it for a specific series

  $.plot($("#placeholder"), [{ data: [ ... ], stack: true }])

The stacking order is determined by the order of the data series in
the array (later series end up on top of the previous).

Internally, the plugin modifies the datapoints in each series, adding
an offset to the y value. For line series, extra data points are
inserted through interpolation. If there's a second y value, it's also
adjusted (e.g for bar charts or filled areas).
*/

(function ($) {
    var options = {
        series: { stack: null } // or number/string
    };

    function init(plot) {
        function findMatchingSeries(s, allseries) {
            var res = null
            for (var i = 0; i < allseries.length; ++i) {
                if (s == allseries[i])
                    break;

                if (allseries[i].stack == s.stack)
                    res = allseries[i];
            }

            return res;
        }

        function stackData(plot, s, datapoints) {
            if (s.stack == null)
                return;

            var other = findMatchingSeries(s, plot.getData());
            if (!other)
                return;

            var ps = datapoints.pointsize,
                points = datapoints.points,
                otherps = other.datapoints.pointsize,
                otherpoints = other.datapoints.points,
                newpoints = [],
                px, py, intery, qx, qy, bottom,
                withlines = s.lines.show,
                horizontal = s.bars.horizontal,
                withbottom = ps > 2 && (horizontal ? datapoints.format[2].x : datapoints.format[2].y),
                withsteps = withlines && s.lines.steps,
                fromgap = true,
                keyOffset = horizontal ? 1 : 0,
                accumulateOffset = horizontal ? 0 : 1,
                i = 0, j = 0, l;

            while (true) {
                if (i >= points.length)
                    break;

                l = newpoints.length;

                if (points[i] == null) {
                    // copy gaps
                    for (m = 0; m < ps; ++m)
                        newpoints.push(points[i + m]);
                    i += ps;
                }
                else if (j >= otherpoints.length) {
                    // for lines, we can't use the rest of the points
                    if (!withlines) {
                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);
                    }
                    i += ps;
                }
                else if (otherpoints[j] == null) {
                    // oops, got a gap
                    for (m = 0; m < ps; ++m)
                        newpoints.push(null);
                    fromgap = true;
                    j += otherps;
                }
                else {
                    // cases where we actually got two points
                    px = points[i + keyOffset];
                    py = points[i + accumulateOffset];
                    qx = otherpoints[j + keyOffset];
                    qy = otherpoints[j + accumulateOffset];
                    bottom = 0;

                    if (px == qx) {
                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);

                        newpoints[l + accumulateOffset] += qy;
                        bottom = qy;

                        i += ps;
                        j += otherps;
                    }
                    else if (px > qx) {
                        // we got past point below, might need to
                        // insert interpolated extra point
                        if (withlines && i > 0 && points[i - ps] != null) {
                            intery = py + (points[i - ps + accumulateOffset] - py) * (qx - px) / (points[i - ps + keyOffset] - px);
                            newpoints.push(qx);
                            newpoints.push(intery + qy);
                            for (m = 2; m < ps; ++m)
                                newpoints.push(points[i + m]);
                            bottom = qy;
                        }

                        j += otherps;
                    }
                    else { // px < qx
                        if (fromgap && withlines) {
                            // if we come from a gap, we just skip this point
                            i += ps;
                            continue;
                        }

                        for (m = 0; m < ps; ++m)
                            newpoints.push(points[i + m]);

                        // we might be able to interpolate a point below,
                        // this can give us a better y
                        if (withlines && j > 0 && otherpoints[j - otherps] != null)
                            bottom = qy + (otherpoints[j - otherps + accumulateOffset] - qy) * (px - qx) / (otherpoints[j - otherps + keyOffset] - qx);

                        newpoints[l + accumulateOffset] += bottom;

                        i += ps;
                    }

                    fromgap = false;

                    if (l != newpoints.length && withbottom)
                        newpoints[l + 2] += bottom;
                }

                // maintain the line steps invariant
                if (withsteps && l != newpoints.length && l > 0
                    && newpoints[l] != null
                    && newpoints[l] != newpoints[l - ps]
                    && newpoints[l + 1] != newpoints[l - ps + 1]) {
                    for (m = 0; m < ps; ++m)
                        newpoints[l + ps + m] = newpoints[l + m];
                    newpoints[l + 1] = newpoints[l - ps + 1];
                }
            }

            datapoints.points = newpoints;
        }

        plot.hooks.processDatapoints.push(stackData);
    }

    $.plot.plugins.push({
        init: init,
        options: options,
        name: 'stack',
        version: '1.2'
    });
})(jQuery);

/* Flot - Pie */
;(function($){function init(plot){var canvas=null;var target=null;var maxRadius=null;var centerLeft=null;var centerTop=null;var total=0;var redraw=true;var redrawAttempts=10;var shrink=0.95;var legendWidth=0;var processed=false;var raw=false;var highlights=[];plot.hooks.processOptions.push(checkPieEnabled);plot.hooks.bindEvents.push(bindEvents);function checkPieEnabled(plot,options){if(options.series.pie.show){options.grid.show=false;if(options.series.pie.label.show=='auto')if(options.legend.show)options.series.pie.label.show=false;else options.series.pie.label.show=true;if(options.series.pie.radius=='auto')if(options.series.pie.label.show)options.series.pie.radius=3/4;else options.series.pie.radius=1;if(options.series.pie.tilt>1)options.series.pie.tilt=1;if(options.series.pie.tilt<0)options.series.pie.tilt=0;plot.hooks.processDatapoints.push(processDatapoints);plot.hooks.drawOverlay.push(drawOverlay);plot.hooks.draw.push(draw)}}function bindEvents(plot,eventHolder){var options=plot.getOptions();if(options.series.pie.show&&options.grid.hoverable)eventHolder.unbind('mousemove').mousemove(onMouseMove);if(options.series.pie.show&&options.grid.clickable)eventHolder.unbind('click').click(onClick)}function alertObject(obj){var msg='';function traverse(obj,depth){if(!depth)depth=0;for(var i=0;i<obj.length;++i){for(var j=0;j<depth;j++)msg+='\t';if(typeof obj[i]=="object"){msg+=''+i+':\n';traverse(obj[i],depth+1)}else{msg+=''+i+': '+obj[i]+'\n'}}}traverse(obj);alert(msg)}function calcTotal(data){for(var i=0;i<data.length;++i){var item=parseFloat(data[i].data[0][1]);if(item)total+=item}}function processDatapoints(plot,series,data,datapoints){if(!processed){processed=true;canvas=plot.getCanvas();target=$(canvas).parent();options=plot.getOptions();plot.setData(combine(plot.getData()))}}function setupPie(){legendWidth=target.children().filter('.legend').children().width();maxRadius=Math.min(canvas.width,(canvas.height/options.series.pie.tilt))/2;centerTop=(canvas.height/2)+options.series.pie.offset.top;centerLeft=(canvas.width/2);if(options.series.pie.offset.left=='auto')if(options.legend.position.match('w'))centerLeft+=legendWidth/2;else centerLeft-=legendWidth/2;else centerLeft+=options.series.pie.offset.left;if(centerLeft<maxRadius)centerLeft=maxRadius;else if(centerLeft>canvas.width-maxRadius)centerLeft=canvas.width-maxRadius}function fixData(data){for(var i=0;i<data.length;++i){if(typeof(data[i].data)=='number')data[i].data=[[1,data[i].data]];else if(typeof(data[i].data)=='undefined'||typeof(data[i].data[0])=='undefined'){if(typeof(data[i].data)!='undefined'&&typeof(data[i].data.label)!='undefined')data[i].label=data[i].data.label;data[i].data=[[1,0]]}}return data}function combine(data){data=fixData(data);calcTotal(data);var combined=0;var numCombined=0;var color=options.series.pie.combine.color;var newdata=[];for(var i=0;i<data.length;++i){data[i].data[0][1]=parseFloat(data[i].data[0][1]);if(!data[i].data[0][1])data[i].data[0][1]=0;if(data[i].data[0][1]/total<=options.series.pie.combine.threshold){combined+=data[i].data[0][1];numCombined++;if(!color)color=data[i].color}else{newdata.push({data:[[1,data[i].data[0][1]]],color:data[i].color,label:data[i].label,angle:(data[i].data[0][1]*(Math.PI*2))/total,percent:(data[i].data[0][1]/total*100)})}}if(numCombined>0)newdata.push({data:[[1,combined]],color:color,label:options.series.pie.combine.label,angle:(combined*(Math.PI*2))/total,percent:(combined/total*100)});return newdata}function draw(plot,newCtx){if(!target)return;ctx=newCtx;setupPie();var slices=plot.getData();var attempts=0;while(redraw&&attempts<redrawAttempts){redraw=false;if(attempts>0)maxRadius*=shrink;attempts+=1;clear();if(options.series.pie.tilt<=0.8)drawShadow();drawPie()}if(attempts>=redrawAttempts){clear();target.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>')}if(plot.setSeries&&plot.insertLegend){plot.setSeries(slices);plot.insertLegend()}function clear(){ctx.clearRect(0,0,canvas.width,canvas.height);target.children().filter('.pieLabel, .pieLabelBackground').remove()}function drawShadow(){var shadowLeft=5;var shadowTop=15;var edge=10;var alpha=0.02;if(options.series.pie.radius>1)var radius=options.series.pie.radius;else var radius=maxRadius*options.series.pie.radius;if(radius>=(canvas.width/2)-shadowLeft||radius*options.series.pie.tilt>=(canvas.height/2)-shadowTop||radius<=edge)return;ctx.save();ctx.translate(shadowLeft,shadowTop);ctx.globalAlpha=alpha;ctx.fillStyle='#000';ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);for(var i=1;i<=edge;i++){ctx.beginPath();ctx.arc(0,0,radius,0,Math.PI*2,false);ctx.fill();radius-=i}ctx.restore()}function drawPie(){startAngle=Math.PI*options.series.pie.startAngle;if(options.series.pie.radius>1)var radius=options.series.pie.radius;else var radius=maxRadius*options.series.pie.radius;ctx.save();ctx.translate(centerLeft,centerTop);ctx.scale(1,options.series.pie.tilt);ctx.save();var currentAngle=startAngle;for(var i=0;i<slices.length;++i){slices[i].startAngle=currentAngle;drawSlice(slices[i].angle,slices[i].color,true)}ctx.restore();ctx.save();ctx.lineWidth=options.series.pie.stroke.width;currentAngle=startAngle;for(var i=0;i<slices.length;++i)drawSlice(slices[i].angle,options.series.pie.stroke.color,false);ctx.restore();drawDonutHole(ctx);if(options.series.pie.label.show)drawLabels();ctx.restore();function drawSlice(angle,color,fill){if(angle<=0)return;if(fill)ctx.fillStyle=color;else{ctx.strokeStyle=color;ctx.lineJoin='round'}ctx.beginPath();if(Math.abs(angle-Math.PI*2)>0.000000001)ctx.moveTo(0,0);else if($.browser.msie)angle-=0.0001;ctx.arc(0,0,radius,currentAngle,currentAngle+angle,false);ctx.closePath();currentAngle+=angle;if(fill)ctx.fill();else ctx.stroke()}function drawLabels(){var currentAngle=startAngle;if(options.series.pie.label.radius>1)var radius=options.series.pie.label.radius;else var radius=maxRadius*options.series.pie.label.radius;for(var i=0;i<slices.length;++i){if(slices[i].percent>=options.series.pie.label.threshold*100)drawLabel(slices[i],currentAngle,i);currentAngle+=slices[i].angle}function drawLabel(slice,startAngle,index){if(slice.data[0][1]==0)return;var lf=options.legend.labelFormatter,text,plf=options.series.pie.label.formatter;if(lf)text=lf(slice.label,slice);else text=slice.label;if(plf)text=plf(text,slice);var halfAngle=((startAngle+slice.angle)+startAngle)/2;var x=centerLeft+Math.round(Math.cos(halfAngle)*radius);var y=centerTop+Math.round(Math.sin(halfAngle)*radius)*options.series.pie.tilt;var html='<span class="pieLabel" id="pieLabel'+index+'" style="position:absolute;top:'+y+'px;left:'+x+'px;">'+text+"</span>";target.append(html);var label=target.children('#pieLabel'+index);var labelTop=(y-label.height()/2);var labelLeft=(x-label.width()/2);label.css('top',labelTop);label.css('left',labelLeft);if(0-labelTop>0||0-labelLeft>0||canvas.height-(labelTop+label.height())<0||canvas.width-(labelLeft+label.width())<0)redraw=true;if(options.series.pie.label.background.opacity!=0){var c=options.series.pie.label.background.color;if(c==null){c=slice.color}var pos='top:'+labelTop+'px;left:'+labelLeft+'px;';$('<div class="pieLabelBackground" style="position:absolute;width:'+label.width()+'px;height:'+label.height()+'px;'+pos+'background-color:'+c+';"> </div>').insertBefore(label).css('opacity',options.series.pie.label.background.opacity)}}}}}function drawDonutHole(layer){if(options.series.pie.innerRadius>0){layer.save();innerRadius=options.series.pie.innerRadius>1?options.series.pie.innerRadius:maxRadius*options.series.pie.innerRadius;layer.globalCompositeOperation='destination-out';layer.beginPath();layer.fillStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.fill();layer.closePath();layer.restore();layer.save();layer.beginPath();layer.strokeStyle=options.series.pie.stroke.color;layer.arc(0,0,innerRadius,0,Math.PI*2,false);layer.stroke();layer.closePath();layer.restore()}}function isPointInPoly(poly,pt){for(var c=false,i=-1,l=poly.length,j=l-1;++i<l;j=i)((poly[i][1]<=pt[1]&&pt[1]<poly[j][1])||(poly[j][1]<=pt[1]&&pt[1]<poly[i][1]))&&(pt[0]<(poly[j][0]-poly[i][0])*(pt[1]-poly[i][1])/(poly[j][1]-poly[i][1])+poly[i][0])&&(c=!c);return c}function findNearbySlice(mouseX,mouseY){var slices=plot.getData(),options=plot.getOptions(),radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;for(var i=0;i<slices.length;++i){var s=slices[i];if(s.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,s.startAngle,s.startAngle+s.angle,false);ctx.closePath();x=mouseX-centerLeft;y=mouseY-centerTop;if(ctx.isPointInPath){if(ctx.isPointInPath(mouseX-centerLeft,mouseY-centerTop)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}else{p1X=(radius*Math.cos(s.startAngle));p1Y=(radius*Math.sin(s.startAngle));p2X=(radius*Math.cos(s.startAngle+(s.angle/4)));p2Y=(radius*Math.sin(s.startAngle+(s.angle/4)));p3X=(radius*Math.cos(s.startAngle+(s.angle/2)));p3Y=(radius*Math.sin(s.startAngle+(s.angle/2)));p4X=(radius*Math.cos(s.startAngle+(s.angle/1.5)));p4Y=(radius*Math.sin(s.startAngle+(s.angle/1.5)));p5X=(radius*Math.cos(s.startAngle+s.angle));p5Y=(radius*Math.sin(s.startAngle+s.angle));arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];arrPoint=[x,y];if(isPointInPoly(arrPoly,arrPoint)){ctx.restore();return{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:i}}}ctx.restore()}}return null}function onMouseMove(e){triggerClickHoverEvent('plothover',e)}function onClick(e){triggerClickHoverEvent('plotclick',e)}function triggerClickHoverEvent(eventname,e){var offset=plot.offset(),canvasX=parseInt(e.pageX-offset.left),canvasY=parseInt(e.pageY-offset.top),item=findNearbySlice(canvasX,canvasY);if(options.grid.autoHighlight){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.auto==eventname&&!(item&&h.series==item.series))unhighlight(h.series)}}if(item)highlight(item.series,eventname);var pos={pageX:e.pageX,pageY:e.pageY};target.trigger(eventname,[pos,item])}function highlight(s,auto){if(typeof s=="number")s=series[s];var i=indexOfHighlight(s);if(i==-1){highlights.push({series:s,auto:auto});plot.triggerRedrawOverlay()}else if(!auto)highlights[i].auto=false}function unhighlight(s){if(s==null){highlights=[];plot.triggerRedrawOverlay()}if(typeof s=="number")s=series[s];var i=indexOfHighlight(s);if(i!=-1){highlights.splice(i,1);plot.triggerRedrawOverlay()}}function indexOfHighlight(s){for(var i=0;i<highlights.length;++i){var h=highlights[i];if(h.series==s)return i}return-1}function drawOverlay(plot,octx){var options=plot.getOptions();var radius=options.series.pie.radius>1?options.series.pie.radius:maxRadius*options.series.pie.radius;octx.save();octx.translate(centerLeft,centerTop);octx.scale(1,options.series.pie.tilt);for(i=0;i<highlights.length;++i)drawHighlight(highlights[i].series);drawDonutHole(octx);octx.restore();function drawHighlight(series){if(series.angle<0)return;octx.fillStyle="rgba(255, 255, 255, "+options.series.pie.highlight.opacity+")";octx.beginPath();if(Math.abs(series.angle-Math.PI*2)>0.000000001)octx.moveTo(0,0);octx.arc(0,0,radius,series.startAngle,series.startAngle+series.angle,false);octx.closePath();octx.fill()}}}var options={series:{pie:{show:false,radius:'auto',innerRadius:0,startAngle:3/2,tilt:1,offset:{top:0,left:'auto'},stroke:{color:'#FFF',width:1},label:{show:'auto',formatter:function(label,slice){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+slice.color+';">'+label+'<br/>'+Math.round(slice.percent)+'%</div>'},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:'Other'},highlight:{opacity:0.5}}}};$.plot.plugins.push({init:init,options:options,name:"pie",version:"1.0"})})(jQuery);

/* Highstock - Custom */
;(function(){var doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=mathPI*2/360,userAgent=navigator.userAgent,isIE=/msie/i.test(userAgent)&&!win.opera,docMode8=doc.documentMode===8,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),hasSVG=!!doc.createElementNS&&!!doc.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,SVG_NS='http://www.w3.org/2000/svg',Renderer,hasTouch=doc.documentElement.ontouchstart!==undefined,symbolSizes={},idCounter=0,timeFactor=1,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,UNDEFINED,DIV='div',ABSOLUTE='absolute',RELATIVE='relative',HIDDEN='hidden',PREFIX='highcharts-',VISIBLE='visible',PX='px',NONE='none',M='M',L='L',TRACKER_FILL='rgba(192,192,192,'+(hasSVG?0.000001:0.002)+')',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',MILLISECOND='millisecond',SECOND='second',MINUTE='minute',HOUR='hour',DAY='day',WEEK='week',MONTH='month',YEAR='year',FILL='fill',LINEAR_GRADIENT='linearGradient',STOPS='stops',STROKE='stroke',STROKE_WIDTH='stroke-width',makeTime,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{},each=adapter.each,grep=adapter.grep,map=adapter.map,merge=adapter.merge,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,animate=adapter.animate,stop=adapter.stop,seriesTypes={},hoverChart;win.Highcharts={};function extend(a,b){var n;if(!a){a={}}for(n in b){a[n]=b[n]}return a}function hash(){var i=0,args=arguments,length=args.length,obj={};for(;i<length;i++){obj[args[i++]]=args[i]}return obj}function pInt(s,mag){return parseInt(s,mag||10)}function isString(s){return typeof s==='string'}function isObject(obj){return typeof obj==='object'}function isNumber(n){return typeof n==='number'}function log2lin(num){return math.log(num)/math.LN10}function lin2log(num){return math.pow(10,num)}function erase(arr,item){var i=arr.length;while(i--){if(arr[i]===item){arr.splice(i,1);break}}}function defined(obj){return obj!==UNDEFINED&&obj!==null}function attr(elem,prop,value){var key,setAttribute='setAttribute',ret;if(isString(prop)){if(defined(value)){elem[setAttribute](prop,value)}else if(elem&&elem.getAttribute){ret=elem.getAttribute(prop)}}else if(defined(prop)&&isObject(prop)){for(key in prop){elem[setAttribute](key,prop[key])}}return ret}function splat(obj){if(!obj||obj.constructor!==Array){obj=[obj]}return obj}function pick(){var args=arguments,i,arg,length=args.length;for(i=0;i<length;i++){arg=args[i];if(typeof arg!=='undefined'&&arg!==null){return arg}}}function css(el,styles){if(isIE){if(styles&&styles.opacity!==UNDEFINED){styles.filter='alpha(opacity='+(styles.opacity*100)+')'}}extend(el.style,styles)}function createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);if(attribs){extend(el,attribs)}if(nopad){css(el,{padding:0,border:NONE,margin:0})}if(styles){css(el,styles)}if(parent){parent.appendChild(el)}return el}function extendClass(parent,members){var object=function(){};object.prototype=new parent();extend(object.prototype,members);return object}function numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=number,c=isNaN(decimals=mathAbs(decimals))?2:decimals,d=decPoint===undefined?lang.decimalPoint:decPoint,t=thousandsSep===undefined?lang.thousandsSep:thousandsSep,s=n<0?"-":"",i=String(pInt(n=mathAbs(+n||0).toFixed(c))),j=i.length>3?i.length%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+mathAbs(n-i).toFixed(c).slice(2):"")}dateFormat=function(format,timestamp,capitalize){function pad(number,length){number=number.toString().replace(/^([0-9])$/,'0$1');if(length===3){number=number.toString().replace(/^([0-9]{2})$/,'0$1')}return number}if(!defined(timestamp)||isNaN(timestamp)){return'Invalid date'}format=pick(format,'%Y-%m-%d %H:%M:%S');var localOffset=(new Date()).getTimezoneOffset()*60000;var date=new Date((timestamp*timeFactor)-localOffset),key,hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,langMonths=lang.months,replacements={'a':langWeekdays[day].substr(0,3),'A':langWeekdays[day],'d':pad(dayOfMonth),'e':dayOfMonth,'b':langMonths[month].substr(0,3),'B':langMonths[month],'m':pad(month+1),'y':fullYear.toString().substr(2,2),'Y':fullYear,'H':pad(hours),'I':pad((hours%12)||12),'l':(hours%12)||12,'M':pad(date[getMinutes]()),'p':hours<12?'AM':'PM','P':hours<12?'am':'pm','S':pad(date.getSeconds()),'L':pad(timestamp%1000,3)};for(key in replacements){format=format.replace('%'+key,replacements[key])}return capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format};function getPosition(el){var p={left:el.offsetLeft,top:el.offsetTop};el=el.offsetParent;while(el){p.left+=el.offsetLeft;p.top+=el.offsetTop;if(el!==doc.body&&el!==doc.documentElement){p.left-=el.scrollLeft;p.top-=el.scrollTop}el=el.offsetParent}return p}function normalizeTickInterval(interval,multiples,magnitude,options){var normalized,i;magnitude=pick(magnitude,1);normalized=interval/magnitude;if(!multiples){multiples=[1,2,2.5,5,10];if(options&&options.allowDecimals===false){if(magnitude===1){multiples=[1,2,5,10]}else if(magnitude<=0.1){multiples=[1/magnitude]}}}for(i=0;i<multiples.length;i++){interval=multiples[i];if(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break}}interval*=magnitude;return interval}function getTimeTicks(tickInterval,min,max,startOfWeek,unitsOption){var tickPositions=[],i,useUTC=defaultOptions.global.useUTC,oneSecond=1000/timeFactor,oneMinute=60000/timeFactor,oneHour=3600000/timeFactor,oneDay=24*3600000/timeFactor,oneWeek=7*24*3600000/timeFactor,oneMonth=30*24*3600000/timeFactor,oneYear=31556952000/timeFactor,ranges=hash(MILLISECOND,1,SECOND,oneSecond,MINUTE,oneMinute,HOUR,oneHour,DAY,oneDay,WEEK,oneWeek,MONTH,oneMonth,YEAR,oneYear),units=unitsOption||[['millisecond',[1,2,5,10,20,25,50,100,200,500]],['second',[1,2,5,10,15,30]],['minute',[1,2,5,10,15,30]],['hour',[1,2,3,4,6,8,12]],['day',[1,2]],['week',[1,2]],['month',[1,2,3,4,6]],['year',null]],unit=units[units.length-1],interval=ranges[unit[0]],multiples=unit[1];for(i=0;i<units.length;i++){unit=units[i];interval=ranges[unit[0]];multiples=unit[1];if(units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+ranges[units[i+1][0]])/2;if(tickInterval<=lessThan){break}}}if(interval===oneYear&&tickInterval<5*interval){multiples=[1,2,5]}var multitude=normalizeTickInterval(tickInterval/interval,multiples),minYear,minDate=new Date(min*timeFactor);minDate.setMilliseconds(0);if(interval>=oneSecond){minDate.setSeconds(interval>=oneMinute?0:multitude*mathFloor(minDate.getSeconds()/multitude))}if(interval>=oneMinute){minDate[setMinutes](interval>=oneHour?0:multitude*mathFloor(minDate[getMinutes]()/multitude))}if(interval>=oneHour){minDate[setHours](interval>=oneDay?0:multitude*mathFloor(minDate[getHours]()/multitude))}if(interval>=oneDay){minDate[setDate](interval>=oneMonth?1:multitude*mathFloor(minDate[getDate]()/multitude))}if(interval>=oneMonth){minDate[setMonth](interval>=oneYear?0:multitude*mathFloor(minDate[getMonth]()/multitude));minYear=minDate[getFullYear]()}if(interval>=oneYear){minYear-=minYear%multitude;minDate[setFullYear](minYear)}if(interval===oneWeek){minDate[setDate](minDate[getDate]()-minDate[getDay]()+pick(startOfWeek,1))}i=1;minYear=minDate[getFullYear]();var time=minDate.getTime()/timeFactor,minMonth=minDate[getMonth](),minDateDate=minDate[getDate]();while(time<max){tickPositions.push(time);if(interval===oneYear){time=makeTime(minYear+i*multitude,0)/timeFactor}else if(interval===oneMonth){time=makeTime(minYear,minMonth+i*multitude)/timeFactor}else if(!useUTC&&(interval===oneDay||interval===oneWeek)){time=makeTime(minYear,minMonth,minDateDate+i*multitude*(interval===oneDay?1:7))}else{time+=interval*multitude}i++}tickPositions.push(time);tickPositions.unit=unit;return tickPositions}function ChartCounters(){this.color=0;this.symbol=0}ChartCounters.prototype={wrapColor:function(length){if(this.color>=length){this.color=0}},wrapSymbol:function(length){if(this.symbol>=length){this.symbol=0}}};function setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation)}if(globalAdapter&&globalAdapter.init){globalAdapter.init()}if(!globalAdapter&&win.jQuery){var jQ=jQuery;each=function(arr,fn){var i=0,len=arr.length;for(;i<len;i++){if(fn.call(arr[i],arr[i],i,arr)===false){return i}}};grep=jQ.grep;map=function(arr,fn){var results=[],i=0,len=arr.length;for(;i<len;i++){results[i]=fn.call(arr[i],arr[i],i,arr)}return results};merge=function(){var args=arguments;return jQ.extend(true,null,args[0],args[1],args[2],args[3])};addEvent=function(el,event,fn){jQ(el).bind(event,fn)};removeEvent=function(el,eventType,handler){var func=doc.removeEventListener?'removeEventListener':'detachEvent';if(doc[func]&&!el[func]){el[func]=function(){}}jQ(el).unbind(eventType,handler)};fireEvent=function(el,type,eventArguments,defaultFunction){var event=jQ.Event(type),detachedType='detached'+type;extend(event,eventArguments);if(el[type]){el[detachedType]=el[type];el[type]=null}jQ(el).trigger(event);if(el[detachedType]){el[type]=el[detachedType];el[detachedType]=null}if(defaultFunction&&!event.isDefaultPrevented()){defaultFunction(event)}};animate=function(el,params,options){var $el=jQ(el);if(params.d){el.toD=params.d;params.d=1}$el.stop();$el.animate(params,options)};stop=function(el){jQ(el).stop()};jQ.extend(jQ.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b}});var oldStepDefault=jQuery.fx.step._default,oldCur=jQuery.fx.prototype.cur;jQ.fx.step._default=function(fx){var elem=fx.elem;if(elem.attr){elem.attr(fx.prop,fx.now)}else{oldStepDefault.apply(this,arguments)}};jQ.fx.step.d=function(fx){var elem=fx.elem;if(!fx.started){var ends=pathAnim.init(elem,elem.d,elem.toD);fx.start=ends[0];fx.end=ends[1];fx.started=true}elem.attr('d',pathAnim.step(fx.start,fx.end,fx.pos,elem.toD))};jQ.fx.prototype.cur=function(){var elem=this.elem,r;if(elem.attr){r=elem.attr(this.prop)}else{r=oldCur.apply(this,arguments)}return r}}pathAnim={init:function(elem,fromD,toD){fromD=fromD||'';var shift=elem.shift,bezier=fromD.indexOf('C')>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(' '),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){i=arr.length;while(i--){if(arr[i]===M){arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2])}}};if(bezier){sixify(start);sixify(end)}if(elem.isArea){startBaseLine=start.splice(start.length-6,6);endBaseLine=end.splice(end.length-6,6)}if(shift===1){end=[].concat(end).splice(0,numParams).concat(end)}elem.shift=0;if(start.length){endLength=end.length;while(start.length<endLength){slice=[].concat(start).splice(start.length-numParams,numParams);if(bezier){slice[numParams-6]=slice[numParams-2];slice[numParams-5]=slice[numParams-1]}start=start.concat(slice)}}if(startBaseLine){start=start.concat(startBaseLine);end=end.concat(endBaseLine)}return[start,end]},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(pos===1){ret=complete}else if(i===end.length&&pos<1){while(i--){startVal=parseFloat(start[i]);ret[i]=isNaN(startVal)?start[i]:pos*(parseFloat(end[i]-startVal))+startVal}}else{ret=end}return ret}};function setTimeMethods(){var useUTC=defaultOptions.global.useUTC;makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime()};getMinutes=useUTC?'getUTCMinutes':'getMinutes';getHours=useUTC?'getUTCHours':'getHours';getDay=useUTC?'getUTCDay':'getDay';getDate=useUTC?'getUTCDate':'getDate';getMonth=useUTC?'getUTCMonth':'getMonth';getFullYear=useUTC?'getUTCFullYear':'getFullYear';setMinutes=useUTC?'setUTCMinutes':'setMinutes';setHours=useUTC?'setUTCHours':'setHours';setDate=useUTC?'setUTCDate':'setDate';setMonth=useUTC?'setUTCMonth':'setMonth';setFullYear=useUTC?'setUTCFullYear':'setFullYear'}function setOptions(options){defaultOptions=merge(defaultOptions,options);setTimeMethods();return defaultOptions}function getOptions(){return defaultOptions}function discardElement(element){if(!garbageBin){garbageBin=createElement(DIV)}if(element){garbageBin.appendChild(element)}garbageBin.innerHTML=''}var defaultLabelOptions={enabled:true,align:'center',x:0,y:15,style:{color:'#666',fontSize:'11px',lineHeight:'14px'}};defaultOptions={colors:['#4572A7','#AA4643','#89A54E','#80699B','#3D96AE','#DB843D','#92A8CD','#A47D7C','#B5CA92'],symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:['January','February','March','April','May','June','July','August','September','October','November','December'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],decimalPoint:'.',resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:','},global:{useUTC:true},chart:{borderColor:'#4572A7',borderRadius:5,defaultSeriesType:'line',ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:'12px'},backgroundColor:'#FFFFFF',plotBorderColor:'#C0C0C0'},title:{text:'Chart title',align:'center',y:15,style:{color:'#3E576F',fontSize:'16px'}},subtitle:{text:'',align:'center',y:30,style:{color:'#6D869F'}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:'#FFFFFF',states:{hover:{},select:{fillColor:'#FFFFFF',lineColor:'#000000',lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{enabled:false,y:-6,formatter:function(){return this.y}}),cropThreshold:300,showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:ABSOLUTE,color:'#3E576F'}},legend:{enabled:true,align:'center',layout:'horizontal',labelFormatter:function(){return this.name},borderWidth:1,borderColor:'#909090',borderRadius:5,shadow:false,style:{padding:'5px'},itemStyle:{cursor:'pointer',color:'#3E576F'},itemHoverStyle:{cursor:'pointer',color:'#000000'},itemHiddenStyle:{color:'#C0C0C0'},itemCheckboxStyle:{position:ABSOLUTE,width:'13px',height:'13px'},symbolWidth:16,symbolPadding:5,verticalAlign:'bottom',x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:'bold',position:RELATIVE,top:'1em'},showDuration:100,style:{position:ABSOLUTE,backgroundColor:'white',opacity:0.5,textAlign:'center'}},tooltip:{enabled:true,backgroundColor:'rgba(255, 255, 255, .85)',borderWidth:2,borderRadius:5,shadow:true,snap:hasTouch?25:10,style:{color:'#333333',fontSize:'12px',padding:'5px',whiteSpace:'nowrap'}},toolbar:{itemStyle:{color:'#4572A7',cursor:'pointer'}},credits:{enabled:true,text:'Highstock Beta',href:'http://www.highcharts.com',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:'#909090',fontSize:'10px'}}};var defaultXAxisOptions={dateTimeLabelFormats:hash(MILLISECOND,'%H:%M:%S.%L',SECOND,'%H:%M:%S',MINUTE,'%H:%M',HOUR,'%H:%M',DAY,'%e. %b',WEEK,'%e. %b',MONTH,'%b \'%y',YEAR,'%Y'),endOnTick:false,gridLineColor:'#C0C0C0',labels:defaultLabelOptions,lineColor:'#C0D0E0',lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:'#E0E0E0',minorGridLineWidth:1,minorTickColor:'#A0A0A0',minorTickLength:2,minorTickPosition:'outside',startOfWeek:1,startOnTick:false,tickColor:'#C0D0E0',tickLength:5,tickmarkPlacement:'between',tickPixelInterval:100,tickPosition:'outside',tickWidth:1,title:{align:'middle',style:{color:'#6D869F',fontWeight:'bold'}},type:'linear'},defaultYAxisOptions=merge(defaultXAxisOptions,{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:'right',x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:'Y-values'},stackLabels:{enabled:false,formatter:function(){return this.total},style:defaultLabelOptions.style}}),defaultLeftAxisOptions={labels:{align:'right',x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions={labels:{align:'left',x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions={labels:{align:'center',x:0,y:14},title:{rotation:0}},defaultTopAxisOptions=merge(defaultBottomAxisOptions,{labels:{y:-5}});var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;defaultPlotOptions.spline=merge(defaultSeriesOptions);defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,states:{hover:{lineWidth:0}}});defaultPlotOptions.area=merge(defaultSeriesOptions,{threshold:0});defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,padXAxis:true,states:{hover:{brightness:0.1,shadow:false},select:{color:'#C0C0C0',borderColor:'#000000',shadow:false}},dataLabels:{y:null,verticalAlign:null},threshold:0});defaultPlotOptions.bar=merge(defaultPlotOptions.column,{dataLabels:{align:'left',x:5,y:0}});defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,center:['50%','50%'],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name},y:5},legendType:'point',marker:null,size:'75%',showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});setTimeMethods();var Color=function(input){var rgba=[],result;function init(input){result=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(input);if(result){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)]}else{result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(input);if(result){rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1]}}}function get(format){var ret;if(rgba&&!isNaN(rgba[0])){if(format==='rgb'){ret='rgb('+rgba[0]+','+rgba[1]+','+rgba[2]+')'}else if(format==='a'){ret=rgba[3]}else{ret='rgba('+rgba.join(',')+')'}}else{ret=input}return ret}function brighten(alpha){if(isNumber(alpha)&&alpha!==0){var i;for(i=0;i<3;i++){rgba[i]+=pInt(alpha*255);if(rgba[i]<0){rgba[i]=0}if(rgba[i]>255){rgba[i]=255}}}return this}function setOpacity(alpha){rgba[3]=alpha;return this}init(input);return{get:get,brighten:brighten,setOpacity:setOpacity}};function SVGElement(){}SVGElement.prototype={init:function(renderer,nodeName){this.element=doc.createElementNS(SVG_NS,nodeName);this.renderer=renderer},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,true);if(animOptions){animOptions=merge(animOptions);if(complete){animOptions.complete=complete}animate(this,params,animOptions)}else{this.attr(params);if(complete){complete()}}},attr:function(hash,val){var wrapper=this,key,value,result,i,child,element=wrapper.element,nodeName=element.nodeName,renderer=wrapper.renderer,skipAttr,shadows=wrapper.shadows,hasSetSymbolSize,ret=wrapper;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val}if(isString(hash)){key=hash;if(nodeName==='circle'){key={x:'cx',y:'cy'}[key]||key}else if(key==='strokeWidth'){key='stroke-width'}ret=attr(element,key)||wrapper[key]||0;if(key!=='d'&&key!=='visibility'){ret=parseFloat(ret)}}else{for(key in hash){skipAttr=false;value=hash[key];fireEvent(wrapper,'setAttr',{key:key,value:value},function(e){result=e.result;if(defined(result)&&result!==false){value=result}if(key==='d'){if(value&&value.join){value=value.join(' ')}if(/(NaN| {2}|^$)/.test(value)){value='M 0 0'}wrapper.d=value}else if(key==='x'&&nodeName==='text'){for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(attr(child,'x')===attr(element,'x')){attr(child,'x',value)}}if(wrapper.rotation){attr(element,'transform','rotate('+wrapper.rotation+' '+value+' '+pInt(hash.y||attr(element,'y'))+')')}}else if(key==='fill'){value=renderer.color(value,element,key)}else if(nodeName==='circle'&&(key==='x'||key==='y')){key={x:'cx',y:'cy'}[key]||key}else if(nodeName==='rect'&&key==='r'){attr(element,{rx:value,ry:value});skipAttr=true}else if(key==='translateX'||key==='translateY'||key==='rotation'||key==='verticalAlign'){wrapper[key]=value;wrapper.updateTransform();skipAttr=true}else if(key==='stroke'){value=renderer.color(value,element,key)}else if(key==='dashstyle'){key='stroke-dasharray';value=value&&value.toLowerCase();if(value==='solid'){value=NONE}else if(value){value=value.replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').split(',');i=value.length;while(i--){value[i]=pInt(value[i])*hash['stroke-width']}value=value.join(',')}}else if(key==='isTracker'){wrapper[key]=value}else if(key==='width'){value=pInt(value)}else if(key==='align'){key='text-anchor';value={left:'start',center:'middle',right:'end'}[value]}if(key==='strokeWidth'){key='stroke-width'}if(isWebKit&&key==='stroke-width'&&value===0){value=0.000001}if(wrapper.symbolName&&/^(x|y|r|start|end|innerR)/.test(key)){if(!hasSetSymbolSize){wrapper.symbolAttr(hash);hasSetSymbolSize=true}skipAttr=true}if(shadows&&/^(width|height|visibility|x|y|d|transform)$/.test(key)){i=shadows.length;while(i--){attr(shadows[i],key,value)}}if((key==='width'||key==='height')&&nodeName==='rect'&&value<0){value=0}if(key==='text'){wrapper.textStr=value;if(wrapper.added){renderer.buildText(wrapper)}}else if(!skipAttr){attr(element,key,value)}if(e.callback){e.callback()}})}}return ret},symbolAttr:function(hash){var wrapper=this;each(['x','y','r','start','end','width','height','innerR','anchorX','anchorY'],function(key){wrapper[key]=pick(hash[key],wrapper[key])});wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.width,wrapper.height,wrapper)})},clip:function(clipRect){return this.attr('clip-path','url('+this.renderer.url+'#'+clipRect.id+')')},crisp:function(strokeWidth,x,y,width,height){var wrapper=this,element=wrapper.element,key,attribs={},values={},normalizer;strokeWidth=strokeWidth||wrapper.strokeWidth||(wrapper.attr&&wrapper.attr('stroke-width'))||0;normalizer=strokeWidth%2/2;values.x=mathFloor(x||wrapper.x||0)+normalizer;values.y=mathFloor(y||wrapper.y||0)+normalizer;values.width=mathFloor((width||wrapper.width||0)-2*normalizer);values.height=mathFloor((height||wrapper.height||0)-2*normalizer);values.strokeWidth=strokeWidth;for(key in values){if(wrapper[key]!==values[key]){wrapper[key]=attribs[key]=values[key]}}return attribs},css:function(styles){var elemWrapper=this,elem=elemWrapper.element,textWidth=styles&&styles.width&&elem.nodeName==='text',n,serializedCss,hyphenate=function(a,b){return'-'+b.toLowerCase()};if(styles&&styles.color){styles.fill=styles.color}styles=extend(elemWrapper.styles,styles);elemWrapper.styles=styles;if(isIE&&!hasSVG){if(textWidth){delete styles.width}css(elemWrapper.element,styles)}else{for(n in styles){serializedCss+=n.replace(/([A-Z])/g,hyphenate)+':'+styles[n]+';'}elemWrapper.attr({style:serializedCss})}if(textWidth&&elemWrapper.added){elemWrapper.renderer.buildText(elemWrapper)}return elemWrapper},on:function(eventType,handler){var fn=handler;if(hasTouch&&eventType==='click'){eventType='touchstart';fn=function(e){e.preventDefault();handler()}}this.element['on'+eventType]=fn;return this},translate:function(x,y){return this.attr({translateX:x,translateY:y})},invert:function(){var wrapper=this;wrapper.inverted=true;wrapper.updateTransform();return wrapper},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,inverted=wrapper.inverted,rotation=wrapper.rotation,shadows=wrapper.shadows,transform=[];if(inverted){translateX+=wrapper.attr('width');translateY+=wrapper.attr('height')}if(translateX||translateY){transform.push('translate('+translateX+','+translateY+')')}if(inverted){transform.push('rotate(90) scale(-1,1)')}else if(rotation){transform.push('rotate('+rotation+' '+wrapper.x+' '+wrapper.y+')')}if(transform.length){attr(wrapper.element,'transform',transform.join(' '));if(shadows){each(shadows,function(shadow){attr(shadow,'transform','translate('+(translateX+1)+','+(translateY+1)+')')})}}},toFront:function(){var element=this.element;element.parentNode.appendChild(element);return this},align:function(alignOptions,alignByTranslate,box){var elemWrapper=this;if(!alignOptions){alignOptions=elemWrapper.alignOptions;alignByTranslate=elemWrapper.alignByTranslate}else{elemWrapper.alignOptions=alignOptions;elemWrapper.alignByTranslate=alignByTranslate;if(!box){elemWrapper.renderer.alignedObjects.push(elemWrapper)}}box=pick(box,elemWrapper.renderer);var align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),attribs={};if(/^(right|center)$/.test(align)){x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align]}attribs[alignByTranslate?'translateX':'x']=mathRound(x);if(/^(bottom|middle)$/.test(vAlign)){y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1)}attribs[alignByTranslate?'translateY':'y']=mathRound(y);elemWrapper[elemWrapper.placed?'animate':'attr'](attribs);elemWrapper.placed=true;elemWrapper.alignAttr=attribs;return elemWrapper},getBBox:function(){var bBox,width,height,rotation=this.rotation,rad=rotation*deg2rad;try{bBox=extend({},this.element.getBBox())}catch(e){bBox={width:0,height:0}}width=bBox.width;height=bBox.height;if(rotation){bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad));bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad))}return bBox},show:function(){return this.attr({visibility:VISIBLE})},hide:function(){return this.attr({visibility:HIDDEN})},add:function(parent){var renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes=parentNode.childNodes,element=this.element,zIndex=attr(element,'zIndex'),otherElement,otherZIndex,i,inserted;this.parentInverted=parent&&parent.inverted;if(this.textStr!==undefined){renderer.buildText(this)}if(zIndex){parentWrapper.handleZ=true;zIndex=pInt(zIndex)}if(parentWrapper.handleZ){for(i=0;i<childNodes.length;i++){otherElement=childNodes[i];otherZIndex=attr(otherElement,'zIndex');if(otherElement!==element&&(pInt(otherZIndex)>zIndex||(!defined(zIndex)&&defined(otherZIndex)))){parentNode.insertBefore(element,otherElement);inserted=true;break}}}if(!inserted){parentNode.appendChild(element)}this.added=true;fireEvent(this,'add');return this},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,box=wrapper.box,parentNode=element.parentNode,key;element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=null;stop(wrapper);if(parentNode){parentNode.removeChild(element)}if(shadows){each(shadows,function(shadow){parentNode=shadow.parentNode;if(parentNode){parentNode.removeChild(shadow)}})}if(box){box.destroy()}erase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper){delete wrapper[key]}return null},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length;while(i--){element.removeChild(childNodes[i])}},shadow:function(apply,group){var shadows=[],i,shadow,element=this.element,transform=this.parentInverted?'(-1,-1)':'(1,1)';if(apply){for(i=1;i<=3;i++){shadow=element.cloneNode(0);attr(shadow,{'isShadow':'true','stroke':'rgb(0, 0, 0)','stroke-opacity':0.05*i,'stroke-width':7-2*i,'transform':'translate'+transform,'fill':NONE});if(group){group.element.appendChild(shadow)}else{element.parentNode.insertBefore(shadow,element)}shadows.push(shadow)}this.shadows=shadows}return this}};var SVGRenderer=function(){this.init.apply(this,arguments)};SVGRenderer.prototype={Element:SVGElement,init:function(container,width,height,forExport){var renderer=this,loc=location,boxWrapper;boxWrapper=renderer.createElement('svg').attr({xmlns:SVG_NS,version:'1.1'});container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.alignedObjects=[];renderer.url=isIE?'':loc.href.replace(/#.*?$/,'');renderer.defs=this.createElement('defs').add();renderer.forExport=forExport;renderer.setSize(width,height,false)},createElement:function(nodeName){var wrapper=new this.Element();wrapper.init(this,nodeName);return wrapper},buildText:function(wrapper){var textNode=wrapper.element,lines=pick(wrapper.textStr,'').toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,'<span').replace(/<\/(b|strong|i|em|a)>/g,'</span>').split(/<br.*?>/g),childNodes=textNode.childNodes,styleRegex=/style="([^"]+)"/,hrefRegex=/href="([^"]+)"/,parentX=attr(textNode,'x'),textStyles=wrapper.styles,reverse=isFirefox&&textStyles&&textStyles.HcDirection==='rtl'&&!this.forExport&&pInt(userAgent.split('Firefox/')[1])<4,arr,width=textStyles&&pInt(textStyles.width),textLineHeight=textStyles&&textStyles.lineHeight,lastLine,GET_COMPUTED_STYLE='getComputedStyle',i=childNodes.length;while(i--){textNode.removeChild(childNodes[i])}if(width&&!wrapper.added){this.box.appendChild(textNode)}each(lines,function(line,lineNo){var spans,spanNo=0,lineHeight;line=line.replace(/<span/g,'|||<span').replace(/<\/span>/g,'</span>|||');spans=line.split('|||');each(spans,function(span){if(span!==''||spans.length===1){var attributes={},tspan=doc.createElementNS(SVG_NS,'tspan');if(styleRegex.test(span)){attr(tspan,'style',span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,'$1fill$2'))}if(hrefRegex.test(span)){attr(tspan,'onclick','location.href=\"'+span.match(hrefRegex)[1]+'\"');css(tspan,{cursor:'pointer'})}span=(span.replace(/<(.|\n)*?>/g,'')||' ').replace(/&lt;/g,'<').replace(/&gt;/g,'>');if(reverse){arr=[];i=span.length;while(i--){arr.push(span.charAt(i))}span=arr.join('')}tspan.appendChild(doc.createTextNode(span));if(!spanNo){attributes.x=parentX}else{attributes.dx=3}if(!spanNo){if(lineNo){if(!hasSVG&&wrapper.renderer.forExport){css(tspan,{display:'block'})}lineHeight=win[GET_COMPUTED_STYLE]&&win[GET_COMPUTED_STYLE](lastLine,null).getPropertyValue('line-height');if(!lineHeight||isNaN(lineHeight)){lineHeight=textLineHeight||lastLine.offsetHeight||18}attr(tspan,'dy',lineHeight)}lastLine=tspan}attr(tspan,attributes);textNode.appendChild(tspan);spanNo++;if(width){var words=span.replace(/-/g,'- ').split(' '),tooLong,actualWidth,rest=[];while(words.length||rest.length){actualWidth=textNode.getBBox().width;tooLong=actualWidth>width;if(!tooLong||words.length===1){words=rest;rest=[];if(words.length){tspan=doc.createElementNS(SVG_NS,'tspan');attr(tspan,{dy:textLineHeight||16,x:parentX});textNode.appendChild(tspan);if(actualWidth>width){width=actualWidth}}}else{tspan.removeChild(tspan.firstChild);rest.unshift(words.pop())}if(words.length){tspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g,'-')))}}}}})})},button:function(text,x,y,callback,normalState,hoverState,pressedState){var label=this.label(text,x,y),curState=0,stateOptions,stateStyle,normalStyle,hoverStyle,pressedStyle,STYLE='style';normalState=merge(hash(STROKE_WIDTH,1,STROKE,'#999',FILL,hash(LINEAR_GRADIENT,[0,0,0,14],STOPS,[[0,'#FFF'],[1,'#DDD']]),'r',3,'padding',3,STYLE,hash('color','black')),normalState);normalStyle=normalState[STYLE];delete normalState[STYLE];hoverState=merge(normalState,hash(STROKE,'#68A',FILL,hash(LINEAR_GRADIENT,[0,0,0,14],STOPS,[[0,'#FFF'],[1,'#ACF']])),hoverState);hoverStyle=hoverState[STYLE];delete hoverState[STYLE];pressedState=merge(normalState,hash(STROKE,'#68A',FILL,hash(LINEAR_GRADIENT,[0,0,0,14],STOPS,[[0,'#9BD'],[1,'#CDF']])),pressedState);pressedStyle=pressedState[STYLE];delete pressedState[STYLE];addEvent(label.element,'mouseenter',function(){label.attr(hoverState).css(hoverStyle)});addEvent(label.element,'mouseleave',function(){stateOptions=[normalState,hoverState,pressedState][curState];stateStyle=[normalStyle,hoverStyle,pressedStyle][curState];label.attr(stateOptions).css(stateStyle)});label.setState=function(state){curState=state;if(!state){label.attr(normalState).css(normalStyle)}else if(state===2){label.attr(pressedState).css(pressedStyle)}};return label.on('click',function(){callback.call(label)}).attr(normalState).css(extend({cursor:'default'},normalStyle))},crispLine:function(points,width){if(points[1]===points[4]){points[1]=points[4]=mathRound(points[1])+(width%2/2)}if(points[2]===points[5]){points[2]=points[5]=mathRound(points[2])+(width%2/2)}return points},path:function(path){return this.createElement('path').attr({d:path,fill:NONE})},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r};return this.createElement('circle').attr(attr)},arc:function(x,y,r,innerR,start,end){if(isObject(x)){y=x.y;r=x.r;innerR=x.innerR;start=x.start;end=x.end;x=x.x}return this.symbol('arc',x||0,y||0,r||0,r||0,{innerR:innerR||0,start:start||0,end:end||0})},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;r=x.r;strokeWidth=x.strokeWidth;x=x.x}var wrapper=this.createElement('rect').attr({rx:r,ry:r,fill:NONE});return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)))},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;renderer.width=width;renderer.height=height;renderer.boxWrapper[pick(animate,true)?'animate':'attr']({width:width,height:height});while(i--){alignedObjects[i].align()}},g:function(name){return this.createElement('g').attr(defined(name)&&{'class':PREFIX+name})},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;if(arguments.length>1){extend(attribs,{x:x,y:y,width:width,height:height})}elemWrapper=this.createElement('image').attr(attribs);if(elemWrapper.element.setAttributeNS){elemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink','href',src)}else{elemWrapper.element.setAttribute('hc-svg-href',src)}return elemWrapper},symbol:function(symbol,x,y,width,height,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(mathRound(x),mathRound(y),width,height,options),imageRegex=/^url\((.*?)\)$/,imageSrc,imageSize;if(path){obj=this.path(path);extend(obj,{symbolName:symbol,x:x,y:y,width:width,height:height});if(options){extend(obj,options)}}else if(imageRegex.test(symbol)){var centerImage=function(img,size){img.attr({width:size[0],height:size[1]}).translate(-mathRound(size[0]/2),-mathRound(size[1]/2))};imageSrc=symbol.match(imageRegex)[1];imageSize=symbolSizes[imageSrc];obj=this.image(imageSrc).attr({x:x,y:y});if(imageSize){centerImage(obj,imageSize)}else{obj.attr({width:0,height:0});createElement('img',{onload:function(){var img=this;centerImage(obj,symbolSizes[imageSrc]=[img.width,img.height])},src:imageSrc})}}return obj},symbols:{'circle':function(x,y,w,h){var cpw=0.166*w;return[M,x+w/2,y,'C',x+w+cpw,y,x+w+cpw,y+h,x+w/2,y+h,'C',x-cpw,y+h,x-cpw,y,x+w/2,y,'Z']},'square':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w,y+h,x,y+h,'Z']},'triangle':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h,x,y+h,'Z']},'triangle-down':function(x,y,w,h){return[M,x,y,L,x+w,y,x+w/2,y+h,'Z']},'diamond':function(x,y,w,h){return[M,x+w/2,y,L,x+w,y+h/2,x+w/2,y+h,x,y+h/2,'Z']},'arc':function(x,y,w,h,options){var start=options.start,radius=w,end=options.end-0.000001,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,'A',radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,'A',innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,'Z']}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement('clipPath').attr({id:id}).add(this.defs);wrapper=this.rect(x,y,width,height,0).add(clipPath);wrapper.id=id;return wrapper},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/;if(color&&color.linearGradient){var renderer=this,strLinearGradient='linearGradient',linearGradient=color[strLinearGradient],id=PREFIX+idCounter++,gradientObject,stopColor,stopOpacity;gradientObject=renderer.createElement(strLinearGradient).attr({id:id,gradientUnits:'userSpaceOnUse',x1:linearGradient[0],y1:linearGradient[1],x2:linearGradient[2],y2:linearGradient[3]}).add(renderer.defs);each(color.stops,function(stop){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a')}else{stopColor=stop[1];stopOpacity=1}renderer.createElement('stop').attr({offset:stop[0],'stop-color':stopColor,'stop-opacity':stopOpacity}).add(gradientObject)});return'url('+this.url+'#'+id+')'}else if(regexRgba.test(color)){colorObject=Color(color);attr(elem,prop+'-opacity',colorObject.get('a'));return colorObject.get('rgb')}else{return color}},text:function(str,x,y){var renderer=this,defaultChartStyle=defaultOptions.chart.style,wrapper,box;x=mathRound(pick(x,0));y=mathRound(pick(y,0));wrapper=renderer.createElement('text').attr({x:x,y:y,text:str}).css({fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});wrapper.x=x;wrapper.y=y;return wrapper},label:function(str,x,y,shape,anchorX,anchorY){var renderer=this,wrapper=renderer.text(str),box,bBox,align='left',padding=2,width,height,xAdjust,deferredAttr={};function updateBoxSize(){bBox=(width===undefined||height===undefined||wrapper.styles.textAlign)&&wrapper.getBBox(true);var w=(width||bBox.width)+2*padding,h=(height||bBox.height)+2*padding,anchors;xAdjust=mathRound(w*{left:0,center:0.5,right:1}[align]);anchors=anchorX!==undefined&&{anchorX:anchorX-x+xAdjust,anchorY:anchorY-y};if(!box){wrapper.box=box=shape?renderer.symbol(shape,0,0,w,h,anchors):renderer.rect(0,0,w,h,0,deferredAttr['stroke-width']);box.add()}box.attr(merge({width:w,height:h},anchors,deferredAttr));deferredAttr=null}function boxAttr(key,value){if(box){box.attr(key,value)}else{deferredAttr[key]=value}}addEvent(wrapper,'add',function(){updateBoxSize();var boxElem=box.element,wrapperElem=wrapper.element,zIndex=attr(wrapperElem,'zIndex');if(defined(zIndex)){attr(boxElem,'zIndex',zIndex)}wrapperElem.parentNode.insertBefore(boxElem,wrapperElem);wrapper.attr({x:x,y:y})});addEvent(wrapper,'setAttr',function(e){var key=e.key,value=e.value,elem=wrapper,textAlign,ret;if(key==='width'){width=value;ret=false}else if(key==='height'){height=value;ret=false}else if(key==='padding'){padding=value;ret=false}else if(key==='align'){align=value}else if(key==='visibility'||key==='zIndex'){boxAttr(key,value)}else if(key==='stroke'||key==='stroke-width'||key==='fill'||key==='r'){boxAttr(key,value);ret=false}else if(key==='x'){textAlign=wrapper.styles.textAlign;boxAttr('translateX',value-xAdjust);if(align==='left'&&defined(width)&&(textAlign==='center'||textAlign==='right')){value+={center:0.5,right:1}[textAlign]*(width-bBox.width)}ret=mathRound(value+{left:1,center:0,right:-1}[align]*padding)}else if(key==='y'){boxAttr('translateY',value);ret=mathRound(value+pInt(wrapper.styles.fontSize||12)*1.2)}else if(key==='text'){e.callback=updateBoxSize}if(ret!==UNDEFINED){return ret}});wrapper.txtToFront=wrapper.toFront;return extend(wrapper,{shadow:function(b){box.shadow(b);return wrapper},toFront:function(){box.toFront();wrapper.txtToFront()}})}};Renderer=SVGRenderer;var VMLRenderer;if(!hasSVG){var VMLElement=extendClass(SVGElement,{init:function(renderer,nodeName){var markup=['<',nodeName,' filled="f" stroked="f"'],style=['position: ',ABSOLUTE,';'];if(nodeName==='shape'||nodeName===DIV){style.push('left:0;top:0;width:10px;height:10px;')}if(docMode8){style.push('visibility: ',nodeName===DIV?HIDDEN:VISIBLE)}markup.push(' style="',style.join(''),'"/>');if(nodeName){markup=nodeName===DIV||nodeName==='span'||nodeName==='img'?markup.join(''):renderer.prepVML(markup);this.element=createElement(markup)}this.renderer=renderer},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;if(inverted){renderer.invertChild(element,parentNode)}if(docMode8&&parentNode.gVis===HIDDEN){css(element,{visibility:HIDDEN})}parentNode.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd&&!wrapper.deferUpdateTransform){wrapper.updateTransform()}fireEvent(wrapper,'add');return wrapper},attr:function(hash,val){var wrapper=this,key,value,i,result,element=wrapper.element||{},elemStyle=element.style,nodeName=element.nodeName,renderer=wrapper.renderer,symbolName=wrapper.symbolName,childNodes,hasSetSymbolSize,shadows=wrapper.shadows,skipAttr,ret=wrapper;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val}if(isString(hash)){key=hash;if(key==='strokeWidth'||key==='stroke-width'){ret=wrapper.strokeweight}else{ret=wrapper[key]}}else{for(key in hash){value=hash[key];skipAttr=false;fireEvent(wrapper,'setAttr',{key:key,value:value},function(e){result=e.result;if(defined(result)&&result!==false){value=result}if(symbolName&&/^(x|y|r|start|end|width|height|innerR)/.test(key)){if(!hasSetSymbolSize){wrapper.symbolAttr(hash);hasSetSymbolSize=true}skipAttr=true}else if(key==='d'){value=value||[];wrapper.d=value.join(' ');i=value.length;var convertedPath=[];while(i--){if(isNumber(value[i])){convertedPath[i]=mathRound(value[i]*10)-5}else if(value[i]==='Z'){convertedPath[i]='x'}else{convertedPath[i]=value[i]}}value=convertedPath.join(' ')||'x';element.path=value;if(shadows){i=shadows.length;while(i--){shadows[i].path=value}}skipAttr=true}else if(key==='zIndex'||key==='visibility'){if(docMode8&&key==='visibility'&&nodeName==='DIV'){element.gVis=value;childNodes=element.childNodes;i=childNodes.length;while(i--){css(childNodes[i],{visibility:value})}if(value===VISIBLE){value=null}}if(value){elemStyle[key]=value}skipAttr=true}else if(key==='width'||key==='height'){if(wrapper.updateClipping){wrapper[key]=value;wrapper.updateClipping()}else{elemStyle[key]=value}skipAttr=true}else if(/^(x|y)$/.test(key)){wrapper[key]=value;if(element.tagName==='SPAN'){wrapper.updateTransform()}else{elemStyle[{x:'left',y:'top'}[key]]=value}}else if(key==='class'){element.className=value}else if(key==='stroke'){value=renderer.color(value,element,key);key='strokecolor'}else if(key==='stroke-width'||key==='strokeWidth'){element.stroked=value?true:false;key='strokeweight';wrapper[key]=value;if(isNumber(value)){value+=PX}}else if(key==='dashstyle'){var strokeElem=element.getElementsByTagName('stroke')[0]||createElement(renderer.prepVML(['<stroke/>']),null,null,element);strokeElem[key]=value||'solid';wrapper.dashstyle=value;skipAttr=true}else if(key==='fill'){if(nodeName==='SPAN'){elemStyle.color=value}else{element.filled=value!==NONE?true:false;value=renderer.color(value,element,key);key='fillcolor'}}else if(key==='translateX'||key==='translateY'||key==='rotation'||key==='align'){if(key==='align'){key='textAlign'}wrapper[key]=value;wrapper.updateTransform();skipAttr=true}else if(key==='text'){this.bBox=null;element.innerHTML=value;skipAttr=true}if(shadows&&key==='visibility'){i=shadows.length;while(i--){shadows[i].style[key]=value}}if(!skipAttr){if(docMode8){try{element[key]=value}catch(e){console.log([element.tagName,key,value].join(', '))}}else{attr(element,key,value)}}if(e.callback){e.callback()}})}}return ret},clip:function(clipRect){var wrapper=this,clipMembers=clipRect.members;clipMembers.push(wrapper);wrapper.destroyClip=function(){erase(clipMembers,wrapper)};return wrapper.css(clipRect.getCSS(wrapper.inverted))},css:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&element.tagName==='SPAN'&&styles.width;if(textWidth){delete styles.width;wrapper.textWidth=textWidth;wrapper.updateTransform()}wrapper.styles=extend(wrapper.styles,styles);css(wrapper.element,styles);return wrapper},destroy:function(){var wrapper=this;if(wrapper.destroyClip){wrapper.destroyClip()}SVGElement.prototype.destroy.apply(wrapper)},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length,node;while(i--){node=childNodes[i];node.parentNode.removeChild(node)}},getBBox:function(refresh){var wrapper=this,element=wrapper.element,bBox=wrapper.bBox;if(!bBox||refresh){if(element.nodeName==='text'){element.style.position=ABSOLUTE}bBox=wrapper.bBox={x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight}}return bBox},on:function(eventType,handler){this.element['on'+eventType]=function(){var evt=win.event;evt.target=evt.srcElement;handler(evt)};return this},updateTransform:function(hash){if(!this.added){this.alignOnAdd=true;return}var wrapper=this,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||'left',alignCorrection={left:0,center:0.5,right:1}[align],nonLeft=align&&align!=='left',shadows=wrapper.shadows;if(translateX||translateY){css(elem,{marginLeft:translateX,marginTop:translateY});if(shadows){each(shadows,function(shadow){css(shadow,{marginLeft:translateX+1,marginTop:translateY+1})})}}if(wrapper.inverted){each(elem.childNodes,function(child){wrapper.renderer.invertChild(child,elem)})}if(elem.tagName==='SPAN'){var width,height,rotation=wrapper.rotation,lineHeight,radians=0,costheta=1,sintheta=0,quad,textWidth=pInt(wrapper.textWidth),xCorr=wrapper.xCorr||0,yCorr=wrapper.yCorr||0,currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(',');if(currentTextTransform!==wrapper.cTT){if(defined(rotation)){radians=rotation*deg2rad;costheta=mathCos(radians);sintheta=mathSin(radians);css(elem,{filter:rotation?['progid:DXImageTransform.Microsoft.Matrix(M11=',costheta,', M12=',-sintheta,', M21=',sintheta,', M22=',costheta,', sizingMethod=\'auto expand\')'].join(''):NONE})}width=pick(wrapper.elemWidth,elem.offsetWidth);height=pick(wrapper.elemHeight,elem.offsetHeight);if(width>textWidth){css(elem,{width:textWidth+PX,display:'block',whiteSpace:'normal'});width=textWidth}lineHeight=mathRound((pInt(elem.style.fontSize)||12)*1.2);xCorr=costheta<0&&-width;yCorr=sintheta<0&&-height;quad=costheta*sintheta<0;xCorr+=sintheta*lineHeight*(quad?1-alignCorrection:alignCorrection);yCorr-=costheta*lineHeight*(rotation?(quad?alignCorrection:1-alignCorrection):1);if(nonLeft){xCorr-=width*alignCorrection*(costheta<0?-1:1);if(rotation){yCorr-=height*alignCorrection*(sintheta<0?-1:1)}css(elem,{textAlign:align})}wrapper.xCorr=xCorr;wrapper.yCorr=yCorr}css(elem,{left:x+xCorr,top:y+yCorr});wrapper.cTT=currentTextTransform}},shadow:function(apply,group){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path;if(path&&typeof path.value!=='string'){path='x'}if(apply){for(i=1;i<=3;i++){markup=['<shape isShadow="true" strokeweight="',(7-2*i),'" filled="false" path="',path,'" coordsize="100,100" style="',element.style.cssText,'" />'];shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+1,top:pInt(elemStyle.top)+1});markup=['<stroke color="black" opacity="',(0.05*i),'"/>'];createElement(renderer.prepVML(markup),null,null,shadow);if(group){group.element.appendChild(shadow)}else{element.parentNode.insertBefore(shadow,element)}shadows.push(shadow)}this.shadows=shadows}return this}});VMLRenderer=function(){this.init.apply(this,arguments)};VMLRenderer.prototype=merge(SVGRenderer.prototype,{Element:VMLElement,isIE8:userAgent.indexOf('MSIE 8.0')>-1,init:function(container,width,height){var renderer=this,boxWrapper;renderer.alignedObjects=[];boxWrapper=renderer.createElement(DIV);container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.setSize(width,height,false);if(!doc.namespaces.hcv){doc.namespaces.add('hcv','urn:schemas-microsoft-com:vml');doc.createStyleSheet().cssText='hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke'+'{ behavior:url(#default#VML); display: inline-block; } '}},clipRect:function(x,y,width,height){var clipRect=this.createElement();return extend(clipRect,{members:[],left:x,top:y,width:width,height:height,getCSS:function(inverted){var rect=this,top=rect.top,left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:'rect('+mathRound(inverted?left:top)+'px,'+mathRound(inverted?bottom:right)+'px,'+mathRound(inverted?right:bottom)+'px,'+mathRound(inverted?top:left)+'px)'};if(!inverted&&docMode8){extend(ret,{width:right+PX,height:bottom+PX})}return ret},updateClipping:function(){each(clipRect.members,function(member){member.css(clipRect.getCSS(member.inverted))})}})},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/,markup;if(color&&color.linearGradient){var stopColor,stopOpacity,linearGradient=color.linearGradient,angle,color1,opacity1,color2,opacity2;each(color.stops,function(stop,i){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a')}else{stopColor=stop[1];stopOpacity=1}if(!i){color1=stopColor;opacity1=stopOpacity}else{color2=stopColor;opacity2=stopOpacity}});angle=90-math.atan((linearGradient[3]-linearGradient[1])/ (linearGradient[2]-linearGradient[0]))*180/mathPI;markup=['<',prop,' colors="0% ',color1,',100% ',color2,'" angle="',angle,'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="gradient" focus="100%" />'];createElement(this.prepVML(markup),null,null,elem)}else if(regexRgba.test(color)&&elem.tagName!=='IMG'){colorObject=Color(color);markup=['<',prop,' opacity="',colorObject.get('a'),'"/>'];createElement(this.prepVML(markup),null,null,elem);return colorObject.get('rgb')}else{return color}},prepVML:function(markup){var vmlStyle='display:inline-block;behavior:url(#default#VML);',isIE8=this.isIE8;markup=markup.join('');if(isIE8){markup=markup.replace('/>',' xmlns="urn:schemas-microsoft-com:vml" />');if(markup.indexOf('style="')===-1){markup=markup.replace('/>',' style="'+vmlStyle+'" />')}else{markup=markup.replace('style="','style="'+vmlStyle)}}else{markup=markup.replace('<','<hcv:')}return markup},text:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style;return this.createElement('span').attr({text:str,x:mathRound(x),y:mathRound(y)}).css({whiteSpace:'nowrap',fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize})},path:function(path){return this.createElement('shape').attr({coordsize:'100 100',d:path})},circle:function(x,y,r){return this.symbol('circle').attr({x:x,y:y,r:r})},g:function(name){var wrapper,attribs;if(name){attribs={'className':PREFIX+name,'class':PREFIX+name}}wrapper=this.createElement(DIV).attr(attribs);return wrapper},image:function(src,x,y,width,height){var obj=this.createElement('img').attr({src:src});if(arguments.length>1){obj.css({left:x,top:y,width:width,height:height})}return obj},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;strokeWidth=x.strokeWidth;x=x.x}var wrapper=this.symbol('rect');wrapper.r=r;return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)))},invertChild:function(element,parentNode){var parentStyle=parentNode.style;css(element,{flip:'x',left:pInt(parentStyle.width)-10,top:pInt(parentStyle.height)-10,rotation:-90})},symbols:{arc:function(x,y,w,h,options){var start=options.start,end=options.end,radius=w,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),innerRadius=options.innerR,circleCorrection=0.07/radius,innerCorrection=(innerRadius&&0.1/innerRadius)||0;if(end-start===0){return['x']}else if(2*mathPI-end+start<circleCorrection){cosEnd=-circleCorrection}else if(end-start<innerCorrection){cosEnd=mathCos(start+innerCorrection)}return['wa',x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd,'at',x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,'x','e']},circle:function(x,y,w,h){return['wa',x,y,x+w,y+h,x+w,y+h/2, x+w,y+h/2, 'e']},rect:function(left,top,width,height,options){if(!defined(options)){return[]}var right=left+width,bottom=top+height,r=mathMin(options.r||0,width,height);return[M,left+r,top,L,right-r,top,'wa',right-2*r,top,right,top+2*r,right-r,top,right,top+r,L,right,bottom-r,'wa',right-2*r,bottom-2*r,right,bottom,right,bottom-r,right-r,bottom,L,left+r,bottom,'wa',left,bottom-2*r,left+2*r,bottom,left+r,bottom,left,bottom-r,L,left,top+r,'wa',left,top,left+2*r,top+2*r,left,top+r,left+r,top,'x','e']}}});Renderer=VMLRenderer}function Chart(options,callback){defaultXAxisOptions=merge(defaultXAxisOptions,defaultOptions.xAxis);defaultYAxisOptions=merge(defaultYAxisOptions,defaultOptions.yAxis);defaultOptions.xAxis=defaultOptions.yAxis=null;var seriesOptions=options.series;options.series=null;options=merge(defaultOptions,options);options.series=seriesOptions;var optionsChart=options.chart,optionsMargin=optionsChart.margin,margin=isObject(optionsMargin)?optionsMargin:[optionsMargin,optionsMargin,optionsMargin,optionsMargin],optionsMarginTop=pick(optionsChart.marginTop,margin[0]),optionsMarginRight=pick(optionsChart.marginRight,margin[1]),optionsMarginBottom=pick(optionsChart.marginBottom,margin[2]),optionsMarginLeft=pick(optionsChart.marginLeft,margin[3]),spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft,spacingBox,chartTitleOptions,chartSubtitleOptions,plotTop,marginRight,marginBottom,plotLeft,axisOffset,renderTo,renderToClone,container,containerId,containerWidth,containerHeight,chartWidth,chartHeight,oldChartWidth,oldChartHeight,chartBackground,plotBackground,plotBGImage,plotBorder,chart=this,chartEvents=optionsChart.events,runChartClick=chartEvents&&!!chartEvents.click,eventType,isInsidePlot,tooltip,mouseIsDown,loadingDiv,loadingSpan,loadingShown,plotHeight,plotWidth,tracker,trackerGroup,placeTrackerGroup,legend,legendWidth,legendHeight,chartPosition,hasCartesianSeries=optionsChart.showAxes,isResizing=0,axes=[],maxTicks,series=[],inverted,renderer,tooltipTick,tooltipInterval,hoverX,drawChartBox,getMargins,resetMargins,setChartSize,resize,zoom,zoomOut;function Axis(options){var isXAxis=options.isX,opposite=options.opposite,horiz=inverted?!isXAxis:isXAxis,side=horiz?(opposite?0:2):(opposite?1:3),stacks={};options=merge(isXAxis?defaultXAxisOptions:defaultYAxisOptions,[defaultTopAxisOptions,defaultRightAxisOptions,defaultBottomAxisOptions,defaultLeftAxisOptions][side],options);var axis=this,type=options.type,isDatetimeAxis=type==='datetime',isLog=type==='logarithmic',offset=options.offset||0,xOrY=isXAxis?'x':'y',axisLength,transA,transB,oldTransA,axisLeft,axisTop,axisWidth,axisHeight,axisBottom,axisRight,translate,getPlotLinePath,axisGroup,gridGroup,axisLine,dataMin,dataMax,associatedSeries,range=options.range,userMin,userMax,max=null,min=null,oldMin,oldMax,minPadding=options.minPadding,maxPadding=options.maxPadding,isLinked=defined(options.linkedTo),ignoreMinPadding,ignoreMaxPadding,usePercentage,events=options.events,eventType,padAxis,plotLinesAndBands=[],tickInterval,minorTickInterval,magnitude,tickPositions,ticks={},minorTicks={},alternateBands={},tickAmount,labelOffset,labelHeight,axisTitleMargin,dateTimeLabelFormat,categories=options.categories,labelFormatter=options.labels.formatter||function(){var value=this.value,ret;if(dateTimeLabelFormat){ret=dateFormat(dateTimeLabelFormat,value)}else if(tickInterval%1000000===0){ret=(value/1000000)+'M'}else if(tickInterval%1000===0){ret=(value/1000)+'k'}else if(!categories&&value>=1000){ret=numberFormat(value,0)}else{ret=value}return ret},staggerLines=horiz&&options.labels.staggerLines,reversed=options.reversed,tickmarkOffset=(categories&&options.tickmarkPlacement==='between')?0.5:0;function Tick(pos,minor){var tick=this;tick.pos=pos;tick.minor=minor;tick.isNew=true;if(!minor){tick.addLabel()}}Tick.prototype={attachLabel:function(){var label=this.label;if(label&&!this.added){label.deferUpdateTransform=true;label.add(axisGroup)}},updateTransformLabel:function(){var label=this.label;if(label){label.deferUpdateTransform=false;label.updateTransform()}},computeBBox:function(){var label=this.label,bBox;if(label){bBox=label.getBBox();label.elemWidth=bBox.width;label.elemHeight=bBox.height}},addLabel:function(){var pos=this.pos,labelOptions=options.labels,str,withLabel=!((pos===min&&!pick(options.showFirstLabel,1))||(pos===max&&!pick(options.showLastLabel,0))),width=(categories&&horiz&&categories.length&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&plotWidth/categories.length)||(!horiz&&plotWidth/2),css,label=this.label;str=labelFormatter.call({isFirst:pos===tickPositions[0],isLast:pos===tickPositions[tickPositions.length-1],dateTimeLabelFormat:dateTimeLabelFormat,value:(categories&&categories[pos]?categories[pos]:pos)});css=width&&{width:mathMax(1,mathRound(width-2*(labelOptions.padding||10)))+PX};css=extend(css,labelOptions.style);if(!defined(label)){this.label=defined(str)&&withLabel&&labelOptions.enabled?renderer.text(str,0,0).attr({align:labelOptions.align,rotation:labelOptions.rotation}).css(css):null}else if(label){label.attr({text:str}).css(css)}},getLabelSize:function(){var label=this.label;return label?((this.labelBBox=label.getBBox()))[horiz?'height':'width']:0},render:function(index,old){var tick=this,major=!tick.minor,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridLineWidth=major?options.gridLineWidth:options.minorGridLineWidth,gridLineColor=major?options.gridLineColor:options.minorGridLineColor,dashStyle=major?options.gridLineDashStyle:options.minorGridLineDashStyle,gridLinePath,mark=tick.mark,markPath,tickLength=major?options.tickLength:options.minorTickLength,tickWidth=major?options.tickWidth:(options.minorTickWidth||0),tickColor=major?options.tickColor:options.minorTickColor,tickPosition=major?options.tickPosition:options.minorTickPosition,step=labelOptions.step,cHeight=(old&&oldChartHeight)||chartHeight,attribs,x,y;x=horiz?translate(pos+tickmarkOffset,null,null,old)+transB:axisLeft+offset+(opposite?((old&&oldChartWidth)||chartWidth)-axisRight-axisLeft:0);y=horiz?cHeight-axisBottom+offset-(opposite?axisHeight:0):cHeight-translate(pos+tickmarkOffset,null,null,old)-transB;if(gridLineWidth){gridLinePath=getPlotLinePath(pos+tickmarkOffset,gridLineWidth,old);if(gridLine===UNDEFINED){attribs={stroke:gridLineColor,'stroke-width':gridLineWidth};if(dashStyle){attribs.dashstyle=dashStyle}tick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(gridGroup):null}if(gridLine&&gridLinePath){gridLine.animate({d:gridLinePath})}}if(tickWidth){if(tickPosition==='inside'){tickLength=-tickLength}if(opposite){tickLength=-tickLength}markPath=renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth);if(mark){mark.animate({d:markPath})}else{tick.mark=renderer.path(markPath).attr({stroke:tickColor,'stroke-width':tickWidth}).add(axisGroup)}}if(label&&!isNaN(x)){x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0);y=y+labelOptions.y-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0);if(!defined(labelOptions.y)){y+=pInt(label.styles.lineHeight)*0.9-label.getBBox().height/2}if(staggerLines){y+=(index/(step||1)%staggerLines)*16}if(step){label[index%step?'hide':'show']()}label[tick.isNew?'attr':'animate']({x:x,y:y})}tick.isNew=false},destroy:function(){var tick=this,n;for(n in tick){if(tick[n]&&tick[n].destroy){tick[n].destroy()}}}};function PlotLineOrBand(options){var plotLine=this;if(options){plotLine.options=options;plotLine.id=options.id}return plotLine}PlotLineOrBand.prototype={render:function(){var plotLine=this,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,toPath,from=options.from,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs;if(width){path=getPlotLinePath(options.value,width);attribs={stroke:color,'stroke-width':width};if(dashStyle){attribs.dashstyle=dashStyle}}else if(defined(from)&&defined(to)){from=mathMax(from,min);to=mathMin(to,max);toPath=getPlotLinePath(to);path=getPlotLinePath(from);if(path&&toPath){path.push(toPath[4],toPath[5],toPath[1],toPath[2])}else{path=null}attribs={fill:color}}else{return}if(defined(zIndex)){attribs.zIndex=zIndex}if(svgElem){if(path){svgElem.animate({d:path},null,svgElem.onGetPath)}else{svgElem.hide();svgElem.onGetPath=function(){svgElem.show()}}}else if(path&&path.length){plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add();if(events){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e])})};for(eventType in events){addEvent(eventType)}}}if(optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&axisWidth>0&&axisHeight>0){optionsLabel=merge({align:horiz&&toPath&&'center',x:horiz?!toPath&&4:10,verticalAlign:!horiz&&toPath&&'middle',y:horiz?toPath?16:10:toPath?6:-4,rotation:horiz&&!toPath&&90},optionsLabel);if(!label){plotLine.label=label=renderer.text(optionsLabel.text,0,0).attr({align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation,zIndex:zIndex}).css(optionsLabel.style).add()}xs=[path[1],path[4],pick(path[6],path[1])];ys=[path[2],path[5],pick(path[7],path[2])];x=mathMin.apply(math,xs);y=mathMin.apply(math,ys);label.align(optionsLabel,false,{x:x,y:y,width:mathMax.apply(math,xs)-x,height:mathMax.apply(math,ys)-y});label.show()}else if(label){label.hide()}return plotLine},destroy:function(){var obj=this,n;for(n in obj){if(obj[n]&&obj[n].destroy){obj[n].destroy()}delete obj[n]}erase(plotLinesAndBands,obj)}};function StackItem(options,isNegative,x){var stackItem=this;stackItem.isNegative=isNegative;stackItem.options=options;stackItem.x=x;stackItem.alignOptions={align:options.align||(inverted?(isNegative?'left':'right'):'center'),verticalAlign:options.verticalAlign||(inverted?'middle':(isNegative?'bottom':'top')),y:pick(options.y,inverted?4:(isNegative?14:-6)),x:pick(options.x,inverted?(isNegative?-6:6):0)};stackItem.textAlign=options.textAlign||(inverted?(isNegative?'right':'left'):'center')}StackItem.prototype={setTotal:function(total){this.total=total;this.cum=total},render:function(group){var stackItem=this,str=stackItem.options.formatter.call(stackItem);if(stackItem.label){stackItem.label.attr({text:str,visibility:HIDDEN})}else{stackItem.label=chart.renderer.text(str,0,0).css(stackItem.options.style).attr({align:stackItem.textAlign,rotation:stackItem.options.rotation,visibility:HIDDEN}).add(group)}},setOffset:function(xOffset,xWidth){var stackItem=this,neg=stackItem.isNegative,y=axis.translate(stackItem.total),yZero=axis.translate(0),h=mathAbs(y-yZero),x=chart.xAxis[0].translate(stackItem.x)+xOffset,plotHeight=chart.plotHeight,stackBox={x:inverted?(neg?y:y-h):x,y:inverted?plotHeight-x-xWidth:(neg?(plotHeight-y-h):plotHeight-y),width:inverted?h:xWidth,height:inverted?xWidth:h};if(stackItem.label){stackItem.label.align(stackItem.alignOptions,null,stackBox).attr({visibility:VISIBLE})}}};function getSeriesExtremes(){var posStack=[],negStack=[],i,run;dataMin=dataMax=null;associatedSeries=[];each(series,function(serie){var seriesOptions=serie.options;run=false;each(['xAxis','yAxis'],function(strAxis){if(serie.isCartesian&&((strAxis==='xAxis'&&isXAxis)||(strAxis==='yAxis'&&!isXAxis))&&((seriesOptions[strAxis]===options.index)||(seriesOptions[strAxis]===UNDEFINED&&options.index===0))){serie[strAxis]=axis;associatedSeries.push(serie);if(serie.options.padXAxis){padAxis=true}run=true}});if(!serie.visible&&optionsChart.ignoreHiddenSeries){run=false}if(run){var stacking,posPointStack,negPointStack,stackKey,negKey;if(!isXAxis){stacking=seriesOptions.stacking;usePercentage=stacking==='percent';if(stacking){stackKey=serie.type+pick(seriesOptions.stack,'');negKey='-'+stackKey;serie.stackKey=stackKey;posPointStack=posStack[stackKey]||[];posStack[stackKey]=posPointStack;negPointStack=negStack[negKey]||[];negStack[negKey]=negPointStack}if(usePercentage){dataMin=0;dataMax=99}}if(serie.isCartesian){var xData,yData,x,y,threshold=seriesOptions.threshold,yDataLength,activeYData=[],activeCounter=0;if(isXAxis){xData=serie.xData;dataMin=mathMin(pick(dataMin,xData[0]),mathMin.apply(math,xData));dataMax=mathMax(pick(dataMax,xData[0]),mathMax.apply(math,xData))}else{var isNegative,pointStack,key,j;serie.processData();var start=+new Date();xData=serie.processedXData;yData=serie.processedYData;yDataLength=yData.length;for(i=0;i<yDataLength;i++){y=yData[i];if(y!==null&&y!==UNDEFINED){if(stacking){x=xData[i];isNegative=y<0;pointStack=isNegative?negPointStack:posPointStack;key=isNegative?negKey:stackKey;y=pointStack[x]=defined(pointStack[x])?pointStack[x]+y:y;if(!stacks[key]){stacks[key]={}}if(!stacks[key][x]){stacks[key][x]=new StackItem(options.stackLabels,isNegative,x)}stacks[key][x].setTotal(y)}j=y.length;if(j){while(j--){activeYData[activeCounter++]=y[j]}}else{activeYData[activeCounter++]=y}}}if(!usePercentage){dataMin=mathMin(pick(dataMin,activeYData[0]),mathMin.apply(math,activeYData));dataMax=mathMax(pick(dataMax,activeYData[0]),mathMax.apply(math,activeYData))}if(serie.useThreshold&&threshold!==null){if(dataMin>=threshold){dataMin=threshold;ignoreMinPadding=true}else if(dataMax<threshold){dataMax=threshold;ignoreMaxPadding=true}}}}}})}translate=function(val,backwards,cvsCoord,old,handleLog){var sign=1,cvsOffset=0,localA=old?oldTransA:transA,localMin=old?oldMin:min,returnValue;if(!localA){localA=transA}if(cvsCoord){sign*=-1;cvsOffset=axisLength}if(reversed){sign*=-1;cvsOffset-=sign*axisLength}if(backwards){if(reversed){val=axisLength-val}returnValue=val/localA+localMin; if(isLog&&handleLog){returnValue=lin2log(returnValue)}}else{if(isLog&&handleLog){val=log2lin(val)}returnValue=sign*(val-localMin)*localA+cvsOffset}return returnValue};getPlotLinePath=function(value,lineWidth,old){var x1,y1,x2,y2,translatedValue=translate(value,null,null,old),cHeight=(old&&oldChartHeight)||chartHeight,cWidth=(old&&oldChartWidth)||chartWidth,skip;x1=x2=mathRound(translatedValue+transB);y1=y2=mathRound(cHeight-translatedValue-transB);if(isNaN(translatedValue)){skip=true}else if(horiz){y1=axisTop;y2=cHeight-axisBottom;if(x1<axisLeft||x1>axisLeft+axisWidth){skip=true}}else{x1=axisLeft;x2=cWidth-axisRight;if(y1<axisTop||y1>axisTop+axisHeight){skip=true}}return skip?null:renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||0)};function correctFloat(num){var invMag,ret=num;magnitude=pick(magnitude,math.pow(10,mathFloor(math.log(tickInterval)/math.LN10)));if(magnitude<1){invMag=mathRound(1/magnitude)*10;ret=mathRound(num*invMag)/invMag}return ret}function setLinearTickPositions(){var i,roundedMin=correctFloat(mathFloor(min/tickInterval)*tickInterval),roundedMax=correctFloat(mathCeil(max/tickInterval)*tickInterval);tickPositions=[];i=correctFloat(roundedMin);while(i<=roundedMax){tickPositions.push(i);i=correctFloat(i+tickInterval)}}function setTickPositions(secondPass){var length,catPad,linkedParent,linkedParentExtremes,tickIntervalOption=options.tickInterval,tickPixelIntervalOption=options.tickPixelInterval,maxZoom=options.maxZoom||(isXAxis&&!defined(options.min)&&!defined(options.max)?mathMin(chart.smallestInterval*5,dataMax-dataMin):null),zoomOffset;axisLength=horiz?axisWidth:axisHeight;if(isLinked){linkedParent=chart[isXAxis?'xAxis':'yAxis'][options.linkedTo];linkedParentExtremes=linkedParent.getExtremes();min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin);max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax)}else{min=pick(userMin,options.min,dataMin);max=pick(userMax,options.max,dataMax)}if(isLog){min=log2lin(min);max=log2lin(max)}if(range){userMin=min=max-range;userMax=max;if(secondPass){range=null}}if(max-min<maxZoom){zoomOffset=(maxZoom-max+min)/2;min=mathMax(min-zoomOffset,pick(options.min,min-zoomOffset),dataMin);max=mathMin(min+maxZoom,pick(options.max,min+maxZoom),dataMax)}if(!categories&&!usePercentage&&!isLinked&&defined(min)&&defined(max)){length=(max-min)||1;if(!defined(options.min)&&!defined(userMin)&&minPadding&&(dataMin<0||!ignoreMinPadding)){min-=length*minPadding}if(!defined(options.max)&&!defined(userMax)&&maxPadding&&(dataMax>0||!ignoreMaxPadding)){max+=length*maxPadding}}if(min===max||min===undefined||max===undefined){tickInterval=1}else if(isLinked&&!tickIntervalOption&&tickPixelIntervalOption===linkedParent.options.tickPixelInterval){tickInterval=linkedParent.tickInterval}else{tickInterval=pick(tickIntervalOption,categories?1:(max-min)*tickPixelIntervalOption/(axisLength||1))}if(!isDatetimeAxis){magnitude=math.pow(10,mathFloor(math.log(tickInterval)/math.LN10));if(!defined(options.tickInterval)){tickInterval=normalizeTickInterval(tickInterval,null,magnitude,options)}}axis.tickInterval=tickInterval;minorTickInterval=options.minorTickInterval==='auto'&&tickInterval?tickInterval/5:options.minorTickInterval;if(isDatetimeAxis){tickPositions=getTimeTicks(tickInterval,min,max,options.startOfWeek);dateTimeLabelFormat=options.dateTimeLabelFormats[tickPositions.unit[0]]}else{setLinearTickPositions()}if(!isLinked){if(categories||padAxis){catPad=(categories?1:tickInterval)*0.5;if(categories||!defined(pick(options.min,userMin))){min-=catPad}if(categories||!defined(pick(options.max,userMax))){max+=catPad}}var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1];if(options.startOnTick){min=roundedMin}else if(min>roundedMin){tickPositions.shift()}if(options.endOnTick){max=roundedMax}else if(max<roundedMax){tickPositions.pop()}if(!maxTicks){maxTicks={x:0,y:0}}if(!isDatetimeAxis&&tickPositions.length>maxTicks[xOrY]&&options.alignTicks!==false){maxTicks[xOrY]=tickPositions.length}}}function adjustTickAmount(){if(maxTicks&&!isDatetimeAxis&&!categories&&!isLinked&&options.alignTicks!==false){var oldTickAmount=tickAmount,calculatedTickAmount=tickPositions.length;tickAmount=maxTicks[xOrY];if(calculatedTickAmount<tickAmount){while(tickPositions.length<tickAmount){tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+tickInterval))}transA*=(calculatedTickAmount-1)/(tickAmount-1);max=tickPositions[tickPositions.length-1]}if(defined(oldTickAmount)&&tickAmount!==oldTickAmount){axis.isDirty=true}}}function setScale(){var type,i;oldMin=min;oldMax=max;getSeriesExtremes();setTickPositions();oldTransA=transA;transA=axisLength/((max-min)||1);if(!isXAxis){for(type in stacks){for(i in stacks[type]){stacks[type][i].cum=stacks[type][i].total}}}if(!axis.isDirty){axis.isDirty=(min!==oldMin||max!==oldMax)}}function setExtremes(newMin,newMax,redraw,animation){var start=+new Date();redraw=pick(redraw,true);fireEvent(axis,'setExtremes',{min:newMin,max:newMax},function(){userMin=newMin;userMax=newMax;if(redraw){chart.redraw(animation)}})}function setAxisSize(){var offsetLeft=options.offsetLeft||0,offsetRight=options.offsetRight||0;axisLeft=pick(options.left,plotLeft+offsetLeft);axisTop=pick(options.top,plotTop);axisWidth=pick(options.width,plotWidth-offsetLeft+offsetRight);axisHeight=pick(options.height,plotHeight);axisBottom=chartHeight-axisHeight-axisTop;axisRight=chartWidth-axisWidth-axisLeft;axis.left=axisLeft;axis.top=axisTop;axisLength=horiz?axisWidth:axisHeight;transA=axisLength/((max-min)||1);transB=horiz?axisLeft:axisBottom}function getExtremes(){return{min:min,max:max,dataMin:dataMin,dataMax:dataMax,userMin:userMin,userMax:userMax}}function getThreshold(threshold){if(min>threshold||threshold===null){threshold=min}else if(max<threshold){threshold=max}return translate(threshold,0,1)}function addPlotBandOrLine(options){var obj=new PlotLineOrBand(options).render();plotLinesAndBands.push(obj);return obj}function getOffset(){var hasData=associatedSeries.length&&defined(min)&&defined(max),titleOffset=0,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,directionFactor=[-1,1,1,-1][side],n;if(!axisGroup){axisGroup=renderer.g('axis').attr({zIndex:7}).add();gridGroup=renderer.g('grid').attr({zIndex:1}).add()}labelOffset=0;if(hasData||isLinked){each(tickPositions,function(pos){if(!ticks[pos]){ticks[pos]=new Tick(pos)}else{ticks[pos].addLabel()}});each(tickPositions,function(pos){ticks[pos].attachLabel()});each(tickPositions,function(pos){ticks[pos].computeBBox()});each(tickPositions,function(pos){ticks[pos].updateTransformLabel()});each(tickPositions,function(pos){if(side===0||side===2||{1:'left',3:'right'}[side]===labelOptions.align){labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset)}});if(staggerLines){labelOffset+=(staggerLines-1)*16}}else{for(n in ticks){ticks[n].destroy();delete ticks[n]}}if(axisTitleOptions&&axisTitleOptions.text){if(!axis.axisTitle){axis.axisTitle=renderer.text(axisTitleOptions.text,0,0).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:'left',middle:'center',high:'right'}[axisTitleOptions.align]}).css(axisTitleOptions.style).add()}titleOffset=axis.axisTitle.getBBox()[horiz?'height':'width'];titleMargin=pick(axisTitleOptions.margin,horiz?5:10)}offset=directionFactor*pick(options.offset,axisOffset[side]);axisTitleMargin=labelOffset+(side!==2&&labelOffset&&directionFactor*options.labels[horiz?'y':'x'])+titleMargin;axisOffset[side]=mathMax(axisOffset[side],axisTitleMargin+titleOffset+directionFactor*offset)}function render(){var axisTitleOptions=options.title,stackLabelOptions=options.stackLabels,alternateGridColor=options.alternateGridColor,lineWidth=options.lineWidth,lineLeft,lineTop,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(oldMin)&&!isNaN(oldMin),hasData=associatedSeries.length&&defined(min)&&defined(max);if(hasData||isLinked){if(minorTickInterval&&!categories){var pos=min+(tickPositions[0]-min)%minorTickInterval;for(pos;pos<=max;pos+=minorTickInterval){if(!minorTicks[pos]){minorTicks[pos]=new Tick(pos,true)}if(slideInTicks&&minorTicks[pos].isNew){minorTicks[pos].render(null,true)}minorTicks[pos].isActive=true;minorTicks[pos].render()}}each(tickPositions,function(pos,i){if(!isLinked||(pos>=min&&pos<=max)){if(slideInTicks&&ticks[pos].isNew){ticks[pos].render(i,true)}ticks[pos].isActive=true;ticks[pos].render(i)}});if(alternateGridColor){each(tickPositions,function(pos,i){if(i%2===0&&pos<max){if(!alternateBands[pos]){alternateBands[pos]=new PlotLineOrBand()}alternateBands[pos].options={from:pos,to:tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]:max,color:alternateGridColor};alternateBands[pos].render();alternateBands[pos].isActive=true}})}if(!hasRendered){each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){plotLinesAndBands.push(new PlotLineOrBand(plotLineOptions).render())})}}each([ticks,minorTicks,alternateBands],function(coll){var pos;for(pos in coll){if(!coll[pos].isActive){coll[pos].destroy();delete coll[pos]}else{coll[pos].isActive=false}}});if(lineWidth){lineLeft=axisLeft+(opposite?axisWidth:0)+offset;lineTop=chartHeight-axisBottom-(opposite?axisHeight:0)+offset;linePath=renderer.crispLine([M,horiz?axisLeft:lineLeft,horiz?lineTop:axisTop,L,horiz?chartWidth-axisRight:lineLeft,horiz?lineTop:chartHeight-axisBottom],lineWidth);if(!axisLine){axisLine=renderer.path(linePath).attr({stroke:options.lineColor,'stroke-width':lineWidth,zIndex:7}).add()}else{axisLine.animate({d:linePath})}}if(axis.axisTitle){var margin=horiz?axisLeft:axisTop,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?axisTop+axisHeight:axisLeft)+(horiz?1:-1)*(opposite?-1:1)*axisTitleMargin+(side===2?fontSize:0);axis.axisTitle[hasRendered?'animate':'attr']({x:horiz?alongAxis:offAxis+(opposite?axisWidth:0)+offset+(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?axisHeight:0)+offset:alongAxis+(axisTitleOptions.y||0)})}if(stackLabelOptions&&stackLabelOptions.enabled){var stackKey,oneStack,stackCategory,stackTotalGroup=axis.stackTotalGroup;if(!stackTotalGroup){axis.stackTotalGroup=stackTotalGroup=renderer.g('stack-labels').attr({visibility:VISIBLE,zIndex:6}).translate(plotLeft,plotTop).add()}for(stackKey in stacks){oneStack=stacks[stackKey];for(stackCategory in oneStack){oneStack[stackCategory].render(stackTotalGroup)}}}axis.isDirty=false}function removePlotBandOrLine(id){var i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id===id){plotLinesAndBands[i].destroy()}}}function redraw(){if(tracker.resetTracker){tracker.resetTracker()}render();each(plotLinesAndBands,function(plotLine){plotLine.render()});each(associatedSeries,function(series){series.isDirty=true})}function setCategories(newCategories,doRedraw){axis.categories=categories=newCategories;each(associatedSeries,function(series){series.translate();series.setTooltipPoints(true)});axis.isDirty=true;if(pick(doRedraw,true)){chart.redraw()}}axes.push(axis);chart[isXAxis?'xAxis':'yAxis'].push(axis);if(inverted&&isXAxis&&reversed===UNDEFINED){reversed=true}extend(axis,{addPlotBand:addPlotBandOrLine,addPlotLine:addPlotBandOrLine,adjustTickAmount:adjustTickAmount,categories:categories,getExtremes:getExtremes,getPlotLinePath:getPlotLinePath,getThreshold:getThreshold,isXAxis:isXAxis,options:options,plotLinesAndBands:plotLinesAndBands,getOffset:getOffset,render:render,setAxisSize:setAxisSize,setCategories:setCategories,setExtremes:setExtremes,setScale:setScale,setTickPositions:setTickPositions,translate:translate,redraw:redraw,removePlotBand:removePlotBandOrLine,removePlotLine:removePlotBandOrLine,reversed:reversed,stacks:stacks});for(eventType in events){addEvent(axis,eventType,events[eventType])}setScale()}function Toolbar(chart){var buttons={};function add(id,text,title,fn){if(!buttons[id]){var button=renderer.text(text,0,0).css(options.toolbar.itemStyle).align({align:'right',x:-marginRight-20,y:plotTop+30}).on('click',fn).attr({align:'right',zIndex:20}).add();buttons[id]=button}}function remove(id){discardElement(buttons[id].element);buttons[id]=null}return{add:add,remove:remove}}function Tooltip(options){var currentSeries,borderWidth=options.borderWidth,crosshairsOptions=options.crosshairs,crosshairs=[],style=options.style,shared=options.shared,padding=pInt(style.padding),boxOffLeft=borderWidth+padding,tooltipIsHidden=true,boxWidth,boxHeight,currentX=0,currentY=0;style.padding=0;var label=renderer.label('',0,0).attr({padding:padding,fill:options.backgroundColor,'stroke-width':borderWidth,r:options.borderRadius,zIndex:8}).css(style).hide().add().shadow(1);function defaultFormatter(){var pThis=this,items=pThis.points||splat(pThis),xAxis=items[0].series.xAxis,x=pThis.x,isDateTime=xAxis&&xAxis.options.type==='datetime',useHeader=isString(x)||isDateTime,series=items[0].series,headerFormat=series.tooltipHeaderFormat||'%A, %b %e, %Y',s;s=useHeader?['<span style="font-size: 10px">'+(isDateTime?dateFormat('%A, %b %e, %Y',x):x)+'</span>']:[];each(items,function(item){series=item.series;s.push((series.tooltipFormatter&&series.tooltipFormatter(item))||item.point.tooltipFormatter(useHeader))});return s.join('<br/>')}function move(finalX,finalY){currentX=tooltipIsHidden?finalX:(2*currentX+finalX)/3;currentY=tooltipIsHidden?finalY:(currentY+finalY)/2;label.attr({x:currentX,y:currentY});if(mathAbs(finalX-currentX)>1||mathAbs(finalY-currentY)>1){tooltipTick=function(){move(finalX,finalY)}}else{tooltipTick=null}}function hide(){if(!tooltipIsHidden){var hoverPoints=chart.hoverPoints;label.hide();each(crosshairs,function(crosshair){if(crosshair){crosshair.hide()}});if(hoverPoints){each(hoverPoints,function(point){point.setState()})}chart.hoverPoints=null;tooltipIsHidden=true}}function refresh(point){var x,y,boxX,boxY,show,bBox,plotX,plotY,textConfig={},text,pointConfig=[],tooltipPos=point.tooltipPos,formatter=options.formatter||defaultFormatter,hoverPoints=chart.hoverPoints;if(shared&&!(point.series&&point.series.noSharedTooltip)){plotY=0;if(hoverPoints){each(hoverPoints,function(point){point.setState()})}chart.hoverPoints=point;each(point,function(item,i){item.setState(HOVER_STATE);plotY+=item.plotY;pointConfig.push(item.getLabelConfig())});plotX=point[0].plotX;plotY=mathRound(plotY)/point.length; textConfig={x:point[0].category};textConfig.points=pointConfig;point=point[0]}else{textConfig=point.getLabelConfig()}text=formatter.call(textConfig);currentSeries=point.series;plotX=pick(plotX,point.plotX);plotY=pick(plotY,point.plotY);x=mathRound(tooltipPos?tooltipPos[0]:(inverted?plotWidth-plotY:plotX));y=mathRound(tooltipPos?tooltipPos[1]:(inverted?plotHeight-plotX:plotY));show=shared||!point.series.isCartesian||isInsidePlot(x,y);if(text===false||!show){hide()}else{if(tooltipIsHidden){label.show();tooltipIsHidden=false}label.attr({text:text});bBox=label.getBBox();boxWidth=bBox.width;boxHeight=bBox.height;label.attr({stroke:options.borderColor||point.color||currentSeries.color||'#606060'});boxX=x-boxWidth+plotLeft-25;boxY=y-boxHeight+plotTop+10;if(boxX<7){boxX=7;boxY-=30}if(boxY<plotTop+5){boxY=plotTop+5}else if(boxY+boxHeight>chartHeight){boxY=chartHeight-boxHeight-5}move(mathRound(boxX-boxOffLeft),mathRound(boxY-boxOffLeft))}if(crosshairsOptions){crosshairsOptions=splat(crosshairsOptions);var path,i=crosshairsOptions.length,attribs,axis;while(i--){axis=point.series[i?'yAxis':'xAxis'];if(crosshairsOptions[i]&&axis){path=axis.getPlotLinePath(point[i?'y':'x'],1);if(crosshairs[i]){crosshairs[i].attr({d:path,visibility:VISIBLE})}else{attribs={'stroke-width':crosshairsOptions[i].width||1,stroke:crosshairsOptions[i].color||'#C0C0C0',zIndex:2};if(crosshairsOptions[i].dashStyle){attribs.dashstyle=crosshairsOptions[i].dashStyle}crosshairs[i]=renderer.path(path).attr(attribs).add()}}}}}return{shared:shared,refresh:refresh,hide:hide}}function MouseTracker(chart,options){var mouseDownX,mouseDownY,hasDragged,selectionMarker,zoomType=optionsChart.zoomType,zoomX=/x/.test(zoomType),zoomY=/y/.test(zoomType),zoomHor=(zoomX&&!inverted)||(zoomY&&inverted),zoomVert=(zoomY&&!inverted)||(zoomX&&inverted);function normalizeMouseEvent(e){var ePos,pageZoomFix=isWebKit&&doc.width/doc.documentElement.clientWidth-1,chartPosLeft,chartPosTop,chartX,chartY;e=e||win.event;if(!e.target){e.target=e.srcElement}if(e.originalEvent){e=e.originalEvent}ePos=e.touches?e.touches.item(0):e;if(e.type!=='mousemove'||win.opera||pageZoomFix){chartPosition=getPosition(container);chartPosLeft=chartPosition.left;chartPosTop=chartPosition.top}if(isIE){chartX=e.x;chartY=e.y}else{if(ePos.layerX===UNDEFINED){chartX=ePos.pageX-chartPosLeft;chartY=ePos.pageY-chartPosTop}else{chartX=e.layerX;chartY=e.layerY}}if(pageZoomFix){chartX+=mathRound((pageZoomFix+1)*chartPosLeft-chartPosLeft);chartY+=mathRound((pageZoomFix+1)*chartPosTop-chartPosTop)}return extend(e,{chartX:chartX,chartY:chartY})}function getMouseCoordinates(e){var coordinates={xAxis:[],yAxis:[]};each(axes,function(axis,i){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis;coordinates[isXAxis?'xAxis':'yAxis'].push({axis:axis,value:translate(isHorizontal?e.chartX-plotLeft:plotHeight-e.chartY+plotTop,true)})});return coordinates}function onmousemove(e){var point,points,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,j,distance=chartWidth,index=inverted?e.chartY:e.chartX-plotLeft;if(tooltip&&options.shared&&!(hoverSeries&&hoverSeries.noSharedTooltip)){points=[];i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].tooltipPoints.length&&series[j].options.enableMouseTracking!==false&&!series[j].noSharedTooltip){point=series[j].tooltipPoints[index];point._dist=mathAbs(index-point.plotX);distance=mathMin(distance,point._dist);points.push(point)}}i=points.length;while(i--){if(points[i]._dist>distance){points.splice(i,1)}}if(points.length&&(points[0].plotX!==hoverX)){tooltip.refresh(points);hoverX=points[0].plotX}}if(hoverSeries&&hoverSeries.tracker){point=hoverSeries.tooltipPoints[index];if(point&&point!==hoverPoint){point.onMouseOver()}}}function resetTracker(){var hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut()}if(hoverSeries){hoverSeries.onMouseOut()}if(tooltip){tooltip.hide()}hoverX=null}function drop(){if(selectionMarker){var selectionData={xAxis:[],yAxis:[]},selectionBox=selectionMarker.getBBox(),selectionLeft=selectionBox.x-plotLeft,selectionTop=selectionBox.y-plotTop;if(hasDragged){each(axes,function(axis,i){if(axis.options.zoomEnabled!==false){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis,selectionMin=translate(isHorizontal?selectionLeft:plotHeight-selectionTop-selectionBox.height,true,0,0,1),selectionMax=translate(isHorizontal?selectionLeft+selectionBox.width:plotHeight-selectionTop,true,0,0,1);selectionData[isXAxis?'xAxis':'yAxis'].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)})}});fireEvent(chart,'selection',selectionData,zoom)}selectionMarker=selectionMarker.destroy()}css(container,{cursor:'auto'});chart.mouseIsDown=mouseIsDown=hasDragged=false;removeEvent(doc,hasTouch?'touchend':'mouseup',drop)}function setDOMEvents(){var lastWasOutsidePlot=true;container.onmousedown=function(e){e=normalizeMouseEvent(e);chart.mouseIsDown=mouseIsDown=true;mouseDownX=e.chartX;mouseDownY=e.chartY;addEvent(doc,hasTouch?'touchend':'mouseup',drop)};var mouseMove=function(e){if(e&&e.touches&&e.touches.length>1){return}e=normalizeMouseEvent(e);if(!hasTouch){e.returnValue=false}var chartX=e.chartX,chartY=e.chartY,isOutsidePlot=!isInsidePlot(chartX-plotLeft,chartY-plotTop);if(hasTouch&&e.type==='touchstart'){if(attr(e.target,'isTracker')){if(!chart.runTrackerClick){e.preventDefault()}}else if(!runChartClick&&!isOutsidePlot){e.preventDefault()}}if(isOutsidePlot){if(!lastWasOutsidePlot){resetTracker()}if(chartX<plotLeft){chartX=plotLeft}else if(chartX>plotLeft+plotWidth){chartX=plotLeft+plotWidth}if(chartY<plotTop){chartY=plotTop}else if(chartY>plotTop+plotHeight){chartY=plotTop+plotHeight}}if(mouseIsDown&&e.type!=='touchstart'){hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+Math.pow(mouseDownY-chartY,2));if(hasDragged>10){var clickedInside=isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop);if(hasCartesianSeries&&(zoomX||zoomY)&&clickedInside){if(!selectionMarker){selectionMarker=renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:'rgba(69,114,167,0.25)',zIndex:7}).add()}}if(selectionMarker&&zoomHor){var xSize=chartX-mouseDownX;selectionMarker.attr({width:mathAbs(xSize),x:(xSize>0?0:xSize)+mouseDownX})}if(selectionMarker&&zoomVert){var ySize=chartY-mouseDownY;selectionMarker.attr({height:mathAbs(ySize),y:(ySize>0?0:ySize)+mouseDownY})}if(clickedInside&&!selectionMarker&&optionsChart.panning){var xAxis=chart.xAxis[0],extremes=xAxis.getExtremes(),dataMin=extremes.dataMin,dataMax=extremes.dataMax,newMin=xAxis.translate(mouseDownX-chartX,true),newMax=xAxis.translate(mouseDownX+plotWidth-chartX,true);if(newMin>dataMin&&newMax<dataMax){xAxis.setExtremes(newMin,newMax,true,false)}mouseDownX=chartX;css(container,{cursor:'move'})}}}else if(!isOutsidePlot){onmousemove(e)}lastWasOutsidePlot=isOutsidePlot;return isOutsidePlot||!hasCartesianSeries};container.onmousemove=mouseMove;addEvent(container,'mouseleave',resetTracker);container.ontouchstart=function(e){if(zoomX||zoomY){container.onmousedown(e)}mouseMove(e)};container.ontouchmove=mouseMove;container.ontouchend=function(){if(hasDragged){resetTracker()}};container.onclick=function(e){var hoverPoint=chart.hoverPoint;e=normalizeMouseEvent(e);e.cancelBubble=true;if(!hasDragged){if(hoverPoint&&attr(e.target,'isTracker')){var plotX=hoverPoint.plotX,plotY=hoverPoint.plotY;extend(hoverPoint,{pageX:chartPosition.left+plotLeft+(inverted?plotWidth-plotY:plotX),pageY:chartPosition.top+plotTop+(inverted?plotHeight-plotX:plotY)});fireEvent(hoverPoint.series,'click',extend(e,{point:hoverPoint}));hoverPoint.firePointEvent('click',e)}else{extend(e,getMouseCoordinates(e));if(isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)){fireEvent(chart,'click',e)}}}hasDragged=false}}placeTrackerGroup=function(){if(!trackerGroup){chart.trackerGroup=trackerGroup=renderer.g('tracker').attr({zIndex:9}).add()}else{trackerGroup.translate(plotLeft,plotTop);if(inverted){trackerGroup.attr({width:chart.plotWidth,height:chart.plotHeight}).invert()}}};placeTrackerGroup();if(options.enabled){chart.tooltip=tooltip=Tooltip(options)}setDOMEvents();tooltipInterval=setInterval(function(){if(tooltipTick){tooltipTick()}},32);extend(this,{zoomX:zoomX,zoomY:zoomY,resetTracker:resetTracker,normalizeMouseEvent:normalizeMouseEvent})}var Legend=function(chart){var options=chart.options.legend;if(!options.enabled){return}var horizontal=options.layout==='horizontal',symbolWidth=options.symbolWidth,symbolPadding=options.symbolPadding,allItems,style=options.style,itemStyle=options.itemStyle,itemHoverStyle=options.itemHoverStyle,itemHiddenStyle=options.itemHiddenStyle,padding=pInt(style.padding),rightPadding=20,y=18,initialItemX=4+padding+symbolWidth+symbolPadding,itemX,itemY,lastItemY,itemHeight=0,box,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor,legendGroup,offsetWidth,widthOption=options.width,series=chart.series,reversedLegend=options.reversed;function colorizeItem(item,visible){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?item.color:hiddenColor;if(legendItem){legendItem.css({fill:textColor})}if(legendLine){legendLine.attr({stroke:symbolColor})}if(legendSymbol){legendSymbol.attr({stroke:symbolColor,fill:symbolColor})}}function positionItem(item,itemX,itemY){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,checkbox=item.checkbox;if(legendItem){legendItem.attr({x:itemX,y:itemY})}if(legendLine){legendLine.translate(itemX,itemY-4)}if(legendSymbol){legendSymbol.attr({x:itemX+legendSymbol.xOff,y:itemY+legendSymbol.yOff})}if(checkbox){checkbox.x=itemX;checkbox.y=itemY}}function destroyItem(item){var checkbox=item.checkbox;each(['legendItem','legendLine','legendSymbol'],function(key){if(item[key]){item[key].destroy()}});if(checkbox){discardElement(item.checkbox)}}function positionCheckboxes(){each(allItems,function(item){var checkbox=item.checkbox,alignAttr=legendGroup.alignAttr;if(checkbox){css(checkbox,{left:(alignAttr.translateX+item.legendItemWidth+checkbox.x-40)+PX,top:(alignAttr.translateY+checkbox.y-11)+PX})}})}function renderItem(item){var bBox,itemWidth,legendSymbol,symbolX,symbolY,attribs,simpleSymbol,radius,li=item.legendItem,series=item.series||item,i=allItems.length,itemOptions=series.options,strokeWidth=(itemOptions&&itemOptions.borderWidth)||0;if(!li){simpleSymbol=/^(bar|pie|area|column)$/.test(series.type);item.legendItem=li=renderer.text(options.labelFormatter.call(item),0,0).css(item.visible?itemStyle:itemHiddenStyle).on('mouseover',function(){item.setState(HOVER_STATE);li.css(itemHoverStyle)}).on('mouseout',function(){li.css(item.visible?itemStyle:itemHiddenStyle);item.setState()}).on('click',function(event){var strLegendItemClick='legendItemClick',fnLegendItemClick=function(){item.setVisible()};if(item.firePointEvent){item.firePointEvent(strLegendItemClick,null,fnLegendItemClick)}else{fireEvent(item,strLegendItemClick,null,fnLegendItemClick)}}).attr({zIndex:2}).add(legendGroup);if(!simpleSymbol&&itemOptions&&itemOptions.lineWidth){var attrs={'stroke-width':itemOptions.lineWidth,zIndex:2};if(itemOptions.dashStyle){attrs.dashstyle=itemOptions.dashStyle}item.legendLine=renderer.path([M,-symbolWidth-symbolPadding,0,L,-symbolPadding,0]).attr(attrs).add(legendGroup)}if(simpleSymbol){legendSymbol=renderer.rect((symbolX=-symbolWidth-symbolPadding),(symbolY=-11),symbolWidth,12,2).attr({zIndex:3}).add(legendGroup)}else if(itemOptions&&itemOptions.marker&&itemOptions.marker.enabled){radius=itemOptions.marker.radius;legendSymbol=renderer.symbol(item.symbol,(symbolX=-symbolWidth/2-symbolPadding-radius),(symbolY=-4-radius),2*radius,2*radius).attr(item.pointAttr[NORMAL_STATE]).attr({zIndex:3}).add(legendGroup)}if(legendSymbol){legendSymbol.xOff=symbolX+(strokeWidth%2/2);legendSymbol.yOff=symbolY+(strokeWidth%2/2)}item.legendSymbol=legendSymbol;colorizeItem(item,item.visible);if(itemOptions&&itemOptions.showCheckbox){item.checkbox=createElement('input',{type:'checkbox',checked:item.selected,defaultChecked:item.selected},options.itemCheckboxStyle,container);addEvent(item.checkbox,'click',function(event){var target=event.target;fireEvent(item,'checkboxClick',{checked:target.checked},function(){item.select()})})}}bBox=li.getBBox();itemWidth=item.legendItemWidth=options.itemWidth||symbolWidth+symbolPadding+bBox.width+rightPadding;itemHeight=bBox.height;if(horizontal&&itemX-initialItemX+itemWidth>(widthOption||(chartWidth-2*padding-initialItemX))){itemX=initialItemX;itemY+=itemHeight}lastItemY=itemY;positionItem(item,itemX,itemY);if(horizontal){itemX+=itemWidth}else{itemY+=itemHeight}offsetWidth=widthOption||mathMax(horizontal?itemX-initialItemX:itemWidth,offsetWidth)}function renderLegend(){itemX=initialItemX;itemY=y;offsetWidth=0;lastItemY=0;if(!legendGroup){legendGroup=renderer.g('legend').attr({zIndex:7}).add()}allItems=[];each(series,function(serie){var seriesOptions=serie.options;if(!seriesOptions.showInLegend){return}allItems=allItems.concat(seriesOptions.legendType==='point'?serie.data:serie)});allItems.sort(function(a,b){return(a.options.legendIndex||0)-(b.options.legendIndex||0)});if(reversedLegend){allItems.reverse()}each(allItems,renderItem);legendWidth=widthOption||offsetWidth;legendHeight=lastItemY-y+itemHeight;if(legendBorderWidth||legendBackgroundColor){legendWidth+=2*padding;legendHeight+=2*padding;if(!box){box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,'stroke-width':legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow)}else if(legendWidth>0&&legendHeight>0){box.animate(box.crisp(null,null,null,legendWidth,legendHeight))}box[allItems.length?'show':'hide']()}var props=['left','right','top','bottom'],prop,i=4;while(i--){prop=props[i];if(style[prop]&&style[prop]!=='auto'){options[i<2?'align':'verticalAlign']=prop;options[i<2?'x':'y']=pInt(style[prop])*(i%2?-1:1)}}legendGroup.align(extend(options,{width:legendWidth,height:legendHeight}),true,spacingBox);if(!isResizing){positionCheckboxes()}}renderLegend();addEvent(chart,'endResize',positionCheckboxes);return{colorizeItem:colorizeItem,destroyItem:destroyItem,renderLegend:renderLegend}};function initSeries(options){var type=options.type||optionsChart.type||optionsChart.defaultSeriesType,typeClass=seriesTypes[type],serie,hasRendered=chart.hasRendered;if(hasRendered){if(inverted&&type==='column'){typeClass=seriesTypes.bar}else if(!inverted&&type==='bar'){typeClass=seriesTypes.column}}serie=new typeClass();serie.init(chart,options);if(!hasRendered&&serie.inverted){inverted=true}if(serie.isCartesian){hasCartesianSeries=serie.isCartesian}series.push(serie);return serie}function addSeries(options,redraw,animation){var series;if(options){setAnimation(animation,chart);redraw=pick(redraw,true);fireEvent(chart,'addSeries',{options:options},function(){series=initSeries(options);series.isDirty=true;chart.isDirtyLegend=true;if(redraw){chart.redraw()}})}return series}isInsidePlot=function(x,y){return x>=0&&x<=plotWidth&&y>=0&&y<=plotHeight};function adjustTickAmounts(){if(optionsChart.alignTicks!==false){each(axes,function(axis){axis.adjustTickAmount()})}maxTicks=null}function redraw(animation){var redrawLegend=chart.isDirtyLegend,hasStackedSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,clipRect=chart.clipRect,serie;setAnimation(animation,chart);while(i--){serie=series[i];if(serie.isDirty&&serie.options.stacking){hasStackedSeries=true;break}}if(hasStackedSeries){i=seriesLength;while(i--){serie=series[i];if(serie.options.stacking){serie.isDirty=true}}}each(series,function(serie){if(serie.isDirty){if(serie.options.legendType==='point'){redrawLegend=true}}});if(redrawLegend&&legend.renderLegend){legend.renderLegend();chart.isDirtyLegend=false}if(hasCartesianSeries){if(!isResizing){maxTicks=null;each(axes,function(axis){axis.leastDistance=UNDEFINED;axis.setScale()})}adjustTickAmounts();getMargins();each(axes,function(axis){if(axis.isDirty||isDirtyBox){axis.redraw();isDirtyBox=true}})}if(isDirtyBox){drawChartBox();placeTrackerGroup();if(clipRect){stop(clipRect);clipRect.animate({width:chart.plotSizeX,height:chart.plotSizeY})}}each(series,function(serie){if(serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)){serie.redraw()}});if(tracker&&tracker.resetTracker){tracker.resetTracker()}fireEvent(chart,'redraw')}function showLoading(str){var loadingOptions=options.loading;if(!loadingDiv){loadingDiv=createElement(DIV,{className:'highcharts-loading'},extend(loadingOptions.style,{left:plotLeft+PX,top:plotTop+PX,width:plotWidth+PX,height:plotHeight+PX,zIndex:10,display:NONE}),container);loadingSpan=createElement('span',null,loadingOptions.labelStyle,loadingDiv)}loadingSpan.innerHTML=str||options.lang.loading;if(!loadingShown){css(loadingDiv,{opacity:0,display:''});animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration});loadingShown=true}}function hideLoading(){animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration,complete:function(){css(loadingDiv,{display:NONE})}});loadingShown=false}function get(id){var i,j,points;for(i=0;i<axes.length;i++){if(axes[i].options.id===id){return axes[i]}}for(i=0;i<series.length;i++){if(series[i].options.id===id){return series[i]}}for(i=0;i<series.length;i++){points=series[i].points;for(j=0;j<points.length;j++){if(points[j].id===id){return points[j]}}}return null}function getAxes(){var xAxisOptions=options.xAxis||{},yAxisOptions=options.yAxis||{},optionsArray,axis;xAxisOptions=splat(xAxisOptions);each(xAxisOptions,function(axis,i){axis.index=i;axis.isX=true});yAxisOptions=splat(yAxisOptions);each(yAxisOptions,function(axis,i){axis.index=i});optionsArray=xAxisOptions.concat(yAxisOptions);each(optionsArray,function(axisOptions){axis=new Axis(axisOptions)});adjustTickAmounts()}function getSelectedPoints(){var points=[];each(series,function(serie){points=points.concat(grep(serie.points,function(point){return point.selected}))});return points}function getSelectedSeries(){return grep(series,function(serie){return serie.selected})}zoomOut=function(){fireEvent(chart,'selection',{resetSelection:true},zoom);chart.toolbar.remove('zoom')};zoom=function(event){var lang=defaultOptions.lang,animate=chart.pointCount<100;if(chart.resetZoomEnabled!==false){chart.toolbar.add('zoom',lang.resetZoom,lang.resetZoomTitle,zoomOut)}if(!event||event.resetSelection){each(axes,function(axis){if(axis.options.zoomEnabled!==false){axis.setExtremes(null,null,false,animate)}})}else{each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis;if(chart.tracker[axis.isXAxis?'zoomX':'zoomY']){axis.setExtremes(axisData.min,axisData.max,false,animate)}})}redraw()};function setTitle(titleOptions,subtitleOptions){chartTitleOptions=merge(options.title,titleOptions);chartSubtitleOptions=merge(options.subtitle,subtitleOptions);each([['title',titleOptions,chartTitleOptions],['subtitle',subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];if(title&&titleOptions){title.destroy();title=null}if(chartTitleOptions&&chartTitleOptions.text&&!title){chart[name]=renderer.text(chartTitleOptions.text,0,0).attr({align:chartTitleOptions.align,'class':'highcharts-'+name,zIndex:1}).css(chartTitleOptions.style).add().align(chartTitleOptions,false,spacingBox)}})}function getChartSize(){containerWidth=(renderToClone||renderTo).offsetWidth;containerHeight=(renderToClone||renderTo).offsetHeight;chart.chartWidth=chartWidth=optionsChart.width||containerWidth||600;chart.chartHeight=chartHeight=optionsChart.height||(containerHeight>19?containerHeight:400)}function getContainer(){renderTo=optionsChart.renderTo;containerId=PREFIX+idCounter++;if(isString(renderTo)){renderTo=doc.getElementById(renderTo)}renderTo.innerHTML='';if(!renderTo.offsetWidth){renderToClone=renderTo.cloneNode(0);css(renderToClone,{position:ABSOLUTE,top:'-9999px',display:''});doc.body.appendChild(renderToClone)}getChartSize();chart.container=container=createElement(DIV,{className:'highcharts-container'+(optionsChart.className?' '+optionsChart.className:''),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:'left'},optionsChart.style),renderToClone||renderTo);chart.renderer=renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,true):new Renderer(container,chartWidth,chartHeight);var subPixelFix,rect;if(isFirefox&&container.getBoundingClientRect){subPixelFix=function(){css(container,{left:0,top:0});rect=container.getBoundingClientRect();css(container,{left:(-(rect.left-pInt(rect.left)))+PX,top:(-(rect.top-pInt(rect.top)))+PX})};subPixelFix();addEvent(win,'resize',subPixelFix);addEvent(chart,'destroy',function(){removeEvent(win,'resize',subPixelFix)})}}getMargins=function(){var legendOptions=options.legend,legendMargin=pick(legendOptions.margin,10),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset;resetMargins();if((chart.title||chart.subtitle)&&!defined(optionsMarginTop)){titleOffset=mathMax((chart.title&&!chartTitleOptions.floating&&!chartTitleOptions.verticalAlign&&chartTitleOptions.y)||0,(chart.subtitle&&!chartSubtitleOptions.floating&&!chartSubtitleOptions.verticalAlign&&chartSubtitleOptions.y)||0);if(titleOffset){plotTop=mathMax(plotTop,titleOffset+pick(chartTitleOptions.margin,15)+spacingTop)}}if(legendOptions.enabled&&!legendOptions.floating){if(align==='right'){if(!defined(optionsMarginRight)){marginRight=mathMax(marginRight,legendWidth-legendX+legendMargin+spacingRight)}}else if(align==='left'){if(!defined(optionsMarginLeft)){plotLeft=mathMax(plotLeft,legendWidth+legendX+legendMargin+spacingLeft)}}else if(verticalAlign==='top'){if(!defined(optionsMarginTop)){plotTop=mathMax(plotTop,legendHeight+legendY+legendMargin+spacingTop)}}else if(verticalAlign==='bottom'){if(!defined(optionsMarginBottom)){marginBottom=mathMax(marginBottom,legendHeight-legendY+legendMargin+spacingBottom)}}}if(chart.extraBottomMargin){marginBottom+=chart.extraBottomMargin}if(chart.extraTopMargin){plotTop+=chart.extraTopMargin}if(hasCartesianSeries){each(axes,function(axis){axis.getOffset()})}if(!defined(optionsMarginLeft)){plotLeft+=axisOffset[3]}if(!defined(optionsMarginTop)){plotTop+=axisOffset[0]}if(!defined(optionsMarginBottom)){marginBottom+=axisOffset[2]}if(!defined(optionsMarginRight)){marginRight+=axisOffset[1]}setChartSize()};function initReflow(){var reflowTimeout;function reflow(){var width=optionsChart.width||renderTo.offsetWidth,height=optionsChart.height||renderTo.offsetHeight;if(width&&height){if(width!==containerWidth||height!==containerHeight){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(function(){resize(width,height,false)},100)}containerWidth=width;containerHeight=height}}addEvent(win,'resize',reflow);addEvent(chart,'destroy',function(){removeEvent(win,'resize',reflow)})}resize=function(width,height,animation){var chartTitle=chart.title,chartSubtitle=chart.subtitle;isResizing+=1;setAnimation(animation,chart);oldChartHeight=chartHeight;oldChartWidth=chartWidth;if(defined(width)){chart.chartWidth=chartWidth=mathRound(width)}if(defined(height)){chart.chartHeight=chartHeight=mathRound(height)}css(container,{width:chartWidth+PX,height:chartHeight+PX});renderer.setSize(chartWidth,chartHeight,animation);plotWidth=chartWidth-plotLeft-marginRight;plotHeight=chartHeight-plotTop-marginBottom;maxTicks=null;each(axes,function(axis){axis.isDirty=true;axis.setScale()});each(series,function(serie){serie.isDirty=true});chart.isDirtyLegend=true;chart.isDirtyBox=true;getMargins();if(chartTitle){chartTitle.align(null,null,spacingBox)}if(chartSubtitle){chartSubtitle.align(null,null,spacingBox)}redraw(animation);oldChartHeight=null;fireEvent(chart,'resize');setTimeout(function(){fireEvent(chart,'endResize',null,function(){isResizing-=1})},(globalAnimation&&globalAnimation.duration)||500)};setChartSize=function(){chart.plotLeft=plotLeft=mathRound(plotLeft);chart.plotTop=plotTop=mathRound(plotTop);chart.plotWidth=plotWidth=mathRound(chartWidth-plotLeft-marginRight);chart.plotHeight=plotHeight=mathRound(chartHeight-plotTop-marginBottom);chart.plotSizeX=inverted?plotHeight:plotWidth;chart.plotSizeY=inverted?plotWidth:plotHeight;spacingBox={x:spacingLeft,y:spacingTop,width:chartWidth-spacingLeft-spacingRight,height:chartHeight-spacingTop-spacingBottom};each(axes,function(axis){axis.setAxisSize()})};resetMargins=function(){plotTop=pick(optionsMarginTop,spacingTop);marginRight=pick(optionsMarginRight,spacingRight);marginBottom=pick(optionsMarginBottom,spacingBottom);plotLeft=pick(optionsMarginLeft,spacingLeft);axisOffset=[0,0,0,0]};drawChartBox=function(){var chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,mgn,plotSize={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight};mgn=chartBorderWidth+(optionsChart.shadow?8:0);if(chartBorderWidth||chartBackgroundColor){if(!chartBackground){chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr({stroke:optionsChart.borderColor,'stroke-width':chartBorderWidth,fill:chartBackgroundColor||NONE}).add().shadow(optionsChart.shadow)}else{chartBackground.animate(chartBackground.crisp(null,null,null,chartWidth-mgn,chartHeight-mgn))}}if(plotBackgroundColor){if(!plotBackground){plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow)}else{plotBackground.animate(plotSize)}}if(plotBackgroundImage){if(!plotBGImage){plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add()}else{plotBGImage.animate(plotSize)}}if(optionsChart.plotBorderWidth){if(!plotBorder){plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,optionsChart.plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,'stroke-width':optionsChart.plotBorderWidth,zIndex:4}).add()}else{plotBorder.animate(plotBorder.crisp(null,plotLeft,plotTop,plotWidth,plotHeight))}}chart.isDirtyBox=false};function render(){var labels=options.labels,credits=options.credits,creditsHref;setTitle();legend=chart.legend=new Legend(chart);getMargins();each(axes,function(axis){axis.setTickPositions(true)});adjustTickAmounts();getMargins();drawChartBox();if(hasCartesianSeries){each(axes,function(axis){axis.render()})}if(!chart.seriesGroup){chart.seriesGroup=renderer.g('series-group').attr({zIndex:3}).add()}each(series,function(serie){serie.translate();serie.setTooltipPoints();serie.render()});if(labels.items){each(labels.items,function(){var style=extend(labels.style,this.style),x=pInt(style.left)+plotLeft,y=pInt(style.top)+plotTop+12;delete style.left;delete style.top;renderer.text(this.html,x,y).attr({zIndex:2}).css(style).add()})}if(!chart.toolbar){chart.toolbar=Toolbar(chart)}if(credits.enabled&&!chart.credits){creditsHref=credits.href;renderer.text(credits.text,0,0).on('click',function(){if(creditsHref){location.href=creditsHref}}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position)}placeTrackerGroup();chart.hasRendered=true;if(renderToClone){renderTo.appendChild(container);discardElement(renderToClone)}}function destroy(){var start=+new Date();var i=series.length,parentNode=container&&container.parentNode;fireEvent(chart,'destroy');removeEvent(win,'unload',destroy);removeEvent(chart);each(axes,function(axis){removeEvent(axis)});while(i--){series[i].destroy()}if(container){container.innerHTML='';removeEvent(container);if(parentNode){parentNode.removeChild(container)}container=null}if(renderer){renderer.alignedObjects=null}clearInterval(tooltipInterval);for(i in chart){delete chart[i]}}function firstRender(){var ONREADYSTATECHANGE='onreadystatechange',COMPLETE='complete';if(!hasSVG&&win==win.top&&doc.readyState!==COMPLETE){doc.attachEvent(ONREADYSTATECHANGE,function(){doc.detachEvent(ONREADYSTATECHANGE,firstRender);if(doc.readyState===COMPLETE){firstRender()}});return}getContainer();fireEvent(chart,'init');if(RangeSelector&&options.rangeSelector.enabled){chart.rangeSelector=new RangeSelector(chart)}resetMargins();setChartSize();each(options.series||[],function(serieOptions){initSeries(serieOptions)});chart.inverted=inverted=pick(inverted,options.chart.inverted);getAxes();if(Scroller&&options.navigator.enabled||options.scrollbar.enabled){chart.scroller=new Scroller(chart)}chart.render=render;chart.tracker=tracker=new MouseTracker(chart,options.tooltip);render();if(callback){callback.apply(chart,[chart])}each(chart.callbacks,function(fn){fn.apply(chart,[chart])});fireEvent(chart,'load')}addEvent(win,'unload',destroy);if(optionsChart.reflow!==false){addEvent(chart,'load',initReflow)}if(chartEvents){for(eventType in chartEvents){addEvent(chart,eventType,chartEvents[eventType])}}chart.options=options;chart.series=series;chart.xAxis=[];chart.yAxis=[];chart.addSeries=addSeries;chart.animation=pick(optionsChart.animation,true);chart.Axis=Axis;chart.destroy=destroy;chart.get=get;chart.getSelectedPoints=getSelectedPoints;chart.getSelectedSeries=getSelectedSeries;chart.hideLoading=hideLoading;chart.initSeries=initSeries;chart.isInsidePlot=isInsidePlot;chart.redraw=redraw;chart.setSize=resize;chart.setTitle=setTitle;chart.showLoading=showLoading;chart.pointCount=0;chart.counters=new ChartCounters();firstRender()}Chart.prototype.callbacks=[];var Point=function(){};Point.prototype={init:function(series,options,x){var point=this,counters=series.chart.counters,defaultColors;point.series=series;point.applyOptions(options,x);point.pointAttr={};if(series.options.colorByPoint){defaultColors=series.chart.options.colors;if(!point.options){point.options={}}point.color=point.options.color=point.color||defaultColors[counters.color++];counters.wrapColor(defaultColors.length)}series.chart.pointCount++;return point},applyOptions:function(options,x){var point=this,series=point.series,optionsType=typeof options;point.config=options;if(optionsType==='number'||options===null){point.y=options}else if(typeof options[0]==='number'){point.x=options[0];point.y=options[1]}else if(optionsType==='object'&&typeof options.length!=='number'){extend(point,options);point.options=options}else if(typeof options[0]==='string'){point.name=options[0];point.y=options[1]}if(point.x===UNDEFINED){point.x=x===UNDEFINED?series.autoIncrement():x}},destroy:function(){var point=this,series=point.series,prop;series.chart.pointCount--;if(point===series.chart.hoverPoint){point.onMouseOut()}series.chart.hoverPoints=null;if(point.graphic){removeEvent(point);point.destroyElements()}if(point.legendItem){point.series.chart.legend.destroyItem(point)}for(prop in point){point[prop]=null}},destroyElements:function(){var point=this,props=['graphic','tracker','dataLabel','group','connector'],prop,i=5;while(i--){prop=props[i];if(point[prop]){point[prop]=point[prop].destroy()}}},getLabelConfig:function(){var point=this;return{x:point.category,y:point.y,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal}},select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;point.selected=selected=pick(selected,!point.selected);point.firePointEvent(selected?'select':'unselect');point.setState(selected&&SELECT_STATE);if(!accumulate){each(chart.getSelectedPoints(),function(loopPoint){if(loopPoint.selected&&loopPoint!==point){loopPoint.selected=false;loopPoint.setState(NORMAL_STATE);loopPoint.firePointEvent('unselect')}})}},onMouseOver:function(){var point=this,series=point.series,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint&&hoverPoint!==point){hoverPoint.onMouseOut()}point.firePointEvent('mouseOver');if(tooltip&&(!tooltip.shared||series.noSharedTooltip)){tooltip.refresh(point)}point.setState(HOVER_STATE);chart.hoverPoint=point},onMouseOut:function(){var point=this;point.firePointEvent('mouseOut');point.setState();point.series.chart.hoverPoint=null},tooltipFormatter:function(useHeader){var point=this,series=point.series;return['<span style="color:'+series.color+'">',(point.name||series.name),'</span>: ',(!useHeader?('<b>x = '+(point.name||point.x)+',</b> '):''),'<b>',(!useHeader?'y = ':''),point.y,'</b>'].join('')},update:function(options,redraw,animation){var point=this,series=point.series,dataLabel=point.dataLabel,graphic=point.graphic,i,data=series.data,dataLength=data.length,chart=series.chart;redraw=pick(redraw,true);point.firePointEvent('update',{options:options},function(){point.applyOptions(options);if(isObject(options)){series.getAttribs();if(graphic){graphic.attr(point.pointAttr[series.state])}}for(i=0;i<dataLength;i++){if(data[i]===point){series.xData[i]=point.x;series.yData[i]=point.y;series.options.data[i]=options;break}}series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw(animation)}})},remove:function(redraw,animation){var point=this,series=point.series,chart=series.chart,i,data=series.data,dataLength=data.length;setAnimation(animation,chart);redraw=pick(redraw,true);point.firePointEvent('remove',null,function(){for(i=0;i<dataLength;i++){if(data[i]===point){data.splice(i,1);series.options.data.splice(i,1);series.xData.splice(i,1);series.yData.splice(i,1);break}}point.destroy();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw()}})},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;if(seriesOptions.point.events[eventType]||(point.options&&point.options.events&&point.options.events[eventType])){this.importEvents()}if(eventType==='click'&&seriesOptions.allowPointSelect){defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey)}}fireEvent(this,eventType,eventArgs,defaultFunction)},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events){addEvent(point,eventType,events[eventType])}this.hasImportedEvents=true}},setState:function(state){var point=this,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,stateMarkerGraphic=series.stateMarkerGraphic,chart=series.chart,radius,pointAttr=point.pointAttr;state=state||NORMAL_STATE;if(state===point.state||(point.selected&&state!==SELECT_STATE)||(stateOptions[state]&&stateOptions[state].enabled===false)||(state&&(stateDisabled||(normalDisabled&&!markerStateOptions.enabled)))){return}if(point.graphic){point.graphic.attr(pointAttr[state])}else{if(state){if(!stateMarkerGraphic){radius=markerOptions.radius;series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.symbol(series.symbol,-radius,-radius,2*radius,2*radius).attr(pointAttr[state]).add(series.group)}stateMarkerGraphic.translate(point.plotX,point.plotY)}if(stateMarkerGraphic){stateMarkerGraphic[state?'show':'hide']()}}point.state=state}};var Series=function(){};Series.prototype={isCartesian:true,type:'line',pointClass:Point,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor',r:'radius'},init:function(chart,options){var series=this,eventType,events,index=chart.series.length;series.chart=chart;options=series.setOptions(options);extend(series,{index:index,options:options,name:options.name||'Series '+(index+1),state:NORMAL_STATE,pointAttr:{},visible:options.visible!==false,selected:options.selected===true});events=options.events;for(eventType in events){addEvent(series,eventType,events[eventType])}if((events&&events.click)||(options.point&&options.point.events&&options.point.events.click)||options.allowPointSelect){chart.runTrackerClick=true}series.getColor();series.getSymbol();series.setData(options.data,false)},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;xIncrement=pick(xIncrement,options.pointStart,0);series.pointInterval=pick(series.pointInterval,options.pointInterval,1);series.xIncrement=xIncrement+series.pointInterval;return xIncrement},getSegments:function(){var lastNull=-1,segments=[],points=this.points;var start=+new Date();each(points,function(point,i){if(point.y===null){if(i>lastNull+1){segments.push(points.slice(lastNull+1,i))}lastNull=i}else if(i===points.length-1){segments.push(points.slice(lastNull+1,i+1))}});this.segments=segments},setOptions:function(itemOptions){var plotOptions=this.chart.options.plotOptions,data=itemOptions.data,options;itemOptions.data=null;options=merge(plotOptions[this.type],plotOptions.series,itemOptions);options.data=data;return options},getColor:function(){var defaultColors=this.chart.options.colors,counters=this.chart.counters;this.color=this.options.color||defaultColors[counters.color++]||'#0000ff';counters.wrapColor(defaultColors.length)},getSymbol:function(){var defaultSymbols=this.chart.options.symbols,counters=this.chart.counters;this.symbol=this.options.marker.symbol||defaultSymbols[counters.symbol++];counters.wrapSymbol(defaultSymbols.length)},addPoint:function(options,redraw,shift,animation){var series=this,data=series.data,graph=series.graph,area=series.area,chart=series.chart,xData=series.xData,yData=series.yData,currentShift=graph.shift||0,dataOptions=series.options.data,point;setAnimation(animation,chart);if(graph&&shift){graph.shift=currentShift+1}if(area){area.shift=currentShift+1;area.isArea=true}redraw=pick(redraw,true);point={series:series};series.pointClass.prototype.applyOptions.apply(point,[options]);xData.push(point.x);yData.push(point.y);dataOptions.push(options);if(shift){if(data[0]){data[0].remove(false)}else{data.shift();xData.shift();yData.shift();dataOptions.shift()}}series.getAttribs();series.isDirty=true;series.isDirtyData=true;if(redraw){chart.redraw()}},setData:function(data,redraw){var series=this,oldData=series.points,options=series.options,initialColor=series.initialColor,chart=series.chart,i;series.xIncrement=null;if(defined(initialColor)){chart.counters.color=initialColor}var xData=[],yData=[],dataLength=data.length,turboThreshold=options.turboThreshold||1000,pt;if(dataLength>turboThreshold){if(isNumber(data[0])){var x=pick(options.pointStart,0),pointInterval=pick(options.pointInterval,1);for(i=0;i<dataLength;i++){xData[i]=x;yData[i]=data[i];x+=pointInterval}series.xIncrement=x}else if(data[0].constructor===Array){if(series.valueCount===4){for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt.slice(1,5)}}else{for(i=0;i<dataLength;i++){pt=data[i];xData[i]=pt[0];yData[i]=pt[1]}}}}else{for(i=0;i<dataLength;i++){pt={series:series};series.pointClass.prototype.applyOptions.apply(pt,[data[i]]);xData[i]=pt.x;yData[i]=pt.y}}series.data=null;series.options.data=data;series.xData=xData;series.yData=yData;i=(oldData&&oldData.length)||0;while(i--){oldData[i].destroy()}series.isDirty=series.isDirtyData=chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw(false)}},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,true);if(!series.isRemoving){series.isRemoving=true;fireEvent(series,'remove',null,function(){series.destroy();chart.isDirtyLegend=chart.isDirtyBox=true;if(redraw){chart.redraw(animation)}})}series.isRemoving=false},processData:function(){var series=this,processedXData=series.xData,processedYData=series.yData,dataLength=processedXData.length,cropStart=0,i,cropThreshold=series.options.cropThreshold;if(!cropThreshold||dataLength>cropThreshold){var extremes=series.xAxis.getExtremes(),min=extremes.min,max=extremes.max,cropEnd=dataLength-1,point;if(processedXData[0]<min||processedXData[cropEnd]>max){for(i=0;i<dataLength;i++){if(processedXData[i]>=min){cropStart=mathMax(0,i-1);break}}for(i;i<dataLength;i++){if(processedXData[i]>max){cropEnd=i+1;break}}processedXData=processedXData.slice(cropStart,cropEnd);processedYData=processedYData.slice(cropStart,cropEnd)}}series.cropStart=cropStart;series.processedXData=processedXData;series.processedYData=processedYData},generatePoints:function(){var series=this,options=series.options,dataOptions=options.data,hasProcessedData=series.prosessedXData!==series.xData,data=series.data,dataLength,processedXData=series.processedXData,processedYData=series.processedYData,pointClass=series.pointClass,processedDataLength=processedXData.length,cropStart=series.cropStart||0,cursor,hasGroupedData=series.hasGroupedData,point,points=[],i;if(!data&&!hasGroupedData){var arr=[];arr.length=dataOptions.length;data=series.data=arr}for(i=0;i<processedDataLength;i++){cursor=cropStart+i;if(!hasGroupedData){if(data[cursor]){point=data[cursor]}else{data[cursor]=point=(new pointClass()).init(series,dataOptions[cursor],processedXData[i])}points[i]=point}else{points[i]=(new pointClass()).init(series,[processedXData[i]].concat(splat(processedYData[i])))}}if(data&&processedDataLength!==(dataLength=data.length)){for(i=0;i<dataLength;i++){if(i===cropStart&&!hasGroupedData){i+=processedDataLength}if(data[i]){data[i].destroyElements()}}}series.data=data;series.points=points},translate:function(){if(!this.processedXData){this.processData()}this.generatePoints();var series=this,chart=series.chart,options=series.options,stacking=options.stacking,xAxis=series.xAxis,categories=xAxis.categories,yAxis=series.yAxis,points=series.points,dataLength=points.length,leastDistance=xAxis.leastDistance,interval,i,cropI=-1;for(i=0;i<dataLength;i++){var point=points[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=yAxis.stacks[(yValue<0?'-':'')+series.stackKey],pointStack,distance,pointStackTotal;point.plotX=series.xAxis.translate(xValue);if(stacking&&series.visible&&stack&&stack[xValue]){pointStack=stack[xValue];pointStackTotal=pointStack.total;pointStack.cum=yBottom=pointStack.cum-yValue;yValue=yBottom+yValue;if(stacking==='percent'){yBottom=pointStackTotal?yBottom*100/pointStackTotal:0;yValue=pointStackTotal?yValue*100/pointStackTotal:0}point.percentage=pointStackTotal?point.y*100/pointStackTotal:0;point.stackTotal=pointStackTotal}if(defined(yBottom)){point.yBottom=yAxis.translate(yBottom,0,1,0,1)}if(yValue!==null){point.plotY=yAxis.translate(yValue,0,1,0,1)}point.clientX=chart.inverted?chart.plotHeight-point.plotX:point.plotX;point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x;if(series.getDistance&&i){distance=mathAbs(point.plotX-points[i-1].plotX);leastDistance=leastDistance===UNDEFINED?distance:mathMin(distance,leastDistance)}}xAxis.leastDistance=leastDistance;series.getSegments()},setTooltipPoints:function(renew){var series=this,chart=series.chart,inverted=chart.inverted,points=[],pointsLength,plotSize=mathRound((inverted?chart.plotTop:chart.plotLeft)+chart.plotSizeX),low,high,xAxis=series.xAxis,point,i,tooltipPoints=[];if(renew){series.tooltipPoints=null}each(series.segments||series.points,function(segment){points=points.concat(segment)});if(xAxis&&xAxis.reversed){points=points.reverse()}pointsLength=points.length;for(i=0;i<pointsLength;i++){point=points[i];low=points[i-1]?points[i-1]._high+1:0;high=point._high=points[i+1]?(mathFloor((point.plotX+(points[i+1]?points[i+1].plotX:plotSize))/2)):plotSize;while(low<=high){tooltipPoints[inverted?plotSize-low++:low++]=point}}series.tooltipPoints=tooltipPoints},onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;if(!hasTouch&&chart.mouseIsDown){return}if(hoverSeries&&hoverSeries!==series){hoverSeries.onMouseOut()}if(series.options.events.mouseOver){fireEvent(series,'mouseOver')}series.setState(HOVER_STATE);chart.hoverSeries=series},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut()}if(series&&options.events.mouseOut){fireEvent(series,'mouseOut')}if(tooltip&&!options.stickyTracking){tooltip.hide()}series.setState();chart.hoverSeries=null},animate:function(init){var series=this,chart=series.chart,clipRect=series.clipRect,animation=series.options.animation;if(animation&&!isObject(animation)){animation={}}if(init){if(!clipRect.isAnimating){clipRect.attr('width',0);clipRect.isAnimating=true}}else{clipRect.animate({width:chart.plotSizeX},animation);this.animate=null}},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,plotX,plotY,i,point,radius,graphic;if(series.options.marker.enabled){i=points.length;while(i--){point=points[i];plotX=point.plotX;plotY=point.plotY;graphic=point.graphic;if(plotY!==UNDEFINED&&!isNaN(plotY)){pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE];radius=pointAttr.r;if(graphic){graphic.animate({x:plotX-radius,y:plotY-radius,width:2*radius,height:2*radius})}else{point.graphic=chart.renderer.symbol(pick(point.marker&&point.marker.symbol,series.symbol),plotX-radius,plotY-radius,2*radius,2*radius).attr(pointAttr).add(series.group)}}}}},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{};base1=base1||{};base2=base2||{};base3=base3||{};for(attr in conversion){option=conversion[attr];obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr])}return obj},getAttribs:function(){var series=this,normalOptions=defaultPlotOptions[series.type].marker?series.options.marker:series.options,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},points=series.points,i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions,key;if(series.options.marker){stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+2;stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+1}else{stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get()}seriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults);each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE])});series.pointAttr=seriesPointAttr;i=points.length;while(i--){point=points[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0}hasPointSpecificOptions=false;if(point.options){for(key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true}}}if(hasPointSpecificOptions){pointAttr=[];stateOptions=normalOptions.states||{};pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};if(!series.options.marker){pointStateOptionsHover.color=Color(pointStateOptionsHover.color||point.options.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get()}pointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,seriesPointAttr[NORMAL_STATE]);pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]);pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE])}else{pointAttr=seriesPointAttr}point.pointAttr=pointAttr}},destroy:function(){var series=this,chart=series.chart,clipRect=series.clipRect,issue134=/\/5[0-9\.]+ (Safari|Mobile)\//.test(userAgent),destroy,i,data=series.data||[],point,prop;removeEvent(series);if(series.legendItem){series.chart.legend.destroyItem(series)}i=data.length;while(i--){point=data[i];if(point&&point.destroy){point.destroy()}}series.points=null;each(['area','graph','dataLabelsGroup','group','tracker'],function(prop){if(series[prop]){destroy=issue134&&prop==='group'?'hide':'destroy';series[prop][destroy]()}});if(chart.hoverSeries===series){chart.hoverSeries=null}erase(chart.series,series);for(prop in series){delete series[prop]}},drawDataLabels:function(){if(this.options.dataLabels.enabled){var series=this,x,y,points=series.points,options=series.options.dataLabels,str,dataLabelsGroup=series.dataLabelsGroup,chart=series.chart,inverted=chart.inverted,seriesType=series.type,color,stacking=series.options.stacking,isBarLike=seriesType==='column'||seriesType==='bar',vAlignIsNull=options.verticalAlign===null,yIsNull=options.y===null;if(isBarLike){if(stacking){if(vAlignIsNull){options=merge(options,{verticalAlign:'middle'})}if(yIsNull){options=merge(options,{y:{top:14,middle:4,bottom:-6}[options.verticalAlign]})}}else{if(vAlignIsNull){options=merge(options,{verticalAlign:'top'})}if(yIsNull){options=merge(options,{y:-6})}}}if(!dataLabelsGroup){dataLabelsGroup=series.dataLabelsGroup=chart.renderer.g('data-labels').attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:6}).translate(chart.plotLeft,chart.plotTop).add()}color=options.color;if(color==='auto'){color=null}options.style.color=pick(color,series.color);each(points,function(point,i){var barX=point.barX,plotX=(barX&&barX+point.barW/2)||point.plotX||-999,plotY=pick(point.plotY,-999),dataLabel=point.dataLabel,align=options.align,individualYDelta=yIsNull?(point.y>0?-6:12):options.y;str=options.formatter.call(point.getLabelConfig());x=(inverted?chart.plotWidth-plotY:plotX)+options.x;y=(inverted?chart.plotHeight-plotX:plotY)+individualYDelta;if(seriesType==='column'){x+={left:-1,right:1}[align]*point.barW/2||0}if(dataLabel){if(inverted&&!options.y){y=y+pInt(dataLabel.styles.lineHeight)*0.9-dataLabel.getBBox().height/2}dataLabel.attr({text:str}).animate({x:x,y:y})}else if(defined(str)){dataLabel=point.dataLabel=chart.renderer.text(str,x,y).attr({align:align,rotation:options.rotation,zIndex:1}).css(options.style).add(dataLabelsGroup);if(inverted&&!options.y){dataLabel.attr({y:y+pInt(dataLabel.styles.lineHeight)*0.9-dataLabel.getBBox().height/2})}}if(isBarLike&&series.options.stacking){var barY=point.barY,barW=point.barW,barH=point.barH;dataLabel.align(options,null,{x:inverted?chart.plotWidth-barY-barH:barX,y:inverted?chart.plotHeight-barX-barW:barY,width:inverted?barH:barW,height:inverted?barW:barH})}})}},drawGraph:function(state){var series=this,options=series.options,chart=series.chart,plotLeft=chart.plotLeft,plotRight=plotLeft+chart.plotWidth,graph=series.graph,graphPath=[],fillColor,area=series.area,group=series.group,color=options.lineColor||series.color,lineWidth=options.lineWidth,dashStyle=options.dashStyle,segmentPath,renderer=chart.renderer,translatedThreshold=series.yAxis.getThreshold(options.threshold),useArea=/^area/.test(series.type),singlePoints=[],areaPath=[],attribs;each(series.segments,function(segment){segmentPath=[];each(segment,function(point,i){if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i))}else{segmentPath.push(i?L:M);if(i&&options.step){var lastPoint=segment[i-1];segmentPath.push(point.plotX,lastPoint.plotY)}segmentPath.push(point.plotX,point.plotY)}});if(segment.length>1){graphPath=graphPath.concat(segmentPath)}else{singlePoints.push(segment[0])}if(useArea){var areaSegmentPath=[],i,segLength=segmentPath.length;for(i=0;i<segLength;i++){areaSegmentPath.push(segmentPath[i])}if(segLength===3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2])}if(options.stacking&&series.type!=='areaspline'){for(i=segment.length-1;i>=0;i--){areaSegmentPath.push(segment[i].plotX,segment[i].yBottom)}}else{areaSegmentPath.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold)}areaPath=areaPath.concat(areaSegmentPath)}});series.graphPath=graphPath;series.singlePoints=singlePoints;if(useArea){fillColor=pick(options.fillColor,Color(series.color).setOpacity(options.fillOpacity||0.75).get());if(area){area.animate({d:areaPath})}else{series.area=series.chart.renderer.path(areaPath).attr({fill:fillColor}).add(group)}}if(graph){graph.animate({d:graphPath})}else{if(lineWidth){attribs={'stroke':color,'stroke-width':lineWidth};if(dashStyle){attribs.dashstyle=dashStyle}series.graph=renderer.path(graphPath).attr(attribs).add(group).shadow(options.shadow)}}},render:function(){var series=this,chart=series.chart,group,setInvert,options=series.options,doClip=options.clip!==false,animation=options.animation,doAnimation=animation&&series.animate,duration=doAnimation?(animation&&animation.duration)||500:0,clipRect=series.clipRect,renderer=chart.renderer;if(!clipRect){clipRect=series.clipRect=!chart.hasRendered&&chart.clipRect?chart.clipRect:renderer.clipRect(0,0,chart.plotSizeX,chart.plotSizeY);if(!chart.clipRect){chart.clipRect=clipRect}}if(!series.group){group=series.group=renderer.g('series');if(chart.inverted){setInvert=function(){group.attr({width:chart.plotWidth,height:chart.plotHeight}).invert()};setInvert();addEvent(chart,'resize',setInvert)}if(doClip){group.clip(series.clipRect)}group.attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:options.zIndex}).translate(series.xAxis.left,series.yAxis.top).add(chart.seriesGroup)}series.drawDataLabels();if(doAnimation){series.animate(true)}series.getAttribs();if(series.drawGraph){series.drawGraph()}series.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker()}if(doAnimation){series.animate()}setTimeout(function(){clipRect.isAnimating=false;group=series.group;if(group&&clipRect!==chart.clipRect&&clipRect.renderer){if(doClip){group.clip((series.clipRect=chart.clipRect))}clipRect.destroy()}},duration);series.isDirty=series.isDirtyData=false},redraw:function(){var series=this,chart=series.chart,clipRect=series.clipRect,group=series.group;if(group){if(chart.inverted){group.attr({width:chart.plotWidth,height:chart.plotHeight})}group.animate({translateX:series.xAxis.left,translateY:series.yAxis.top})}series.translate();series.setTooltipPoints(true);if(series.isDirtyData){fireEvent(series,'updatedData')}series.render()},setState:function(state){var series=this,options=series.options,graph=series.graph,stateOptions=options.states,lineWidth=options.lineWidth;state=state||NORMAL_STATE;if(series.state!==state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===false){return}if(state){lineWidth=stateOptions[state].lineWidth||lineWidth+1}if(graph&&!graph.dashstyle){graph.attr({'stroke-width':lineWidth},state?0:500)}}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,seriesGroup=series.group,seriesTracker=series.tracker,dataLabelsGroup=series.dataLabelsGroup,showOrHide,i,points=series.points,point,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(seriesGroup){seriesGroup[showOrHide]()}if(seriesTracker){seriesTracker[showOrHide]()}else{i=points.length;while(i--){point=points[i];if(point.tracker){point.tracker[showOrHide]()}}}if(dataLabelsGroup){dataLabelsGroup[showOrHide]()}if(legendItem){chart.legend.colorizeItem(series,vis)}series.isDirty=true;if(series.options.stacking){each(chart.series,function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true}})}if(ignoreHiddenSeries){chart.isDirtyBox=true}if(redraw!==false){chart.redraw()}fireEvent(series,showOrHide)},show:function(){this.setVisible(true)},hide:function(){this.setVisible(false)},select:function(selected){var series=this;series.selected=selected=(selected===UNDEFINED)?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected}fireEvent(series,selected?'select':'unselect')},drawTracker:function(){var series=this,options=series.options,trackerPath=[].concat(series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i;if(trackerPathLength){i=trackerPathLength+1;while(i--){if(trackerPath[i]===M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L)}if((i&&trackerPath[i]===M)||i===trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1])}}}for(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY)}if(tracker){tracker.attr({d:trackerPath})}else{series.tracker=chart.renderer.path(trackerPath).attr({isTracker:true,stroke:TRACKER_FILL,fill:NONE,'stroke-width':options.lineWidth+2*snap,visibility:series.visible?VISIBLE:HIDDEN,zIndex:1}).on(hasTouch?'touchstart':'mouseover',function(){if(chart.hoverSeries!==series){series.onMouseOver()}}).on('mouseout',function(){if(!options.stickyTracking){series.onMouseOut()}}).css(css).add(chart.trackerGroup)}}};var LineSeries=extendClass(Series);seriesTypes.line=LineSeries;var AreaSeries=extendClass(Series,{type:'area',useThreshold:true});seriesTypes.area=AreaSeries;var SplineSeries=extendClass(Series,{type:'spline',getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(i&&i<segment.length-1){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;correction=((rightContY-leftContY)*(rightContX-plotX))/(rightContX-leftContX)+plotY-rightContY;leftContY+=correction;rightContY+=correction;if(leftContY>lastY&&leftContY>plotY){leftContY=mathMax(lastY,plotY);rightContY=2*plotY-leftContY}else if(leftContY<lastY&&leftContY<plotY){leftContY=mathMin(lastY,plotY);rightContY=2*plotY-leftContY}if(rightContY>nextY&&rightContY>plotY){rightContY=mathMax(nextY,plotY);leftContY=2*plotY-rightContY}else if(rightContY<nextY&&rightContY<plotY){rightContY=mathMin(nextY,plotY);leftContY=2*plotY-rightContY}point.rightContX=rightContX;point.rightContY=rightContY}if(!i){ret=[M,plotX,plotY]}else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null}return ret}});seriesTypes.spline=SplineSeries;var AreaSplineSeries=extendClass(SplineSeries,{type:'areaspline',useThreshold:true});seriesTypes.areaspline=AreaSplineSeries;var ColumnSeries=extendClass(Series,{type:'column',useThreshold:true,getDistance:true,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color',r:'borderRadius'},init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true}})}},translate:function(){var series=this,chart=series.chart,options=series.options,stacking=options.stacking,borderWidth=options.borderWidth,columnCount=0,xAxis=series.xAxis,reversedXAxis=xAxis.reversed,categories=xAxis.categories,stackGroups={},stackKey,columnIndex;Series.prototype.translate.apply(series);each(chart.series,function(otherSeries){if(otherSeries.type===series.type&&otherSeries.visible&&series.options.group===otherSeries.options.group){if(otherSeries.options.stacking){stackKey=otherSeries.stackKey;if(stackGroups[stackKey]===UNDEFINED){stackGroups[stackKey]=columnCount++}columnIndex=stackGroups[stackKey]}else{columnIndex=columnCount++}otherSeries.columnIndex=columnIndex}});var points=series.points,categoryWidth=mathAbs(pick(xAxis.leastDistance,chart.plotSizeX/((categories&&categories.length)||1))),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=mathCeil(mathMax(pick(optionPointWidth,pointOffsetWidth-2*pointPadding),1)),colIndex=(reversedXAxis?columnCount-series.columnIndex:series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-(categoryWidth/2))*(reversedXAxis?-1:1),threshold=options.threshold,translatedThreshold=series.yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5);each(points,function(point,i){var plotY=point.plotY,yBottom=point.yBottom||translatedThreshold,barX=point.plotX+pointXOffset,barY=mathCeil(mathMin(plotY,yBottom)),barH=mathCeil(mathMax(plotY,yBottom)-barY),stack=series.yAxis.stacks[(point.y<0?'-':'')+series.stackKey],trackerY,shapeArgs;if(stacking&&series.visible&&stack&&stack[point.x]){stack[point.x].setOffset(pointXOffset,pointWidth)}if(mathAbs(barH)<minPointLength){if(minPointLength){barH=minPointLength;barY=mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(plotY<=translatedThreshold?minPointLength:0)}trackerY=barY-3}extend(point,{barX:barX,barY:barY,barW:pointWidth,barH:barH});point.shapeType='rect';shapeArgs=extend(chart.renderer.Element.prototype.crisp.apply({},[borderWidth,barX,barY,pointWidth,barH]),{r:options.borderRadius});if(borderWidth%2){shapeArgs.y-=1;shapeArgs.height+=1}point.shapeArgs=shapeArgs;point.trackerArgs=defined(trackerY)&&merge(point.shapeArgs,{height:mathMax(6,barH+3),y:trackerY})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var series=this,options=series.options,renderer=series.chart.renderer,graphic,shapeArgs;each(series.points,function(point){var plotY=point.plotY;if(plotY!==UNDEFINED&&!isNaN(plotY)&&point.y!==null){graphic=point.graphic;shapeArgs=point.shapeArgs;if(graphic){stop(graphic);graphic.animate(shapeArgs)}else{point.graphic=graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(series.group).shadow(options.shadow)}}})},drawTracker:function(){var series=this,chart=series.chart,renderer=chart.renderer,shapeArgs,tracker,trackerLabel=+new Date(),cursor=series.options.cursor,css=cursor&&{cursor:cursor},rel;each(series.points,function(point){tracker=point.tracker;shapeArgs=point.trackerArgs||point.shapeArgs;delete shapeArgs.strokeWidth;if(point.y!==null){if(tracker){tracker.attr(shapeArgs)}else{point.tracker=renderer[point.shapeType](shapeArgs).attr({isTracker:trackerLabel,fill:TRACKER_FILL,visibility:series.visible?VISIBLE:HIDDEN,zIndex:1}).on(hasTouch?'touchstart':'mouseover',function(event){rel=event.relatedTarget||event.fromElement;if(chart.hoverSeries!==series&&attr(rel,'isTracker')!==trackerLabel){series.onMouseOver()}point.onMouseOver()}).on('mouseout',function(event){if(!series.options.stickyTracking){rel=event.relatedTarget||event.toElement;if(attr(rel,'isTracker')!==trackerLabel){series.onMouseOut()}}}).css(css).add(point.group||chart.trackerGroup)}}})},animate:function(init){var series=this,points=series.points;if(!init){each(points,function(point){var graphic=point.graphic,shapeArgs=point.shapeArgs;if(graphic){graphic.attr({height:0,y:series.yAxis.translate(0,0,1)});graphic.animate({height:shapeArgs.height,y:shapeArgs.y},series.options.animation)}});series.animate=null}},remove:function(){var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type===series.type){otherSeries.isDirty=true}})}Series.prototype.remove.apply(series,arguments)}});seriesTypes.column=ColumnSeries;var BarSeries=extendClass(ColumnSeries,{type:'bar',init:function(chart){chart.inverted=this.inverted=true;ColumnSeries.prototype.init.apply(this,arguments)}});seriesTypes.bar=BarSeries;var ScatterSeries=extendClass(Series,{type:'scatter',translate:function(){var series=this;Series.prototype.translate.apply(series);each(series.points,function(point){point.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:series.chart.options.tooltip.snap}})},drawTracker:function(){var series=this,cursor=series.options.cursor,css=cursor&&{cursor:cursor},graphic;each(series.points,function(point){graphic=point.graphic;if(graphic){graphic.attr({isTracker:true}).on('mouseover',function(event){series.onMouseOver();point.onMouseOver()}).on('mouseout',function(event){if(!series.options.stickyTracking){series.onMouseOut()}}).css(css)}})}});seriesTypes.scatter=ScatterSeries;var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;extend(point,{visible:point.visible!==false,name:pick(point.name,'Slice')});toggleSlice=function(){point.slice()};addEvent(point,'select',toggleSlice);addEvent(point,'unselect',toggleSlice);return point},setVisible:function(vis){var point=this,chart=point.series.chart,tracker=point.tracker,dataLabel=point.dataLabel,connector=point.connector,method;point.visible=vis=vis===UNDEFINED?!point.visible:vis;method=vis?'show':'hide';point.group[method]();if(tracker){tracker[method]()}if(dataLabel){dataLabel[method]()}if(connector){connector[method]()}if(point.legendItem){chart.legend.colorizeItem(point,vis)}},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,slicedTranslation=point.slicedTranslation,translation;setAnimation(animation,chart);redraw=pick(redraw,true);sliced=point.sliced=defined(sliced)?sliced:!point.sliced;translation={translateX:(sliced?slicedTranslation[0]:chart.plotLeft),translateY:(sliced?slicedTranslation[1]:chart.plotTop)};point.group.animate(translation);if(point.shadowGroup){point.shadowGroup.animate(translation)}}});var PieSeries=extendClass(Series,{type:'pie',isCartesian:false,pointClass:PiePoint,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color'},getColor:function(){this.initialColor=this.chart.counters.color},animate:function(init){var series=this,points=series.points;each(points,function(point){var graphic=point.graphic,args=point.shapeArgs,up=-mathPI/2;if(graphic){graphic.attr({r:0,start:up,end:up});graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation)}});series.animate=null},setData:function(){Series.prototype.setData.apply(this,arguments);this.processData();this.generatePoints()},translate:function(){var total=0,series=this,cumulative=-0.25,precision=1000,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,positions=options.center.concat([options.size,options.innerSize||0]),chart=series.chart,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,start,end,angle,points=series.points,circ=2*mathPI,fraction,smallestSize=mathMin(plotWidth,plotHeight),isPercent,radiusX,radiusY,labelDistance=options.dataLabels.distance;positions=map(positions,function(length,i){isPercent=/%$/.test(length);return isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length});series.getX=function(y,left){angle=math.asin((y-positions[1])/(positions[2]/2+labelDistance));return positions[0]+(left?-1:1)*(mathCos(angle)*(positions[2]/2+labelDistance))};series.center=positions;each(points,function(point){total+=point.y});each(points,function(point){fraction=total?point.y/total:0;start=mathRound(cumulative*circ*precision)/precision;cumulative+=fraction;end=mathRound(cumulative*circ*precision)/precision;point.shapeType='arc';point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:start,end:end};angle=(end+start)/2;point.slicedTranslation=map([mathCos(angle)*slicedOffset+chart.plotLeft,mathSin(angle)*slicedOffset+chart.plotTop],mathRound);radiusX=mathCos(angle)*positions[2]/2;radiusY=mathSin(angle)*positions[2]/2;point.tooltipPos=[positions[0]+radiusX*0.7,positions[1]+radiusY*0.7];point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,labelDistance<0?'center':angle<circ/4?'left':'right', angle];point.percentage=fraction*100;point.total=total});this.setTooltipPoints()},render:function(){var series=this;series.getAttribs();this.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker()}this.drawDataLabels();if(series.options.animation&&series.animate){series.animate()}series.isDirty=series.isDirtyData=false},drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,group,shadow=series.options.shadow,shadowGroup,shapeArgs;each(series.points,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;group=point.group;shadowGroup=point.shadowGroup;if(shadow&&!shadowGroup){shadowGroup=point.shadowGroup=renderer.g('shadow').attr({zIndex:4}).add()}if(!group){group=point.group=renderer.g('point').attr({zIndex:5}).add()}groupTranslation=point.sliced?point.slicedTranslation:[chart.plotLeft,chart.plotTop];group.translate(groupTranslation[0],groupTranslation[1]);if(shadowGroup){shadowGroup.translate(groupTranslation[0],groupTranslation[1])}if(graphic){graphic.animate(shapeArgs)}else{point.graphic=renderer.arc(shapeArgs).attr(extend(point.pointAttr[NORMAL_STATE],{'stroke-linejoin':'round'})).add(point.group).shadow(shadow,shadowGroup)}if(point.visible===false){point.setVisible(false)}})},drawDataLabels:function(){var series=this,points=series.points,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),connector,connectorPath,outside=options.distance>0,dataLabel,labelPos,labelHeight,lastY,centerY=series.center[1],quarters=[[],[],[],[]],x,y,visibility,overlapping,rankArr,secondPass,sign,lowerHalf,sort,i=4,j;Series.prototype.drawDataLabels.apply(series);each(points,function(point){var angle=point.labelPos[7],quarter;if(angle<0){quarter=0}else if(angle<mathPI/2){quarter=1}else if(angle<mathPI){quarter=2}else{quarter=3}quarters[quarter].push(point)});quarters[1].reverse();quarters[3].reverse();sort=function(a,b){return a.y>b.y};while(i--){overlapping=0;rankArr=[].concat(quarters[i]);rankArr.sort(sort);j=rankArr.length;while(j--){rankArr[j].rank=j}for(secondPass=0;secondPass<2;secondPass++){lowerHalf=i%3;lastY=lowerHalf?9999:-9999;sign=lowerHalf?-1:1;for(j=0;j<quarters[i].length;j++){point=quarters[i][j];dataLabel=point.dataLabel;if(dataLabel){labelPos=point.labelPos;visibility=VISIBLE;x=labelPos[0];y=labelPos[1];if(!labelHeight){labelHeight=dataLabel&&dataLabel.getBBox().height}if(outside){if(secondPass&&point.rank<overlapping){visibility=HIDDEN}else if((!lowerHalf&&y<lastY+labelHeight)||(lowerHalf&&y>lastY-labelHeight)){y=lastY+sign*labelHeight;x=series.getX(y,i>1);if((!lowerHalf&&y+labelHeight>centerY)||(lowerHalf&&y-labelHeight<centerY)){if(secondPass){visibility=HIDDEN}else{overlapping++}}}}if(point.visible===false){visibility=HIDDEN}if(visibility===VISIBLE){lastY=y}if(secondPass){dataLabel.attr({visibility:visibility,align:labelPos[6]})[dataLabel.moved?'animate':'attr']({x:x+options.x+({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y});dataLabel.moved=true;if(outside&&connectorWidth){connector=point.connector;connectorPath=[M,x+(labelPos[6]==='left'?5:-5),y,L,x,y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]];if(connector){connector.animate({d:connectorPath});connector.attr('visibility',visibility)}else{point.connector=connector=series.chart.renderer.path(connectorPath).attr({'stroke-width':connectorWidth,stroke:options.connectorColor||'#606060',visibility:visibility,zIndex:3}).translate(chart.plotLeft,chart.plotTop).add()}}}}}}}},drawTracker:ColumnSeries.prototype.drawTracker,getSymbol:function(){}});seriesTypes.pie=PieSeries;var DATA_GROUPING='dataGrouping',seriesProto=Series.prototype,baseProcessData=seriesProto.processData,baseGeneratePoints=seriesProto.generatePoints,baseDestroy=seriesProto.destroy;seriesProto.processData=function(){var series=this,options=series.options,dataGroupingOptions=options[DATA_GROUPING];baseProcessData.apply(this);if(!dataGroupingOptions||dataGroupingOptions.enabled===false){return}var i,processedXData=series.processedXData,processedYData=series.processedYData,data=series.data,dataOptions=options.data,plotSizeX=series.chart.plotSizeX,groupPixelWidth=dataGroupingOptions.groupPixelWidth,maxPoints=plotSizeX/groupPixelWidth,approximation=dataGroupingOptions.approximation,summarize=approximation==='average'||approximation==='sum',dataLength=processedXData.length,ohlcData=series.valueCount===4,groupedData=series.groupedData,groupedXData=[],groupedYData=[];each(groupedData||[],function(point,i){if(point){groupedData[i]=point.destroy()}});series.hasGroupedData=false;if(dataLength>maxPoints){series.hasGroupedData=true;series.points=null;var xMin=processedXData[0],xMax=processedXData[dataLength-1],interval=groupPixelWidth*(xMax-xMin)/plotSizeX,groupPositions=getTimeTicks(interval,xMin,xMax,null,dataGroupingOptions.units),pointX,pointY,value=UNDEFINED,open=null,high=null,low=null,close=null,count=0;for(i=0;i<dataLength;i++){while(groupPositions[1]!==UNDEFINED&&processedXData[i]>=groupPositions[1]){if(approximation==='average'&&value!==UNDEFINED&&value!==null){value/=count}pointX=groupPositions.shift();if(value!==UNDEFINED||ohlcData){groupedXData.push(pointX);if(ohlcData){groupedYData.push([open,high,low,close]);open=high=low=close=null}else{groupedYData.push(value)}}value=UNDEFINED;count=0}pointY=processedYData[i];if(summarize&&!ohlcData){value=value===UNDEFINED||value===null?pointY:value+pointY}else if(ohlcData){var index=series.cropStart+i,point=(data&&data[index])||series.pointClass.prototype.applyOptions.apply({},[dataOptions[index]]);if(open===null){open=point.open}high=high===null?point.high:mathMax(high,point.high);low=low===null?point.low:mathMin(low,point.low);close=point.close}else if(approximation==='open'&&value===UNDEFINED){value=pointY}else if(approximation==='high'){value=value===UNDEFINED?pointY:mathMax(value,pointY)}else if(approximation==='low'){value=value===UNDEFINED?pointY:mathMin(value,pointY)}else if(approximation==='close'){value=pointY}count++}if(dataGroupingOptions.smoothed){i=groupedXData.length-1;groupedXData[i]=xMax;while(i--&&i){groupedXData[i]+=interval/2}groupedXData[0]=xMin}series.tooltipHeaderFormat=dataGroupingOptions.dateTimeLabelFormats[groupPositions.unit[0]];series.unit=groupPositions.unit}else{groupedXData=processedXData;groupedYData=processedYData;series.tooltipHeaderFormat=null;series.unit=null}series.processedXData=groupedXData;series.processedYData=groupedYData};seriesProto.generatePoints=function(){var series=this;baseGeneratePoints.apply(series);series.groupedData=series.hasGroupedData?series.points:null};seriesProto.destroy=function(){var series=this,groupedData=series.groupedData||[],i=groupedData.length;while(i--){if(groupedData[i]){groupedData[i].destroy()}}baseDestroy.apply(series)};var dateTimeLabelFormats={second:'%A, %b %e, %H:%M:%S',minute:'%A, %b %e, %H:%M',hour:'%A, %b %e, %H:%M',day:'%A, %b %e, %Y',week:'Week from %A, %b %e, %Y',month:'%B %Y',year:'%Y'};defaultPlotOptions.line[DATA_GROUPING]=defaultPlotOptions.spline[DATA_GROUPING]=defaultPlotOptions.area[DATA_GROUPING]=defaultPlotOptions.areaspline[DATA_GROUPING]={approximation:'average',groupPixelWidth:2,dateTimeLabelFormats:dateTimeLabelFormats,units:[['millisecond',[1,2,5,10,20,25,50,100,200,500]],['second',[1,2,5,10,15,30]],['minute',[1,2,5,10,15,30]],['hour',[1,2,3,4,6,8,12]],['day',[1]],['week',[1]],['month',[1,3,6]],['year',null]]};defaultPlotOptions.column[DATA_GROUPING]={approximation:'sum',groupPixelWidth:10,dateTimeLabelFormats:dateTimeLabelFormats};defaultPlotOptions.ohlc=merge(defaultPlotOptions.column,{lineWidth:1,dataGrouping:{groupPixelWidth:5},states:{hover:{lineWidth:3}}});var OHLCPoint=extendClass(Point,{applyOptions:function(options){var point=this,series=point.series,i=0;if(typeof options==='object'&&typeof options.length!=='number'){extend(point,options);point.options=options}else if(options.length){if(options.length>=5){if(typeof options[0]==='string'){point.name=options[0]}else if(typeof options[0]==='number'){point.x=options[0]}i++}point.open=options[i++];point.high=options[i++];point.low=options[i++];point.close=options[i++];point.mean=options[i++];point.median=options[i++];point.start=options[i++];point.end=options[i++];point.requestsPerSecond=options[i++];point.stress=options[i++]}point.y=point.high;if(point.x===UNDEFINED&&series){point.x=series.autoIncrement()}return point},tooltipFormatter:function(){var point=this,series=point.series;return['<span style="color:'+series.color+';font-weight:bold">',(point.name||series.name),'</span>','<br/>','Start: ',point.start,'<br/>','End: ',point.end,'<br/>','Req/Sec: ',point.requestsPerSecond,'<br/>','Stress: ',point.stress+'%','<br/>','<br/>','Max: ',point.high,'<br/>','Upper Quartile: ',point.close,'<br/>','Lower Quartile: ',point.open,'<br/>','Min: ',point.low,'<br/>','<br/>','Mean: ',point.mean,'<br/>','Median: ',point.median,'<br/>'].join('')}});var OHLCSeries=extendClass(seriesTypes.column,{type:'ohlc',valueCount:4,pointClass:OHLCPoint,useThreshold:false,pointAttrToOptions:{stroke:'color','stroke-width':'lineWidth'},translate:function(){var series=this,yAxis=series.yAxis;seriesTypes.column.prototype.translate.apply(series);each(series.points,function(point){if(point.open!==null){point.plotOpen=yAxis.translate(point.open,0,1)}if(point.close!==null){point.plotClose=yAxis.translate(point.close,0,1)}})},drawPoints:function(){var series=this,points=series.points,chart=series.chart,pointAttr,plotOpen,plotClose,crispCorr,halfWidth,path,graphic,crispX;each(points,function(point){if(point.plotY!==UNDEFINED){graphic=point.graphic;pointAttr=point.pointAttr[point.selected?'selected':''];crispCorr=(pointAttr['stroke-width']%2)/2;crispX=mathRound(point.plotX)+crispCorr;halfWidth=mathRound(point.barW/2);path=['M',crispX,mathRound(point.yBottom),'L',crispX,mathRound(point.plotY)];if(point.open!==null){plotOpen=mathRound(point.plotOpen)+crispCorr;path.push('M',crispX,plotOpen,'L',crispX-halfWidth,plotOpen)}if(point.close!==null){plotClose=mathRound(point.plotClose)+crispCorr;path.push('M',crispX,plotClose,'L',crispX+halfWidth,plotClose)}if(graphic){graphic.animate({d:path})}else{point.graphic=chart.renderer.path(path).attr(pointAttr).add(series.group)}}})},animate:null});seriesTypes.ohlc=OHLCSeries;defaultPlotOptions.candlestick=merge(defaultPlotOptions.column,{lineColor:'black',lineWidth:1,upColor:'white',states:{hover:{lineWidth:2}}});var CandlestickSeries=extendClass(OHLCSeries,{type:'candlestick',pointAttrToOptions:{fill:'color',stroke:'lineColor','stroke-width':'lineWidth'},getAttribs:function(){OHLCSeries.prototype.getAttribs.apply(this,arguments);var series=this,options=series.options,stateOptions=options.states,upColor=options.upColor,seriesDownPointAttr=merge(series.pointAttr);seriesDownPointAttr[''].fill=upColor;seriesDownPointAttr.hover.fill=stateOptions.hover.upColor||upColor;seriesDownPointAttr.select.fill=stateOptions.select.upColor||upColor;each(series.points,function(point){if(point.open<point.close){point.pointAttr=seriesDownPointAttr}})},drawPoints:function(){var series=this,points=series.points,chart=series.chart,pointAttr,plotOpen,plotClose,topBox,bottomBox,crispCorr,crispX,graphic,path,halfWidth;each(points,function(point){graphic=point.graphic;if(point.plotY!==UNDEFINED){pointAttr=point.pointAttr[point.selected?'selected':''];crispCorr=(pointAttr['stroke-width']%2)/2;crispX=mathRound(point.plotX)+crispCorr;plotOpen=mathRound(point.plotOpen)+crispCorr;plotClose=mathRound(point.plotClose)+crispCorr;topBox=math.min(plotOpen,plotClose);bottomBox=math.max(plotOpen,plotClose);halfWidth=mathRound(point.barW/2);path=['M',crispX-halfWidth,bottomBox,'L',crispX-halfWidth,topBox,'L',crispX+halfWidth,topBox,'L',crispX+halfWidth,bottomBox,'L',crispX-halfWidth,bottomBox,'M',crispX,bottomBox,'L',crispX,mathRound(point.yBottom),'M',crispX,topBox,'L',crispX,mathRound(point.plotY),'Z'];if(graphic){graphic.animate({d:path})}else{point.graphic=chart.renderer.path(path).attr(pointAttr).add(series.group)}}})}});seriesTypes.candlestick=CandlestickSeries;var symbols=Renderer.prototype.symbols;defaultPlotOptions.flags=merge(defaultPlotOptions.column,{fillColor:'white',lineWidth:1,shape:'flag',stackDistance:7,states:{hover:{lineColor:'black',fillColor:'#FCFFC5'}},style:{fontSize:'11px',fontWeight:'bold',textAlign:'center'},y:-30});seriesTypes.flags=extendClass(seriesTypes.column,{type:'flags',noSharedTooltip:true,useThreshold:false,init:Series.prototype.init,pointAttrToOptions:{fill:'fillColor',stroke:'color','stroke-width':'lineWidth',r:'radius'},translate:function(){seriesTypes.column.prototype.translate.apply(this);var series=this,options=series.options,chart=series.chart,points=series.points,cursor=points.length-1,i,point,lastPoint,optionsOnSeries=options.onSeries,onSeries=optionsOnSeries&&chart.get(optionsOnSeries),onData,onPoint;if(onSeries){onData=onSeries.points;i=onData.length;points.sort(function(a,b){return(a.x-b.x)});while(i--&&points[cursor]){point=points[cursor];onPoint=onData[i];if(onPoint.x<=point.x){point.plotY=onPoint.plotY;cursor--;i++;if(cursor<0){break}}}}each(points,function(point,i){if(!onSeries){point.plotY=chart.plotHeight}lastPoint=points[i-1];if(lastPoint&&lastPoint.plotX===point.plotX){if(lastPoint.stackIndex===UNDEFINED){lastPoint.stackIndex=0}point.stackIndex=lastPoint.stackIndex+1}})},drawPoints:function(){var series=this,pointAttr,points=series.points,chart=series.chart,renderer=chart.renderer,plotX,plotY,options=series.options,optionsY=options.y,shape=options.shape,box,bBox,i,point,graphic,connector,stackIndex,crisp=(options.lineWidth%2/2),anchorX,anchorY;i=points.length;while(i--){point=points[i];plotX=point.plotX+crisp;stackIndex=point.stackIndex;plotY=point.plotY+optionsY+crisp-(stackIndex!==UNDEFINED&&stackIndex*options.stackDistance);if(isNaN(plotY)){plotY=0}anchorX=stackIndex?UNDEFINED:point.plotX+crisp;anchorY=stackIndex?UNDEFINED:point.plotY;graphic=point.graphic;connector=point.connector;if(plotY!==UNDEFINED){pointAttr=point.pointAttr[point.selected?'select':''];if(graphic){graphic.attr({x:plotX,y:plotY,r:pointAttr.r})}else{graphic=point.graphic=renderer.label(point.options.title||options.title||'A',plotX,plotY,shape,anchorX,anchorY).css(merge(options.style,point.style)).attr(pointAttr).attr({align:shape==='flag'?'left':'center',width:options.width,height:options.height}).add(series.group)}box=graphic.box;bBox=box.getBBox();point.shapeArgs=extend(bBox,{x:plotX-(shape==='flag'?0:box.attr('width')/2), y:plotY})}}},drawTracker:function(){var series=this;seriesTypes.column.prototype.drawTracker.apply(series);each(series.points,function(point){addEvent(point.tracker.element,'mouseover',function(){point.graphic.toFront()})})},tooltipFormatter:function(item){return item.point.text},animate:function(){}});symbols.flag=function(x,y,w,h,options){var anchorX=(options&&options.anchorX)||x,anchorY=(options&&options.anchorY)||y;return['M',anchorX,anchorY,'L',x,y+h,x,y,x+w,y,x+w,y+h,x,y+h,'M',anchorX,anchorY,'Z']};each(['circle','square'],function(shape){symbols[shape+'pin']=function(x,y,w,h,options){var anchorX=options&&options.anchorX,anchorY=options&&options.anchorY,path=symbols[shape](x,y,w,h);if(anchorX&&anchorY){path.push('M',x+w/2,y+h,'L',anchorX,anchorY)}return path}});var MOUSEDOWN=hasTouch?'touchstart':'mousedown',MOUSEMOVE=hasTouch?'touchmove':'mousemove',MOUSEUP=hasTouch?'touchend':'mouseup';var buttonGradient={linearGradient:[0,0,0,14],stops:[[0,'#FFF'],[1,'#CCC']]},units=[].concat(defaultPlotOptions.line.dataGrouping.units);units[4][1]=[1,2,3,4];units[5][1]=[1,2,3];extend(defaultOptions,{navigator:{handles:{backgroundColor:'#FFF',borderColor:'#666'},height:40,margin:10,maskFill:'rgba(255, 255, 255, 0.75)',outlineColor:'#444',outlineWidth:1,series:{type:'areaspline',color:'#4572A7',fillOpacity:0.4,dataGrouping:{smoothed:true,units:units},lineWidth:1,marker:{enabled:false},shadow:false},xAxis:{tickWidth:0,lineWidth:0,gridLineWidth:1,tickPixelInterval:200,labels:{align:'left',x:3,y:-4}},yAxis:{gridLineWidth:0,startOnTick:false,endOnTick:false,minPadding:0.1,maxPadding:0.1,labels:{enabled:false},title:{text:null},tickWidth:0}},scrollbar:{height:hasTouch?20:14,barBackgroundColor:buttonGradient,barBorderRadius:2,barBorderWidth:1,barBorderColor:'#666',buttonArrowColor:'#666',buttonBackgroundColor:buttonGradient,buttonBorderColor:'#666',buttonBorderRadius:2,buttonBorderWidth:1,rifleColor:'#666',trackBackgroundColor:{linearGradient:[0,0,0,10],stops:[[0,'#EEE'],[1,'#FFF']]},trackBorderColor:'#CCC',trackBorderWidth:1}});function Scroller(chart){var renderer=chart.renderer,chartOptions=chart.options,navigatorOptions=chartOptions.navigator,navigatorEnabled=navigatorOptions.enabled,navigatorLeft,navigatorSeries,scrollbarOptions=chartOptions.scrollbar,scrollbarEnabled=scrollbarOptions.enabled,grabbedLeft,grabbedRight,grabbedCenter,otherHandlePos,dragOffset,hasDragged,xAxis,yAxis,zoomedMin,zoomedMax,range,bodyStyle=document.body.style,defaultBodyCursor,handlesOptions=navigatorOptions.handles,height=navigatorEnabled?navigatorOptions.height:0,outlineWidth=navigatorOptions.outlineWidth,scrollbarHeight=scrollbarEnabled?scrollbarOptions.height:0,outlineHeight=height+scrollbarHeight,barBorderRadius=scrollbarOptions.barBorderRadius,top=navigatorOptions.top||chart.chartHeight-height-scrollbarHeight-chartOptions.chart.spacingBottom,halfOutline=outlineWidth/2,outlineTop,plotLeft,plotWidth,rendered,baseSeriesOption=navigatorOptions.baseSeries,baseSeries=chart.series[baseSeriesOption]||(typeof baseSeriesOption==='string'&&chart.get(baseSeriesOption))||chart.series[0],leftShade,rightShade,outline,handles=[],scrollbarGroup,scrollbarTrack,scrollbar,scrollbarRifles,scrollbarButtons=[];chart.resetZoomEnabled=false;function drawHandle(x,index){var attr={fill:handlesOptions.backgroundColor,stroke:handlesOptions.borderColor,'stroke-width':1};if(!rendered){handles[index]=renderer.g().css({cursor:'e-resize'}).attr({zIndex:3}).add();renderer.rect(-4.5,0,9,16,3,1).attr(attr).add(handles[index]);renderer.path(['M',-1.5,4,'L',-1.5,12,'M',0.5,4,'L',0.5,12]).attr(attr).add(handles[index])}handles[index].translate(plotLeft+scrollbarHeight+parseInt(x,10),top+height/2-8)}function drawScrollbarButton(index){if(!rendered){scrollbarButtons[index]=renderer.g().add(scrollbarGroup);renderer.rect(-0.5,-0.5,scrollbarHeight+1,scrollbarHeight+1,scrollbarOptions.buttonBorderRadius,scrollbarOptions.buttonBorderWidth).attr({stroke:scrollbarOptions.buttonBorderColor,'stroke-width':scrollbarOptions.buttonBorderWidth,fill:scrollbarOptions.buttonBackgroundColor}).add(scrollbarButtons[index]);renderer.path(['M',scrollbarHeight/2+(index?-1:1),scrollbarHeight/2-3,'L',scrollbarHeight/2+(index?-1:1),scrollbarHeight/2+3,scrollbarHeight/2+(index?2:-2),scrollbarHeight/2]).attr({fill:scrollbarOptions.buttonArrowColor}).add(scrollbarButtons[index])}if(index){scrollbarButtons[index].attr({translateX:plotWidth-scrollbarHeight})}}function render(min,max,pxMin,pxMax){var strokeWidth,scrollbarStrokeWidth=scrollbarOptions.barBorderWidth,centerBarX;outlineTop=top+halfOutline;plotLeft=chart.plotLeft;plotWidth=chart.plotWidth;navigatorLeft=plotLeft+scrollbarHeight;pxMin=pick(pxMin,xAxis.translate(min));pxMax=pick(pxMax,xAxis.translate(max));if(rendered&&xAxis.getExtremes){var newExtremes=chart.xAxis[0].getExtremes(),oldExtremes=xAxis.getExtremes();if(newExtremes.dataMin!==oldExtremes.min||newExtremes.dataMax!==oldExtremes.max){xAxis.setExtremes(newExtremes.dataMin,newExtremes.dataMax)}}zoomedMin=parseInt(mathMin(pxMin,pxMax),10);zoomedMax=parseInt(mathMax(pxMin,pxMax),10);range=zoomedMax-zoomedMin;if(!rendered){if(navigatorEnabled){leftShade=renderer.rect().attr({fill:navigatorOptions.maskFill,zIndex:3}).add();rightShade=renderer.rect().attr({fill:navigatorOptions.maskFill,zIndex:3}).add();outline=renderer.path().attr({'stroke-width':outlineWidth,stroke:navigatorOptions.outlineColor,zIndex:3}).add()}if(scrollbarEnabled){scrollbarGroup=renderer.g().add();strokeWidth=scrollbarOptions.trackBorderWidth;scrollbarTrack=renderer.rect().attr({y:-strokeWidth%2/2,fill:scrollbarOptions.trackBackgroundColor,stroke:scrollbarOptions.trackBorderColor,'stroke-width':strokeWidth,r:scrollbarOptions.trackBorderRadius||0,height:scrollbarHeight}).add(scrollbarGroup);scrollbar=renderer.rect().attr({y:-scrollbarStrokeWidth%2/2,height:scrollbarHeight,fill:scrollbarOptions.barBackgroundColor,stroke:scrollbarOptions.barBorderColor,'stroke-width':scrollbarStrokeWidth,rx:barBorderRadius,ry:barBorderRadius}).add(scrollbarGroup);scrollbarRifles=renderer.path().attr({stroke:scrollbarOptions.rifleColor,'stroke-width':1}).add(scrollbarGroup)}}if(navigatorEnabled){leftShade.attr({x:navigatorLeft,y:top,width:zoomedMin,height:height});rightShade.attr({x:navigatorLeft+zoomedMax,y:top,width:plotWidth-zoomedMax-2*scrollbarHeight,height:height});outline.attr({d:['M',plotLeft,outlineTop,'L',navigatorLeft+zoomedMin-halfOutline,outlineTop,navigatorLeft+zoomedMin-halfOutline,outlineTop+outlineHeight,navigatorLeft+zoomedMax+halfOutline,outlineTop+outlineHeight,navigatorLeft+zoomedMax+halfOutline,outlineTop,plotLeft+plotWidth,outlineTop]});drawHandle(zoomedMin-halfOutline,0);drawHandle(zoomedMax+halfOutline,1)}if(scrollbarEnabled){drawScrollbarButton(0);drawScrollbarButton(1);scrollbarGroup.translate(plotLeft,mathRound(outlineTop+height));scrollbarTrack.attr({width:plotWidth});scrollbar.attr({x:mathRound(scrollbarHeight+zoomedMin)+(scrollbarStrokeWidth%2/2),width:range});centerBarX=scrollbarHeight+zoomedMin+range/2-0.5;scrollbarRifles.attr({d:[M,centerBarX-3,scrollbarHeight/4,L,centerBarX-3,2*scrollbarHeight/3,M,centerBarX,scrollbarHeight/4,L,centerBarX,2*scrollbarHeight/3,M,centerBarX+3,scrollbarHeight/4,L,centerBarX+3,2*scrollbarHeight/3],visibility:range>12?VISIBLE:HIDDEN})}rendered=true}function addEvents(){addEvent(chart.container,MOUSEDOWN,function(e){e=chart.tracker.normalizeMouseEvent(e);var chartX=e.chartX,chartY=e.chartY,handleSensitivity=hasTouch?10:7,left,isOnNavigator;if(chartY>top&&chartY<top+height+scrollbarHeight){isOnNavigator=!scrollbarEnabled||chartY<top+height;if(isOnNavigator&&math.abs(chartX-zoomedMin-navigatorLeft)<handleSensitivity){grabbedLeft=true;otherHandlePos=zoomedMax}else if(isOnNavigator&&math.abs(chartX-zoomedMax-navigatorLeft)<handleSensitivity){grabbedRight=true;otherHandlePos=zoomedMin}else if(chartX>navigatorLeft+zoomedMin&&chartX<navigatorLeft+zoomedMax){grabbedCenter=chartX;defaultBodyCursor=bodyStyle.cursor;bodyStyle.cursor='ew-resize';dragOffset=chartX-zoomedMin}else if(chartX>plotLeft&&chartX<plotLeft+plotWidth){if(isOnNavigator){left=chartX-navigatorLeft-range/2}else{if(chartX<navigatorLeft){left=zoomedMin-mathMin(10,range)}else if(chartX>plotLeft+plotWidth-scrollbarHeight){left=zoomedMin+mathMin(10,range)}else{left=chartX<navigatorLeft+zoomedMin?zoomedMin-range:zoomedMax}}if(left<0){left=0}else if(left+range>plotWidth-2*scrollbarHeight){left=plotWidth-range-2*scrollbarHeight}chart.xAxis[0].setExtremes(xAxis.translate(left,true),xAxis.translate(left+range,true),true,false)}}if(e.preventDefault){e.preventDefault()}});addEvent(chart.container,MOUSEMOVE,function(e){e=chart.tracker.normalizeMouseEvent(e);var chartX=e.chartX;if(chartX<navigatorLeft){chartX=navigatorLeft}else if(chartX>plotLeft+plotWidth-scrollbarHeight){chartX=plotLeft+plotWidth-scrollbarHeight}if(grabbedLeft){hasDragged=true;render(0,0,chartX-navigatorLeft,otherHandlePos)}else if(grabbedRight){hasDragged=true;render(0,0,otherHandlePos,chartX-navigatorLeft)}else if(grabbedCenter){hasDragged=true;if(chartX<dragOffset){chartX=dragOffset}else if(chartX>plotWidth+dragOffset-range-2*scrollbarHeight){chartX=plotWidth+dragOffset-range-2*scrollbarHeight}render(0,0,chartX-dragOffset,chartX-dragOffset+range)}});addEvent(document,MOUSEUP,function(){if(hasDragged){chart.xAxis[0].setExtremes(xAxis.translate(zoomedMin,true),xAxis.translate(zoomedMax,true),true,false)}grabbedLeft=grabbedRight=grabbedCenter=hasDragged=dragOffset=null;bodyStyle.cursor=defaultBodyCursor})}function init(){var xAxisIndex=chart.xAxis.length,yAxisIndex=chart.yAxis.length;chart.extraBottomMargin=outlineHeight+navigatorOptions.margin;if(navigatorEnabled){var baseOptions=baseSeries.options,navigatorSeriesOptions,data=baseOptions.data;baseOptions.data=null;navigatorSeriesOptions=merge(baseSeries.options,navigatorOptions.series,{threshold:null,clip:false,enableMouseTracking:false,group:'nav',padXAxis:false,xAxis:xAxisIndex,yAxis:yAxisIndex,name:'Navigator',showInLegend:false});baseOptions.data=navigatorSeriesOptions.data=data;navigatorSeries=chart.initSeries(navigatorSeriesOptions);addEvent(baseSeries,'updatedData',function(){var baseExtremes=baseSeries.xAxis.getExtremes(),range=baseExtremes.max-baseExtremes.min,stickToMax=baseExtremes.max>=navigatorSeries.xData[navigatorSeries.xData.length-1],stickToMin=baseExtremes.min-range<=navigatorSeries.xData[0],newMax,newMin;navigatorSeries.options.pointStart=baseSeries.xData[0];navigatorSeries.setData(baseSeries.options.data);if(stickToMax){newMax=baseExtremes.dataMax;baseSeries.xAxis.setExtremes(newMax-range,newMax)}else if(stickToMin){newMin=baseExtremes.dataMin;baseSeries.xAxis.setExtremes(newMin,newMin+range)}else{render(mathMax(baseExtremes.min,baseExtremes.dataMin),mathMin(baseExtremes.max,baseExtremes.dataMax))}});xAxis=new chart.Axis(merge(navigatorOptions.xAxis,{isX:true,type:'datetime',index:xAxisIndex,height:height,top:top,offset:0,offsetLeft:scrollbarHeight,offsetRight:-scrollbarHeight,startOnTick:false,endOnTick:false,minPadding:0,maxPadding:0,zoomEnabled:false}));yAxis=new chart.Axis(merge(navigatorOptions.yAxis,{alignTicks:false,height:height,top:top,offset:0,index:yAxisIndex,zoomEnabled:false}))}else{xAxis={translate:function(value,reverse){var ext=baseSeries.xAxis.getExtremes(),scrollTrackWidth=chart.plotWidth-2*scrollbarHeight,dataMin=ext.dataMin,valueRange=ext.dataMax-dataMin;return reverse?(value*valueRange/scrollTrackWidth)+dataMin:scrollTrackWidth*(value-dataMin)/valueRange}}}addEvents()}init();return{render:render}}extend(defaultOptions,{rangeSelector:{}});defaultOptions.lang=merge(defaultOptions.lang,{rangeSelectorZoom:'Zoom',rangeSelectorFrom:'From:',rangeSelectorTo:'To:'});function RangeSelector(chart){var renderer=chart.renderer,rendered,container=chart.container,lang=defaultOptions.lang,div,leftBox,rightBox,selected,buttons=[],buttonOptions,options,defaultButtons=[{type:'day',count:1,text:'1d'},{type:'week',count:1,text:'1w'},{type:'month',count:1,text:'1m'},{type:'all',text:'All'}];chart.resetZoomEnabled=false;function clickButton(i,rangeOptions,redraw){var baseAxis=chart.xAxis[0],extremes=baseAxis&&baseAxis.getExtremes(),now,dataMin=extremes&&extremes.dataMin,dataMax=extremes&&extremes.dataMax,newMin,newMax=baseAxis&&mathMin(extremes.max,dataMax),date=new Date(newMax),type=rangeOptions.type,count=rangeOptions.count,range,rangeMin,year,fixedTimes={millisecond:1,second:1000,minute:60*1000,hour:3600*1000,day:24*3600*1000,week:7*24*3600*1000};if(dataMin===null||dataMax===null){return}if(fixedTimes[type]){range=fixedTimes[type]*count;newMin=mathMax(newMax-range,dataMin)}else if(type==='month'){date.setMonth(date.getMonth()-count);newMin=mathMax(date.getTime(),dataMin);range=30*24*3600*1000*count}else if(type==='ytd'){date=new Date(0);now=new Date();year=now.getFullYear();date.setFullYear(year);if(String(year)!==dateFormat('%Y',date)){date.setFullYear(year-1)}newMin=rangeMin=mathMax(dataMin||0,date.getTime());now=now.getTime();newMax=mathMin(dataMax||now,now)}else if(type==='year'){date.setFullYear(date.getFullYear()-count);newMin=mathMax(dataMin,date.getTime());range=365*24*3600*1000*count}else if(type==='all'&&baseAxis){newMin=dataMin;newMax=dataMax}if(buttons[i]){buttons[i].setState(2)}if(!baseAxis){chart.options.xAxis=merge(chart.options.xAxis,{range:range,min:rangeMin});selected=i}else{setTimeout(function(){baseAxis.setExtremes(newMin,newMax,pick(redraw,1),0);selected=i},1)}}function init(){chart.extraTopMargin=25;options=chart.options.rangeSelector;buttonOptions=options.buttons||defaultButtons;selected=options.selected;addEvent(container,MOUSEDOWN,function(){if(leftBox){leftBox.blur()}if(rightBox){rightBox.blur()}});if(selected!==UNDEFINED&&buttonOptions[selected]){clickButton(selected,buttonOptions[selected],false)}addEvent(chart,'load',function(){addEvent(chart.xAxis[0],'setExtremes',function(){if(buttons[selected]){buttons[selected].setState(0)}})})}function setInputValue(input,time){var format=input.hasFocus?'%Y-%m-%d':'%b %e, %Y';if(time){input.HCTime=time}input.value=dateFormat(format,input.HCTime)}function drawInput(name){var isMin=name==='min',input;createElement('span',{innerHTML:lang[isMin?'rangeSelectorFrom':'rangeSelectorTo']},options.labelStyle,div);input=createElement('input',{name:name,className:'highcharts-range-selector',type:'text'},extend({width:'80px',height:'16px',border:'1px solid silver',marginLeft:'5px',marginRight:isMin?'5px':'0',textAlign:'center'},options.inputStyle),div);input.onfocus=input.onblur=function(e){e=e||window.event;input.hasFocus=e.type==='focus';setInputValue(input)};input.onchange=function(){var inputValue=input.value,value=Date.parse(inputValue),extremes=chart.xAxis[0].getExtremes();if(isNaN(value)){value=inputValue.split('-');value=Date.UTC(pInt(value[0]),pInt(value[1])-1,pInt(value[2]))}if(!isNaN(value)&&((isMin&&(value>extremes.dataMin&&value<rightBox.HCTime))||(!isMin&&(value<extremes.dataMax&&value>leftBox.HCTime)))){chart.xAxis[0].setExtremes(isMin?value:extremes.min,isMin?extremes.max:value)}};return input}function render(min,max){var chartStyle=chart.options.chart.style,buttonTheme=options.buttonTheme,inputEnabled=options.inputEnabled!==false,states=buttonTheme&&buttonTheme.states;if(!rendered){renderer.text(lang.rangeSelectorZoom,chart.plotLeft,chart.plotTop-10).css(options.labelStyle).add();each(buttonOptions,function(rangeOptions,i){buttons[i]=renderer.button(rangeOptions.text,chart.plotLeft+50+i*30,chart.plotTop-25,function(){clickButton(i,rangeOptions);this.isActive=true},extend(buttonTheme,{padding:1,r:0}),states&&states.hover,states&&states.select).attr({width:28,height:16}).css({textAlign:'center'}).add();if(selected===i){buttons[i].setState(2)}});if(inputEnabled){div=createElement('div',null,{position:'relative',height:0,fontFamily:chartStyle.fontFamily,fontSize:chartStyle.fontSize},container.parentNode);div=createElement('div',null,extend({position:'absolute',top:(-chart.chartHeight+chart.plotTop-25)+'px',right:(chart.chartWidth-chart.plotLeft-chart.plotWidth)+'px'},options.inputBoxStyle),div);leftBox=drawInput('min');rightBox=drawInput('max')}}if(inputEnabled){setInputValue(leftBox,min);setInputValue(rightBox,max)}rendered=true}init();return{render:render}}Chart.prototype.callbacks.push(function(chart){var extremes,scroller=chart.scroller,rangeSelector=chart.rangeSelector;function renderScroller(){extremes=chart.xAxis[0].getExtremes();scroller.render(mathMax(extremes.min,extremes.dataMin),mathMin(extremes.max,extremes.dataMax))}function renderRangeSelector(){extremes=chart.xAxis[0].getExtremes();rangeSelector.render(extremes.min,extremes.max)}if(scroller){addEvent(chart.xAxis[0],'setExtremes',function(e){scroller.render(e.min,e.max)});addEvent(chart,'resize',renderScroller);renderScroller()}if(rangeSelector){addEvent(chart.xAxis[0],'setExtremes',function(e){rangeSelector.render(e.min,e.max)});addEvent(chart,'resize',renderRangeSelector);renderRangeSelector()}});Highcharts.StockChart=function(options,callback){var seriesOptions=options.series,lineOptions={marker:{enabled:false,states:{hover:{enabled:true,radius:5}}},shadow:false,states:{hover:{lineWidth:2}}};options.yAxis=map(splat(options.yAxis||{}),function(yAxisOptions){return merge({labels:{align:'left',x:2,y:-2},showLastLabel:false,title:{text:null}},yAxisOptions)});options.series=null;options=merge({chart:{panning:true},navigator:{enabled:true},scrollbar:{enabled:true},rangeSelector:{enabled:true},title:{text:null},tooltip:{shared:true,crosshairs:true},legend:{enabled:false},xAxis:{title:{text:null},showLastLabel:true},plotOptions:{line:lineOptions,spline:lineOptions,area:lineOptions,areaspline:lineOptions,column:{shadow:false,borderWidth:0}}},options,{chart:{inverted:false},xAxis:{type:'datetime',categories:null}});options.series=seriesOptions;return new Chart(options,callback)};extend(Highcharts,{Chart:Chart,dateFormat:dateFormat,pathAnim:pathAnim,getOptions:getOptions,numberFormat:numberFormat,Point:Point,Color:Color,Renderer:Renderer,seriesTypes:seriesTypes,setOptions:setOptions,Series:Series,addEvent:addEvent,removeEvent:removeEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,splat:splat,extendClass:extendClass,version:''})}());